import g from"./File-BV0MxLWa.js";import{F as b}from"./FileAiDialog-CCnHbO9L.js";import{_ as A,c as V,a as t,b as u,w as a,V as m,r as k,T as y,F as U,o as i,d as f,e as n,f as B,n as I,g as N,a0 as L,h as p,i as R,j as T,k as r,t as d}from"../index.js";import"./FileListItems-MigusJ7k.js";import"./utils-DxnQAr0v.js";import"./FileDialog-DgBVR8x_.js";const j={extends:g,components:{FileAiDialog:b},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((v,$)=>{const s=new Image;s.onload=v,s.onerror=$,s.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(v=>(console.error(v),!1))}}},P={key:1,class:"file"};function S(e,l,v,$,s,C){const F=k("FileDialog"),w=k("FileAiDialog"),D=k("FileUrlDialog");return i(),V(U,null,[t(m,null,{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[B("div",{class:I(["files",{readonly:e.readonly}])},[e.file.path?(i(),V("div",{key:0,class:"file",onClick:l[1]||(l[1]=o=>e.open(e.file))},[e.file.uploading?(i(),u(N,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):f("",!0),t(L,{draggable:!1,src:e.url(e.file.path),srcset:e.srcset(e.file.previews)},null,8,["src","srcset"]),!e.readonly&&e.file.path?(i(),u(p,{key:1,onClick:l[0]||(l[0]=R(o=>e.remove(),["stop"])),title:e.$gettext("Remove file"),icon:"mdi-trash-can",class:"btn-overlay",variant:"flat"},null,8,["title"])):f("",!0)])):e.readonly?f("",!0):(i(),V("div",P,[e.auth.can("file:view")?(i(),u(p,{key:0,onClick:l[2]||(l[2]=o=>e.vfiles=!0),title:e.$gettext("Add file"),icon:"mdi-button-cursor",variant:"flat"},null,8,["title"])):f("",!0),t(p,{onClick:l[3]||(l[3]=o=>e.vurls=!0),title:e.$gettext("Add file from URL"),icon:"mdi-link-variant-plus",variant:"flat"},null,8,["title"]),t(p,{onClick:l[4]||(l[4]=o=>s.vcreate=!0),title:e.$gettext("Create file"),icon:"mdi-creation",variant:"flat"},null,8,["title"]),t(p,{title:e.$gettext("Upload file"),icon:"mdi-upload",variant:"flat"},{default:a(()=>[t(T,{modelValue:e.selected,"onUpdate:modelValue":[l[5]||(l[5]=o=>e.selected=o),l[6]||(l[6]=o=>e.add(o))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1},8,["title"])]))],2)]),_:1}),e.file.path?(i(),u(n,{key:0,cols:"12",md:"6",class:"meta"},{default:a(()=>[t(m,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("name"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.name),1)]),_:1})]),_:1}),t(m,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("mime"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.mime),1)]),_:1})]),_:1}),t(m,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("editor"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.editor),1)]),_:1})]),_:1}),t(m,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("updated"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[r(d(new Date(e.file.updated_at).toLocaleString()),1)]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1}),(i(),u(y,{to:"body"},[t(F,{modelValue:e.vfiles,"onUpdate:modelValue":l[7]||(l[7]=o=>e.vfiles=o),onAdd:l[8]||(l[8]=o=>{C.handle(o),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(i(),u(y,{to:"body"},[t(w,{modelValue:s.vcreate,"onUpdate:modelValue":l[9]||(l[9]=o=>s.vcreate=o),onAdd:l[10]||(l[10]=o=>{e.select(o),s.vcreate=!1}),context:e.context},null,8,["modelValue","context"])])),(i(),u(y,{to:"body"},[t(D,{modelValue:e.vurls,"onUpdate:modelValue":l[11]||(l[11]=o=>e.vurls=o),onAdd:l[12]||(l[12]=o=>{e.select(o),e.vurls=!1})},null,8,["modelValue"])]))],64)}const G=A(j,[["render",S],["__scopeId","data-v-6cf5e331"]]);export{G as default};
