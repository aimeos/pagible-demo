import g from"./File-C8tPNdK4.js";import{F as b}from"./FileAiDialog-CioFnISu.js";import{_ as A,c as V,a as t,b as m,w as a,V as f,r as k,T as y,F as U,o as i,d as p,e as s,f as B,n as I,g as N,a0 as j,h as v,i as L,j as R,k as r,t as d}from"../index.js";import"./FileListItems-DVEk2ghK.js";import"./utils-9vItFOo7.js";import"./FileDialog-CWvA9BvN.js";const T={extends:g,components:{FileAiDialog:b},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((u,$)=>{const n=new Image;n.onload=u,n.onerror=$,n.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(u=>(console.error(u),!1))},srcset(e){let l=[];for(const u in e)l.push(`${this.url(e[u])} ${u}w`);return l.join(", ")}}},P={key:1,class:"file"};function S(e,l,u,$,n,C){const F=k("FileDialog"),w=k("FileAiDialog"),D=k("FileUrlDialog");return i(),V(U,null,[t(f,null,{default:a(()=>[t(s,{cols:"12",md:"6"},{default:a(()=>[B("div",{class:I(["files",{readonly:e.readonly}])},[e.file.path?(i(),V("div",{key:0,class:"file",onClick:l[1]||(l[1]=o=>e.open(e.file))},[e.file.uploading?(i(),m(N,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):p("",!0),t(j,{draggable:!1,src:e.url(e.file.path),srcset:C.srcset(e.file.previews)},null,8,["src","srcset"]),!e.readonly&&e.file.path?(i(),m(v,{key:1,onClick:l[0]||(l[0]=L(o=>e.remove(),["stop"])),title:e.$gettext("Remove file"),icon:"mdi-trash-can",class:"btn-overlay",variant:"flat"},null,8,["title"])):p("",!0)])):e.readonly?p("",!0):(i(),V("div",P,[e.auth.can("file:view")?(i(),m(v,{key:0,onClick:l[2]||(l[2]=o=>e.vfiles=!0),title:e.$gettext("Add file"),icon:"mdi-button-cursor",variant:"flat"},null,8,["title"])):p("",!0),t(v,{onClick:l[3]||(l[3]=o=>e.vurls=!0),title:e.$gettext("Add file from URL"),icon:"mdi-link-variant-plus",variant:"flat"},null,8,["title"]),t(v,{onClick:l[4]||(l[4]=o=>n.vcreate=!0),title:e.$gettext("Create file"),icon:"mdi-creation",variant:"flat"},null,8,["title"]),t(v,{title:e.$gettext("Upload file"),icon:"mdi-upload",variant:"flat"},{default:a(()=>[t(R,{modelValue:e.selected,"onUpdate:modelValue":[l[5]||(l[5]=o=>e.selected=o),l[6]||(l[6]=o=>e.add(o))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1},8,["title"])]))],2)]),_:1}),e.file.path?(i(),m(s,{key:0,cols:"12",md:"6",class:"meta"},{default:a(()=>[t(f,null,{default:a(()=>[t(s,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("name"))+":",1)]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.name),1)]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(s,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("mime"))+":",1)]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.mime),1)]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(s,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("editor"))+":",1)]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[r(d(e.file.editor),1)]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(s,{cols:"12",md:"3",class:"name"},{default:a(()=>[r(d(e.$gettext("updated"))+":",1)]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[r(d(new Date(e.file.updated_at).toLocaleString()),1)]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1}),(i(),m(y,{to:"body"},[t(F,{modelValue:e.vfiles,"onUpdate:modelValue":l[7]||(l[7]=o=>e.vfiles=o),onAdd:l[8]||(l[8]=o=>{C.handle(o),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(i(),m(y,{to:"body"},[t(w,{modelValue:n.vcreate,"onUpdate:modelValue":l[9]||(l[9]=o=>n.vcreate=o),onAdd:l[10]||(l[10]=o=>{e.select(o),n.vcreate=!1})},null,8,["modelValue"])])),(i(),m(y,{to:"body"},[t(D,{modelValue:e.vurls,"onUpdate:modelValue":l[11]||(l[11]=o=>e.vurls=o),onAdd:l[12]||(l[12]=o=>{e.select(o),e.vurls=!1})},null,8,["modelValue"])]))],64)}const q=A(T,[["render",S],["__scopeId","data-v-98ef2751"]]);export{q as default};
