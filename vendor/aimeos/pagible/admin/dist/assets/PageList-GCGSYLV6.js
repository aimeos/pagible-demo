var si=Object.defineProperty;var li=(e,t,n)=>t in e?si(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var lt=(e,t,n)=>li(e,typeof t!="symbol"?t+"":t,n);import{_ as we,aF as pn,aC as Et,b as E,w as m,aO as oi,o as v,a as y,aa as ut,c as M,F as ue,a3 as $e,aM as et,aP as ui,ab as H,f as N,t as I,I as tt,l as L,aN as Rt,a4 as rt,b6 as It,a1 as He,b7 as mn,ay as dt,a5 as Ht,T as St,r as ee,az as ht,d as P,ac as gn,ad as yn,n as ce,ae as vn,h as _,af as kn,K as le,aB as bn,b8 as cr,a2 as xn,V as Dt,e as We,am as mt,G as Me,a8 as qt,a9 as Ue,aD as wn,aE as Xe,a6 as dr,ax as Ze,a7 as hr,b9 as ci,i as je,aK as Lt,j as ct,H as nt,aG as fr,aH as pr,aI as mr,Y as di,aJ as hi,ap as $t,ba as he,bb as Ge,Q as gt,v as xe,a_ as wt,S as an,as as fi,b1 as Qt,bc as Ve,$ as pi}from"../index.js";import{U as mi,A as gi,N as yi}from"./Navigation-eoqzZlJ_.js";import{a as Ee,H as vi,A as ki}from"./utils-CgMtNAzL.js";import{S as Cn,F as Kt,E as bi}from"./ElementListItems-B_sfPort.js";import{l as xi}from"./vue-draggable-plus-lLveILCN.js";const wi={data:()=>({active:{},open:[0,1,2]}),setup(){const e=pn(),t=Et();return{drawer:e,side:t}},computed:{stores(){const e=Object.keys(this.side.store).sort(),t={};for(const n of e)t[n]=this.side.store[n];return t}},methods:{isActive(e,t){return typeof this.active[e]>"u"&&(this.active[e]={}),typeof this.active[e][t]>"u"&&(this.active[e][t]=!1),this.active[e][t]},sort(e){const t=Object.keys(e).sort(),n={};for(const r of t)n[r]=e[r];return n},toggle(e,t){this.side.toggle(e,t),this.active[e][t]=!this.active[e][t]}}},Ci={class:"name"},Si={class:"value"};function Ei(e,t,n,r,a,i){return v(),E(oi,{modelValue:r.drawer.aside,"onUpdate:modelValue":t[1]||(t[1]=s=>r.drawer.aside=s),"mobile-breakpoint":"md",location:"end"},{default:m(()=>[y(ut,{opened:e.open,"onUpdate:opened":t[0]||(t[0]=s=>e.open=s)},{default:m(()=>[(v(!0),M(ue,null,$e(i.stores,(s,l)=>et((v(),E(ui,{key:l,value:Object.keys(i.stores).indexOf(l)},{activator:m(({props:u})=>[y(H,tt({ref_for:!0},u),{default:m(()=>[L(I(e.$pgettext("as",l)),1)]),_:2},1040)]),default:m(()=>[(v(!0),M(ue,null,$e(s,(u,o)=>(v(),E(H,{key:o,active:i.isActive(l,o),onClick:c=>i.toggle(l,o),rounded:"lg"},{default:m(()=>[N("span",Ci,I(e.$pgettext("st",o)),1),N("span",Si,I(u),1)]),_:2},1032,["active","onClick"]))),128))]),_:2},1032,["value"])),[[Rt,Object.keys(s).length]])),128))]),_:1},8,["opened"])]),_:1},8,["modelValue"])}const Ii=we(wi,[["render",Ei],["__scopeId","data-v-d199f32c"]]),$i={components:{Fields:Kt,SchemaItems:Cn},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],data:()=>({vschemas:!1,panel:[]}),setup(){const e=rt(),t=It(),n=Et();return{auth:He(),messages:e,schemas:t,side:n}},computed:{available(){return Object.keys(this.schemas).length}},methods:{add(e){if(this.item.meta||(this.item.meta={}),this.item.meta[e.type]){this.messages.add(this.$gettext("The element has already been added"),"error");return}this.item.meta[e.type]={id:Ee(),type:e.type,data:{}},this.panel.push(Object.keys(this.item.meta).length-1),this.vschemas=!1},error(e,t){e._error=t,this.$emit("error",Object.values(this.item.meta||{}).some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.meta[e])!=null&&t.fields?(n=this.schemas.meta[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" available`),[])},remove(e){delete this.item.meta[e],this.$emit("change",!0),this.$nextTick(()=>{this.validate().then(t=>{this.$emit("error",!t)})})},reset(){Object.values(this.item.meta||{}).forEach(e=>{delete e._changed,delete e._error})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),r=this.side.shown("state","changed");return this.side.shown("type",e.type)&&(n&&e._error||r&&e._changed||t&&!e._error&&!e._changed)},store(e=!0){if(!e)return;const t={},n={};for(const r of Object.values(this.item.meta||{}))r.type&&(t[r.type]=(t[r.type]||0)+1),!r._changed&&!r._error&&(n.valid=(n.valid||0)+1),r._changed&&(n.changed=(n.changed||0)+1),r._error&&(n.error=(n.error||0)+1);this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(r=>r&&typeof r!="object"&&typeof r!="boolean"?r:null).filter(r=>!!r).join(" - ")).substring(0,50)||""},update(e){e._changed=!0,this.$emit("change",!0),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(r=>r))}}},Pi={class:"element-title"},Di={class:"element-type"},Oi={key:0,class:"btn-group"};function _i(e,t,n,r,a,i){const s=ee("Fields"),l=ee("SchemaItems"),u=mn("observe-visibility");return v(),M(ue,null,[et((v(),E(dt,null,{default:m(()=>[y(ht,null,{default:m(()=>[y(gn,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.panel=o),elevation:"0",multiple:""},{default:m(()=>[(v(!0),M(ue,null,$e(n.item.meta||{},(o,c)=>et((v(),E(yn,{key:c,class:ce({changed:o._changed,error:o._error})},{default:m(()=>[y(vn,{"expand-icon":"mdi-pencil"},{default:m(()=>[r.auth.can("page:save")?(v(),E(_,{key:0,onClick:h=>i.remove(c),icon:"mdi-delete",variant:"text"},null,8,["onClick"])):P("",!0),N("div",Pi,I(i.title(o)),1),N("div",Di,I(o.type),1)]),_:2},1024),y(kn,null,{default:m(()=>[y(s,{ref_for:!0,ref:"field",data:o.data,"onUpdate:data":h=>o.data=h,files:o.files,"onUpdate:files":h=>o.files=h,onError:h=>i.error(o,h),onChange:h=>i.update(o),readonly:!r.auth.can("page:save"),fields:i.fields(o.type),assets:n.assets,type:o.type},null,8,["data","onUpdate:data","files","onUpdate:files","onError","onChange","readonly","fields","assets","type"])]),_:2},1024)]),_:2},1032,["class"])),[[Rt,i.shown(o)]])),128))]),_:1},8,["modelValue"]),i.available&&r.auth.can("page:save")?(v(),M("div",Oi,[y(_,{onClick:t[1]||(t[1]=o=>e.vschemas=!0),title:e.$gettext("Add element"),icon:"mdi-view-grid-plus",color:"primary",variant:"flat"},null,8,["title"])])):P("",!0)]),_:1})]),_:1})),[[u,i.store]]),(v(),E(St,{to:"body"},[y(Ht,{modelValue:e.vschemas,"onUpdate:modelValue":t[3]||(t[3]=o=>e.vschemas=o),onAfterLeave:t[4]||(t[4]=o=>e.vschemas=!1),scrollable:"",width:"auto"},{default:m(()=>[y(l,{type:"meta",onAdd:t[2]||(t[2]=o=>i.add(o))})]),_:1},8,["modelValue"])]))],64)}const Ti=we($i,[["render",_i],["__scopeId","data-v-2a961d8b"]]),Ai={props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],inject:["debounce","locales","slugify"],data:()=>({errors:{},messages:{}}),setup(){const e=bn(),t=cr(),n=Et(),r=He();return{app:xn(),auth:r,side:n,config:t,languages:e}},created(){this.checkPathd=this.debounce(this.checkPath,500)},computed:{readonly(){return!this.auth.can("page:save")}},methods:{checkPath(){var e;return((e=this.$apollo)==null?void 0:e.query({query:le`query($filter: PageFilter) {
            pages(filter: $filter) {
              data {
                id
              }
            }
          }`,variables:{filter:{path:this.item.path||"",domain:this.item.domain||""}}}).then(t=>{var n,r,a,i,s,l;return((a=(r=(n=t==null?void 0:t.data)==null?void 0:n.pages)==null?void 0:r.data)==null?void 0:a.length)>0&&((l=(s=(i=t==null?void 0:t.data)==null?void 0:i.pages)==null?void 0:s.data)!=null&&l.some(u=>u.id!=this.item.id))?this.messages.path=[this.$gettext("The path is already in use by another page")]:this.messages.path=[],this.$emit("error",!!this.messages.path.length),this.messages.path}).catch(t=>{console.error("PageDetailItemProps::checkPath: Error checking path",t)}))||[]},reset(){this.errors={}},setPath(e){var t;!e&&((t=this.item.path)==null?void 0:t.at(0))==="_"&&this.updatePath(this.item.name)},update(e,t){this.item[e]=typeof t=="string"?t.trim():t,this.$emit("change",!0)},updatePath(e){this.update("path",this.slugify(e))},async validate(e=!1){await this.$nextTick();const t=[e?this.checkPathd():this.checkPath()];return Object.values(this.$refs).forEach(n=>{t.push(n.validate())}),Promise.all(t).then(n=>{const r=n.reduce((a,i)=>a+i.length,0);return this.$emit("error",!!r),r||!0})}},watch:{item:{deep:!0,immediate:!0,handler(e){this.validate(!0)}}}};function Fi(e,t,n,r,a,i){return v(),E(dt,null,{default:m(()=>[y(ht,null,{default:m(()=>[y(Dt,null,{default:m(()=>[y(We,{cols:"12",md:"6"},{default:m(()=>[y(mt,{ref:"status",items:[{key:0,val:e.$gettext("Disabled")},{key:1,val:e.$gettext("Enabled")},{key:2,val:e.$gettext("Hidden in navigation")}],readonly:i.readonly,modelValue:n.item.status,label:e.$gettext("Status"),"onUpdate:modelValue":t[0]||(t[0]=s=>i.update("status",s)),variant:"underlined","item-title":"val","item-value":"key"},null,8,["items","readonly","modelValue","label"])]),_:1}),y(We,{cols:"12",md:"6"},{default:m(()=>[y(mt,{ref:"lang",items:i.locales(),readonly:i.readonly,modelValue:n.item.lang,label:e.$gettext("Language"),"onUpdate:modelValue":t[1]||(t[1]=s=>i.update("lang",s)),variant:"underlined"},null,8,["items","readonly","modelValue","label"])]),_:1})]),_:1}),y(Dt,null,{default:m(()=>[y(We,{cols:"12",md:"6"},{default:m(()=>[y(Me,{ref:"title",rules:[s=>!!s||e.$gettext("Field is required")],readonly:i.readonly,modelValue:n.item.title,label:e.$gettext("Page title"),"onUpdate:modelValue":t[2]||(t[2]=s=>i.update("title",s)),"onUpdate:focused":t[3]||(t[3]=s=>i.setPath(s)),variant:"underlined",maxlength:"60",counter:"60"},null,8,["rules","readonly","modelValue","label"]),y(Me,{ref:"name",readonly:i.readonly,modelValue:n.item.name,label:e.$gettext("Page name"),"onUpdate:modelValue":t[4]||(t[4]=s=>i.update("name",s)),variant:"underlined",counter:"30",maxlength:"30"},null,8,["readonly","modelValue","label"])]),_:1}),y(We,{cols:"12",md:"6"},{default:m(()=>[y(Me,{ref:"path",rules:[s=>!s||s&&s[0]!=="/"||e.$gettext("Path must not start with a slash (/)")],error:!!(e.messages.path||[]).length,"error-messages":e.messages.path,readonly:i.readonly,modelValue:n.item.path,label:e.$gettext("URL path"),"onUpdate:modelValue":t[5]||(t[5]=s=>{i.updatePath(s),e.messages.path=null}),onChange:t[6]||(t[6]=s=>i.checkPath()),variant:"underlined",maxlength:"255",counter:"255"},null,8,["rules","error","error-messages","readonly","modelValue","label"]),r.app.multidomain?(v(),E(Me,{key:0,ref:"domain",rules:[s=>!!s||e.$gettext("Field is required"),s=>!s||s&&/^([0-9a-z]+[.-])*[0-9a-z]+\.[a-z]{2,}$/.test(s)||e.$gettext("Domain name is invalid")],readonly:i.readonly,modelValue:n.item.domain,label:e.$gettext("Domain"),"onUpdate:modelValue":t[7]||(t[7]=s=>i.update("domain",s)),variant:"underlined",maxlength:"255",counter:"255"},null,8,["rules","readonly","modelValue","label"])):P("",!0)]),_:1})]),_:1}),y(Dt,null,{default:m(()=>[y(We,{cols:"12",md:"6"},{default:m(()=>[y(mt,{ref:"theme",readonly:i.readonly,modelValue:n.item.theme,label:e.$gettext("Theme"),items:Object.keys(r.config.get("themes",{cms:""})),"onUpdate:modelValue":t[8]||(t[8]=s=>{i.update("theme",s),n.item.type=""}),variant:"underlined"},null,8,["readonly","modelValue","label","items"]),y(mt,{ref:"type",readonly:i.readonly,modelValue:n.item.type,label:e.$gettext("Page type"),items:Object.keys(r.config.get(`themes.${n.item.theme||"cms"}.types`,{page:""})),"onUpdate:modelValue":t[9]||(t[9]=s=>i.update("type",s)),variant:"underlined"},null,8,["readonly","modelValue","label","items"])]),_:1}),y(We,{cols:"12",md:"6"},{default:m(()=>[y(Me,{ref:"tag",modelValue:n.item.tag,"onUpdate:modelValue":[t[10]||(t[10]=s=>n.item.tag=s),t[11]||(t[11]=s=>i.update())],readonly:i.readonly,label:e.$gettext("Page tag"),variant:"underlined",maxlength:"30",counter:"30"},null,8,["modelValue","readonly","label"]),y(mt,{ref:"cache",items:[{key:0,val:e.$gettext("No cache")},{key:1,val:e.$ngettext("%{num} minute","%{num} minutes",1,{num:1})},{key:5,val:e.$ngettext("%{num} minute","%{num} minutes",5,{num:5})},{key:15,val:e.$ngettext("%{num} minute","%{num} minutes",15,{num:15})},{key:30,val:e.$ngettext("%{num} minute","%{num} minutes",30,{num:30})},{key:60,val:e.$ngettext("%{num} hour","%{num} hours",1,{num:1})},{key:180,val:e.$ngettext("%{num} hour","%{num} hours",3,{num:3})},{key:360,val:e.$ngettext("%{num} hour","%{num} hours",6,{num:6})},{key:720,val:e.$ngettext("%{num} hour","%{num} hours",12,{num:12})},{key:1440,val:e.$ngettext("%{num} hour","%{num} hours",24,{num:24})}],readonly:i.readonly,modelValue:n.item.cache,label:e.$gettext("Cache time"),"onUpdate:modelValue":t[12]||(t[12]=s=>i.update("cache",s)),variant:"underlined","item-title":"val","item-value":"key"},null,8,["items","readonly","modelValue","label"])]),_:1})]),_:1}),y(Dt,null,{default:m(()=>[y(We,{cols:"12"},{default:m(()=>[y(Me,{ref:"to",rules:[s=>!s||s.match("^((https?:)?//([^\\s/:@]+(:[^\\s/:@]+)?@)?([0-9a-z]+(\\.|-))*[0-9a-z]+\\.[a-z]{2,}(:[0-9]{1,5})?)?(/[^\\s]*)*$")!==null||e.$gettext("URL is not valid")],readonly:i.readonly,modelValue:n.item.to,label:e.$gettext("Redirect URL"),"onUpdate:modelValue":t[13]||(t[13]=s=>i.update("to",s)),variant:"underlined",maxlength:"255",counter:"255"},null,8,["rules","readonly","modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})}const Li=we(Ai,[["render",Fi]]),Vi={components:{Fields:Kt,SchemaItems:Cn},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["change","error"],data:()=>({vschemas:!1,panel:[]}),setup(){const e=rt(),t=It(),n=Et();return{auth:He(),messages:e,schemas:t,side:n}},computed:{available(){return Object.keys(this.schemas).length}},methods:{add(e){if(this.item.config||(this.item.config={}),this.item.config[e.type]){this.messages.add(this.$gettext("The element has already been added"),"error");return}this.item.config[e.type]={id:Ee(),type:e.type,data:{}},this.panel.push(Object.keys(this.item.config).length-1),this.vschemas=!1},error(e,t){e._error=t,this.$emit("error",Object.values(this.item.config||{}).some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.config[e])!=null&&t.fields?(n=this.schemas.config[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" available`),[])},remove(e){delete this.item.config[e],this.$emit("change",!0),this.$nextTick(()=>{this.validate().then(t=>{this.$emit("error",!t)})})},reset(){Object.values(this.item.config||{}).forEach(e=>{delete e._changed,delete e._error})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),r=this.side.shown("state","changed");return this.side.shown("type",e.type)&&(n&&e._error||r&&e._changed||t&&!e._error&&!e._changed)},store(e=!0){if(!e)return;const t={},n={};for(const r of Object.values(this.item.config||{}))r.type&&(t[r.type]=(t[r.type]||0)+1),!r._changed&&!r._error&&(n.valid=(n.valid||0)+1),r._changed&&(n.changed=(n.changed||0)+1),r._error&&(n.error=(n.error||0)+1);this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(r=>r&&typeof r!="object"&&typeof r!="boolean"?r:null).filter(r=>!!r).join(" - ")).substring(0,50)||""},update(e){e._changed=!0,this.$emit("change",!0),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(r=>r))}}},zi={class:"element-title"},Bi={class:"element-type"},Ni={key:0,class:"btn-group"};function Mi(e,t,n,r,a,i){const s=ee("Fields"),l=ee("SchemaItems"),u=mn("observe-visibility");return v(),M(ue,null,[et((v(),E(dt,null,{default:m(()=>[y(ht,null,{default:m(()=>[y(gn,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.panel=o),elevation:"0",multiple:""},{default:m(()=>[(v(!0),M(ue,null,$e(n.item.config||{},(o,c)=>et((v(),E(yn,{key:c,class:ce({changed:o._changed,error:o._error})},{default:m(()=>[y(vn,{"expand-icon":"mdi-pencil"},{default:m(()=>[r.auth.can("page:save")?(v(),E(_,{key:0,onClick:h=>i.remove(c),title:e.$gettext("Remove content element"),icon:"mdi-delete",variant:"text"},null,8,["onClick","title"])):P("",!0),N("div",zi,I(i.title(o)),1),N("div",Bi,I(o.type),1)]),_:2},1024),y(kn,null,{default:m(()=>[y(s,{ref_for:!0,ref:"field",data:o.data,"onUpdate:data":h=>o.data=h,files:o.files,"onUpdate:files":h=>o.files=h,onError:h=>i.error(o,h),onChange:h=>i.update(o),readonly:!r.auth.can("page:save"),fields:i.fields(o.type),assets:n.assets,type:o.type},null,8,["data","onUpdate:data","files","onUpdate:files","onError","onChange","readonly","fields","assets","type"])]),_:2},1024)]),_:2},1032,["class"])),[[Rt,i.shown(o)]])),128))]),_:1},8,["modelValue"]),i.available&&r.auth.can("page:save")?(v(),M("div",Ni,[y(_,{onClick:t[1]||(t[1]=o=>e.vschemas=!0),title:e.$gettext("Add element"),icon:"mdi-view-grid-plus",color:"primary",variant:"flat"},null,8,["title"])])):P("",!0)]),_:1})]),_:1})),[[u,i.store]]),(v(),E(St,{to:"body"},[y(Ht,{modelValue:e.vschemas,"onUpdate:modelValue":t[3]||(t[3]=o=>e.vschemas=o),onAfterLeave:t[4]||(t[4]=o=>e.vschemas=!1),scrollable:"",width:"auto"},{default:m(()=>[y(l,{type:"config",onAdd:t[2]||(t[2]=o=>i.add(o))})]),_:1},8,["modelValue"])]))],64)}const ji=we(Vi,[["render",Mi],["__scopeId","data-v-87a051cc"]]),Ui={components:{PageDetailItemMeta:Ti,PageDetailItemProps:Li,PageDetailItemConfig:ji},props:{item:{type:Object,required:!0},assets:{type:Object,default:()=>{}}},emits:["update:item","update:aside","error"],data:()=>({changed:{},errors:{},tab:"details"}),methods:{error(e,t){this.errors[e]=t,this.$emit("error",Object.values(this.errors).includes(!0))},reset(){var e,t,n;this.changed={},this.errors={},(e=this.$refs.props)==null||e.reset(),(t=this.$refs.meta)==null||t.reset(),(n=this.$refs.config)==null||n.reset()},update(e){this.changed[e]=!0,this.$emit("update:item",this.item)},validate(){const e=Object.values(this.$refs).map(t=>t.validate());return Promise.all(e).then(t=>t.every(n=>n))}}};function Ri(e,t,n,r,a,i){const s=ee("PageDetailItemProps"),l=ee("PageDetailItemMeta"),u=ee("PageDetailItemConfig");return v(),E(dt,null,{default:m(()=>[y(ht,{class:"box scroll"},{default:m(()=>[y(qt,{class:"subtabs",modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=o=>e.tab=o),"align-tabs":"center"},{default:m(()=>[y(Ue,{value:"details",class:ce({changed:e.changed.details,error:e.errors.details}),onClick:t[0]||(t[0]=o=>e.$emit("update:aside","meta"))},{default:m(()=>[L(I(e.$gettext("Detail")),1)]),_:1},8,["class"]),y(Ue,{value:"meta",class:ce({changed:e.changed.meta,error:e.errors.meta}),onClick:t[1]||(t[1]=o=>e.$emit("update:aside","count"))},{default:m(()=>[L(I(e.$gettext("Meta")),1)]),_:1},8,["class"]),y(Ue,{value:"config",class:ce({changed:e.changed.config,error:e.errors.config}),onClick:t[2]||(t[2]=o=>e.$emit("update:aside","count"))},{default:m(()=>[L(I(e.$gettext("Config")),1)]),_:1},8,["class"])]),_:1},8,["modelValue"]),y(wn,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=o=>e.tab=o),touch:!1},{default:m(()=>[y(Xe,{value:"details"},{default:m(()=>[y(s,{ref:"props",item:n.item,assets:n.assets,onChange:t[4]||(t[4]=o=>i.update("details")),onError:t[5]||(t[5]=o=>i.error("details",o))},null,8,["item","assets"])]),_:1}),y(Xe,{value:"meta"},{default:m(()=>[y(l,{ref:"meta",item:n.item,assets:n.assets,onChange:t[6]||(t[6]=o=>i.update("meta")),onError:t[7]||(t[7]=o=>i.error("meta",o))},null,8,["item","assets"])]),_:1}),y(Xe,{value:"config"},{default:m(()=>[y(u,{ref:"config",item:n.item,assets:n.assets,onChange:t[8]||(t[8]=o=>i.update("config")),onError:t[9]||(t[9]=o=>i.error("config",o))},null,8,["item","assets"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const Hi=we(Ui,[["render",Ri],["__scopeId","data-v-f6e5717a"]]),qi={components:{ElementListItems:bi,SchemaItems:Cn},props:{modelValue:{type:Boolean,required:!0},elements:{type:Boolean,default:!0}},emits:["update:modelValue","add"]},Ki={key:0};function Wi(e,t,n,r,a,i){const s=ee("SchemaItems"),l=ee("ElementListItems");return v(),E(Ht,{modelValue:n.modelValue,onAfterLeave:t[3]||(t[3]=u=>e.$emit("update:modelValue",!1)),"max-width":"1200",scrollable:""},{default:m(()=>[y(dr,null,{append:m(()=>[y(_,{title:e.$gettext("Close"),onClick:t[0]||(t[0]=u=>e.$emit("update:modelValue",!1)),icon:"mdi-close",variant:"flat"},null,8,["title"])]),title:m(()=>[L(I(e.$gettext("Content elements")),1)]),default:m(()=>[y(Ze),y(hr,null,{default:m(()=>[y(s,{type:"content",onAdd:t[1]||(t[1]=u=>e.$emit("add",u))}),n.elements?(v(),M("div",Ki,[y(qt,null,{default:m(()=>[y(Ue,null,{default:m(()=>[L(I(e.$gettext("Shared elements")),1)]),_:1})]),_:1}),y(l,{onSelect:t[2]||(t[2]=u=>e.$emit("add",u)),embed:""})])):P("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}const gr=we(qi,[["render",Wi],["__scopeId","data-v-90b37385"]]),Vn={}.hasOwnProperty;function Ji(e,t){const n=t||{};function r(a,...i){let s=r.invalid;const l=r.handlers;if(a&&Vn.call(a,e)){const u=String(a[e]);s=Vn.call(l,u)?l[u]:r.unknown}if(s)return s.call(this,a,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Qi={}.hasOwnProperty;function yr(e,t){let n=-1,r;if(t.extensions)for(;++n<t.extensions.length;)yr(e,t.extensions[n]);for(r in t)if(Qi.call(t,r))switch(r){case"extensions":break;case"unsafe":{zn(e[r],t[r]);break}case"join":{zn(e[r],t[r]);break}case"handlers":{Yi(e[r],t[r]);break}default:e.options[r]=t[r]}return e}function zn(e,t){t&&e.push(...t)}function Yi(e,t){t&&Object.assign(e,t)}function Xi(e,t,n,r){const a=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const s=n.indentLines(n.containerFlow(e,i.current()),Zi);return a(),s}function Zi(e,t,n){return">"+(n?"":" ")+e}function vr(e,t){return Bn(e,t.inConstruct,!0)&&!Bn(e,t.notInConstruct,!1)}function Bn(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Nn(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&vr(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Gi(e,t){const n=String(e);let r=n.indexOf(t),a=r,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++i>s&&(s=i):i=1,a=r+t.length,r=n.indexOf(t,a);return s}function sn(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ea(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function ta(e,t,n,r){const a=ea(n),i=e.value||"",s=a==="`"?"GraveAccent":"Tilde";if(sn(e,n)){const h=n.enter("codeIndented"),f=n.indentLines(i,na);return h(),f}const l=n.createTracker(r),u=a.repeat(Math.max(Gi(i,a)+1,3)),o=n.enter("codeFenced");let c=l.move(u);if(e.lang){const h=n.enter(`codeFencedLang${s}`);c+=l.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...l.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${s}`);c+=l.move(" "),c+=l.move(n.safe(e.meta,{before:c,after:`
`,encode:["`"],...l.current()})),h()}return c+=l.move(`
`),i&&(c+=l.move(i+`
`)),c+=l.move(u),o(),c}function na(e,t,n){return(n?"":"    ")+e}function Sn(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function ra(e,t,n,r){const a=Sn(n),i=a==='"'?"Quote":"Apostrophe",s=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let o=u.move("[");return o+=u.move(n.safe(n.associationId(e),{before:o,after:"]",...u.current()})),o+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),o+=u.move("<"),o+=u.move(n.safe(e.url,{before:o,after:">",...u.current()})),o+=u.move(">")):(l=n.enter("destinationRaw"),o+=u.move(n.safe(e.url,{before:o,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=n.enter(`title${i}`),o+=u.move(" "+a),o+=u.move(n.safe(e.title,{before:o,after:a,...u.current()})),o+=u.move(a),l()),s(),o}function ia(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Re(e){return"&#x"+e.toString(16).toUpperCase()+";"}const Oe=qe(/[A-Za-z]/),Ie=qe(/[\dA-Za-z]/),aa=qe(/[#-'*+\--9=?A-Z^-~]/);function ln(e){return e!==null&&(e<32||e===127)}const on=qe(/\d/),sa=qe(/[\dA-Fa-f]/),la=qe(/[!-/:-@[-`{-~]/);function R(e){return e!==null&&e<-2}function ge(e){return e!==null&&(e<0||e===32)}function G(e){return e===-2||e===-1||e===32}const oa=qe(new RegExp("\\p{P}|\\p{S}","u")),ua=qe(/\s/);function qe(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Vt(e){if(e===null||ge(e)||ua(e))return 1;if(oa(e))return 2}function zt(e,t,n){const r=Vt(e),a=Vt(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}kr.peek=ca;function kr(e,t,n,r){const a=ia(n),i=n.enter("emphasis"),s=n.createTracker(r),l=s.move(a);let u=s.move(n.containerPhrasing(e,{after:a,before:l,...s.current()}));const o=u.charCodeAt(0),c=zt(r.before.charCodeAt(r.before.length-1),o,a);c.inside&&(u=Re(o)+u.slice(1));const h=u.charCodeAt(u.length-1),f=zt(r.after.charCodeAt(0),h,a);f.inside&&(u=u.slice(0,-1)+Re(h));const d=s.move(a);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},l+u+d}function ca(e,t,n){return n.options.emphasis||"*"}const En=function(e){if(e==null)return pa;if(typeof e=="function")return Wt(e);if(typeof e=="object")return Array.isArray(e)?da(e):ha(e);if(typeof e=="string")return fa(e);throw new Error("Expected function, string, or object as test")};function da(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=En(e[n]);return Wt(r);function r(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function ha(e){const t=e;return Wt(n);function n(r){const a=r;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function fa(e){return Wt(t);function t(n){return n&&n.type===e}}function Wt(e){return t;function t(n,r,a){return!!(ma(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function pa(){return!0}function ma(e){return e!==null&&typeof e=="object"&&"type"in e}const br=[],ga=!0,un=!1,ya="skip";function va(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const i=En(a),s=r?-1:1;l(e,void 0,[])();function l(u,o,c){const h=u&&typeof u=="object"?u:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(u.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=br,k,C,A;if((!t||i(u,o,c[c.length-1]||void 0))&&(d=ka(n(u,c)),d[0]===un))return d;if("children"in u&&u.children){const x=u;if(x.children&&d[0]!==ya)for(C=(r?x.children.length:-1)+s,A=c.concat(x);C>-1&&C<x.children.length;){const z=x.children[C];if(k=l(z,C,A)(),k[0]===un)return k;C=typeof k[1]=="number"?k[1]:C+s}}return d}}}function ka(e){return Array.isArray(e)?e:typeof e=="number"?[ga,e]:e==null?br:[e]}function ba(e,t,n,r){let a,i,s;typeof t=="function"&&typeof n!="function"?(i=void 0,s=t,a=n):(i=t,s=n,a=r),va(e,i,l,a);function l(u,o){const c=o[o.length-1],h=c?c.children.indexOf(u):void 0;return s(u,h,c)}}const xa={};function In(e,t){const n=xa,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return xr(e,r,a)}function xr(e,t,n){if(wa(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Mn(e.children,t,n)}return Array.isArray(e)?Mn(e,t,n):""}function Mn(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=xr(e[a],t,n);return r.join("")}function wa(e){return!!(e&&typeof e=="object")}function wr(e,t){let n=!1;return ba(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,un}),!!((!e.depth||e.depth<3)&&In(e)&&(t.options.setext||n))}function Ca(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(wr(e,n)){const c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(a===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const s="#".repeat(a),l=n.enter("headingAtx"),u=n.enter("phrasing");i.move(s+" ");let o=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(o)&&(o=Re(o.charCodeAt(0))+o.slice(1)),o=o?s+" "+o:s,n.options.closeAtx&&(o+=" "+s),u(),l(),o}Cr.peek=Sa;function Cr(e){return e.value||""}function Sa(){return"<"}Sr.peek=Ea;function Sr(e,t,n,r){const a=Sn(n),i=a==='"'?"Quote":"Apostrophe",s=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let o=u.move("![");return o+=u.move(n.safe(e.alt,{before:o,after:"]",...u.current()})),o+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),o+=u.move("<"),o+=u.move(n.safe(e.url,{before:o,after:">",...u.current()})),o+=u.move(">")):(l=n.enter("destinationRaw"),o+=u.move(n.safe(e.url,{before:o,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=n.enter(`title${i}`),o+=u.move(" "+a),o+=u.move(n.safe(e.title,{before:o,after:a,...u.current()})),o+=u.move(a),l()),o+=u.move(")"),s(),o}function Ea(){return"!"}Er.peek=Ia;function Er(e,t,n,r){const a=e.referenceType,i=n.enter("imageReference");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const o=n.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(o+"]["),s();const c=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return s(),n.stack=c,i(),a==="full"||!o||o!==h?u+=l.move(h+"]"):a==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function Ia(){return"!"}Ir.peek=$a;function Ir(e,t,n){let r=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const s=n.unsafe[i],l=n.compilePattern(s);let u;if(s.atBreak)for(;u=l.exec(r);){let o=u.index;r.charCodeAt(o)===10&&r.charCodeAt(o-1)===13&&o--,r=r.slice(0,o)+" "+r.slice(u.index+1)}}return a+r+a}function $a(){return"`"}function $r(e,t){const n=In(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Pr.peek=Pa;function Pr(e,t,n,r){const a=Sn(n),i=a==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let l,u;if($r(e,n)){const c=n.stack;n.stack=[],l=n.enter("autolink");let h=s.move("<");return h+=s.move(n.containerPhrasing(e,{before:h,after:">",...s.current()})),h+=s.move(">"),l(),n.stack=c,h}l=n.enter("link"),u=n.enter("label");let o=s.move("[");return o+=s.move(n.containerPhrasing(e,{before:o,after:"](",...s.current()})),o+=s.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),o+=s.move("<"),o+=s.move(n.safe(e.url,{before:o,after:">",...s.current()})),o+=s.move(">")):(u=n.enter("destinationRaw"),o+=s.move(n.safe(e.url,{before:o,after:e.title?" ":")",...s.current()}))),u(),e.title&&(u=n.enter(`title${i}`),o+=s.move(" "+a),o+=s.move(n.safe(e.title,{before:o,after:a,...s.current()})),o+=s.move(a),u()),o+=s.move(")"),l(),o}function Pa(e,t,n){return $r(e,n)?"<":"["}Dr.peek=Da;function Dr(e,t,n,r){const a=e.referenceType,i=n.enter("linkReference");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const o=n.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(o+"]["),s();const c=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return s(),n.stack=c,i(),a==="full"||!o||o!==h?u+=l.move(h+"]"):a==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function Da(){return"["}function $n(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Oa(e){const t=$n(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function _a(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Or(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Ta(e,t,n,r){const a=n.enter("list"),i=n.bulletCurrent;let s=e.ordered?_a(n):$n(n);const l=e.ordered?s==="."?")":".":Oa(n);let u=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),Or(n)===s&&c){let h=-1;for(;++h<e.children.length;){const f=e.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=l),n.bulletCurrent=s;const o=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=i,a(),o}function Aa(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Fa(e,t,n,r){const a=Aa(n);let i=n.bulletCurrent||$n(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(s-i.length)),l.shift(s);const u=n.enter("listItem"),o=n.indentLines(n.containerFlow(e,l.current()),c);return u(),o;function c(h,f,d){return f?(d?"":" ".repeat(s))+h:(d?i:i+" ".repeat(s-i.length))+h}}function La(e,t,n,r){const a=n.enter("paragraph"),i=n.enter("phrasing"),s=n.containerPhrasing(e,r);return i(),a(),s}const Va=En(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function za(e,t,n,r){return(e.children.some(function(s){return Va(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Ba(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}_r.peek=Na;function _r(e,t,n,r){const a=Ba(n),i=n.enter("strong"),s=n.createTracker(r),l=s.move(a+a);let u=s.move(n.containerPhrasing(e,{after:a,before:l,...s.current()}));const o=u.charCodeAt(0),c=zt(r.before.charCodeAt(r.before.length-1),o,a);c.inside&&(u=Re(o)+u.slice(1));const h=u.charCodeAt(u.length-1),f=zt(r.after.charCodeAt(0),h,a);f.inside&&(u=u.slice(0,-1)+Re(h));const d=s.move(a+a);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},l+u+d}function Na(e,t,n){return n.options.strong||"*"}function Ma(e,t,n,r){return n.safe(e.value,r)}function ja(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Ua(e,t,n){const r=(Or(n)+(n.options.ruleSpaces?" ":"")).repeat(ja(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Ra={blockquote:Xi,break:Nn,code:ta,definition:ra,emphasis:kr,hardBreak:Nn,heading:Ca,html:Cr,image:Sr,imageReference:Er,inlineCode:Ir,link:Pr,linkReference:Dr,list:Ta,listItem:Fa,paragraph:La,root:za,strong:_r,text:Ma,thematicBreak:Ua},Ha=[qa];function qa(e,t,n,r){if(t.type==="code"&&sn(t,r)&&(e.type==="list"||e.type===t.type&&sn(e,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return e.type==="paragraph"&&(e.type===t.type||t.type==="definition"||t.type==="heading"&&wr(t,r))?void 0:n.spread?1:0}const Je=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Ka=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Je},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Je},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Je},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Je},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Je},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Je},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Je},{atBreak:!0,character:"~"}],jn=document.createElement("i");function Pn(e){const t="&"+e+";";jn.innerHTML=t;const n=jn.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Tr(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}const Wa=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ar(e){return e.replace(Wa,Ja)}function Ja(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),i=a===120||a===88;return Tr(n.slice(i?2:1),i?16:10)}return Pn(n)||e}function Qa(e){return e.label||!e.identifier?e.label||"":Ar(e.identifier)}function Ya(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function Xa(e,t,n){const r=t.indexStack,a=e.children||[],i=[];let s=-1,l=n.before,u;r.push(-1);let o=t.createTracker(n);for(;++s<a.length;){const c=a[s];let h;if(r[r.length-1]=s,s+1<a.length){let k=t.handle.handlers[a[s+1].type];k&&k.peek&&(k=k.peek),h=k?k(a[s+1],e,t,{before:"",after:"",...o.current()}).charAt(0):""}else h=n.after;i.length>0&&(l==="\r"||l===`
`)&&c.type==="html"&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),l=" ",o=t.createTracker(n),o.move(i.join("")));let f=t.handle(c,e,t,{...o.current(),after:h,before:l});u&&u===f.slice(0,1)&&(f=Re(u.charCodeAt(0))+f.slice(1));const d=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,u=void 0,d&&(i.length>0&&d.before&&l===i[i.length-1].slice(-1)&&(i[i.length-1]=i[i.length-1].slice(0,-1)+Re(l.charCodeAt(0))),d.after&&(u=h)),o.move(f),i.push(f),l=f.slice(-1)}return r.pop(),i.join("")}function Za(e,t,n){const r=t.indexStack,a=e.children||[],i=t.createTracker(n),s=[];let l=-1;for(r.push(-1);++l<a.length;){const u=a[l];r[r.length-1]=l,s.push(i.move(t.handle(u,e,t,{before:`
`,after:`
`,...i.current()}))),u.type!=="list"&&(t.bulletLastUsed=void 0),l<a.length-1&&s.push(i.move(Ga(u,a[l+1],e,t)))}return r.pop(),s.join("")}function Ga(e,t,n,r){let a=r.join.length;for(;a--;){const i=r.join[a](e,t,n,r);if(i===!0||i===1)break;if(typeof i=="number")return`
`.repeat(1+i);if(i===!1)return`

<!---->

`}return`

`}const es=/\r?\n|\r/g;function ts(e,t){const n=[];let r=0,a=0,i;for(;i=es.exec(e);)s(e.slice(r,i.index)),n.push(i[0]),r=i.index+i[0].length,a++;return s(e.slice(r)),n.join("");function s(l){n.push(t(l,a,!l))}}function ns(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),a=[],i=[],s={};let l=-1;for(;++l<e.unsafe.length;){const c=e.unsafe[l];if(!vr(e.stack,c))continue;const h=e.compilePattern(c);let f;for(;f=h.exec(r);){const d="before"in c||!!c.atBreak,k="after"in c,C=f.index+(d?f[1].length:0);a.includes(C)?(s[C].before&&!d&&(s[C].before=!1),s[C].after&&!k&&(s[C].after=!1)):(a.push(C),s[C]={before:d,after:k})}}a.sort(rs);let u=n.before?n.before.length:0;const o=r.length-(n.after?n.after.length:0);for(l=-1;++l<a.length;){const c=a[l];c<u||c>=o||c+1<o&&a[l+1]===c+1&&s[c].after&&!s[c+1].before&&!s[c+1].after||a[l-1]===c-1&&s[c].before&&!s[c-1].before&&!s[c-1].after||(u!==c&&i.push(Un(r.slice(u,c),"\\")),u=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!n.encode||!n.encode.includes(r.charAt(c)))?i.push("\\"):(i.push(Re(r.charCodeAt(c))),u++))}return i.push(Un(r.slice(u,o),n.after)),i.join("")}function rs(e,t){return e-t}function Un(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],a=[],i=e+t;let s=-1,l=0,u;for(;u=n.exec(i);)r.push(u.index);for(;++s<r.length;)l!==r[s]&&a.push(e.slice(l,r[s])),a.push("\\"),l=r[s];return a.push(e.slice(l)),a.join("")}function is(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,a=n.line||1,i=n.column||1;return{move:u,current:s,shift:l};function s(){return{now:{line:a,column:i},lineShift:r}}function l(o){r+=o}function u(o){const c=o||"",h=c.split(/\r?\n|\r/g),f=h[h.length-1];return a+=h.length-1,i=h.length===1?i+f.length:1+f.length+r,c}}function as(e,t){const n={},r={associationId:Qa,containerPhrasing:us,containerFlow:cs,createTracker:is,compilePattern:Ya,enter:i,handlers:{...Ra},handle:void 0,indentLines:ts,indexStack:[],join:[...Ha],options:{},safe:ds,stack:[],unsafe:[...Ka]};yr(r,n),r.options.tightDefinitions&&r.join.push(os),r.handle=Ji("type",{invalid:ss,unknown:ls,handlers:r.handlers});let a=r.handle(e,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function i(s){return r.stack.push(s),l;function l(){r.stack.pop()}}}function ss(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function ls(e){const t=e;throw new Error("Cannot handle unknown node `"+t.type+"`")}function os(e,t){if(e.type==="definition"&&e.type===t.type)return 0}function us(e,t){return Xa(e,this,t)}function cs(e,t){return Za(e,this,t)}function ds(e,t){return ns(this,e,t)}function Ae(e,t,n,r){const a=e.length;let i=0,s;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function Ce(e,t){return e.length>0?(Ae(e,e.length,0,t),e):t}const Rn={}.hasOwnProperty;function hs(e){const t={};let n=-1;for(;++n<e.length;)fs(t,e[n]);return t}function fs(e,t){let n;for(n in t){const a=(Rn.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){Rn.call(a,s)||(a[s]=[]);const l=i[s];ps(a[s],Array.isArray(l)?l:l?[l]:[])}}}function ps(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ae(e,0,0,r)}function ot(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function ae(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(u){return G(u)?(e.enter(n),l(u)):t(u)}function l(u){return G(u)&&i++<a?(e.consume(u),l):(e.exit(n),t(u))}}const ms={tokenize:gs};function gs(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ae(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return R(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),s)}}const ys={tokenize:vs},Hn={tokenize:ks};function vs(e){const t=this,n=[];let r=0,a,i,s;return l;function l(T){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,u,o)(T)}return o(T)}function u(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&z();const j=t.events.length;let Q=j,w;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){w=t.events[Q][1].end;break}x(r);let W=j;for(;W<t.events.length;)t.events[W][1].end={...w},W++;return Ae(t.events,Q+1,0,t.events.slice(j)),t.events.length=W,o(T)}return l(T)}function o(T){if(r===n.length){if(!a)return f(T);if(a.currentConstruct&&a.currentConstruct.concrete)return k(T);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hn,c,h)(T)}function c(T){return a&&z(),x(r),f(T)}function h(T){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,k(T)}function f(T){return t.containerState={},e.attempt(Hn,d,k)(T)}function d(T){return r++,n.push([t.currentConstruct,t.containerState]),f(T)}function k(T){if(T===null){a&&z(),x(0),e.consume(T);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),C(T)}function C(T){if(T===null){A(e.exit("chunkFlow"),!0),x(0),e.consume(T);return}return R(T)?(e.consume(T),A(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(T),C)}function A(T,j){const Q=t.sliceStream(T);if(j&&Q.push(null),T.previous=i,i&&(i.next=T),i=T,a.defineSkip(T.start),a.write(Q),t.parser.lazy[T.start.line]){let w=a.events.length;for(;w--;)if(a.events[w][1].start.offset<s&&(!a.events[w][1].end||a.events[w][1].end.offset>s))return;const W=t.events.length;let Y=W,X,te;for(;Y--;)if(t.events[Y][0]==="exit"&&t.events[Y][1].type==="chunkFlow"){if(X){te=t.events[Y][1].end;break}X=!0}for(x(r),w=W;w<t.events.length;)t.events[w][1].end={...te},w++;Ae(t.events,Y+1,0,t.events.slice(W)),t.events.length=w}}function x(T){let j=n.length;for(;j-- >T;){const Q=n[j];t.containerState=Q[1],Q[0].exit.call(t,e)}n.length=T}function z(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function ks(e,t,n){return ae(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Dn(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const cn={name:"attention",resolveAll:bs,tokenize:xs};function bs(e,t){let n=-1,r,a,i,s,l,u,o,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};qn(h,-u),qn(f,u),s={type:u>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},i={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:u>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},e[r][1].end={...s.start},e[n][1].start={...l.end},o=[],e[r][1].end.offset-e[r][1].start.offset&&(o=Ce(o,[["enter",e[r][1],t],["exit",e[r][1],t]])),o=Ce(o,[["enter",a,t],["enter",s,t],["exit",s,t],["enter",i,t]]),o=Ce(o,Dn(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),o=Ce(o,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,o=Ce(o,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ae(e,r-1,n-r+3,o),n=r+o.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function xs(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Vt(r);let i;return s;function s(u){return i=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===i)return e.consume(u),l;const o=e.exit("attentionSequence"),c=Vt(u),h=!c||c===2&&a||n.includes(u),f=!a||a===2&&c||n.includes(r);return o._open=!!(i===42?h:h&&(a||!f)),o._close=!!(i===42?f:f&&(c||!h)),t(u)}}function qn(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ws={name:"autolink",tokenize:Cs};function Cs(e,t,n){let r=0;return a;function a(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(d){return Oe(d)?(e.consume(d),s):d===64?n(d):o(d)}function s(d){return d===43||d===45||d===46||Ie(d)?(r=1,l(d)):o(d)}function l(d){return d===58?(e.consume(d),r=0,u):(d===43||d===45||d===46||Ie(d))&&r++<32?(e.consume(d),l):(r=0,o(d))}function u(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||ln(d)?n(d):(e.consume(d),u)}function o(d){return d===64?(e.consume(d),c):aa(d)?(e.consume(d),o):n(d)}function c(d){return Ie(d)?h(d):n(d)}function h(d){return d===46?(e.consume(d),r=0,c):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):f(d)}function f(d){if((d===45||Ie(d))&&r++<63){const k=d===45?f:h;return e.consume(d),k}return n(d)}}const Jt={partial:!0,tokenize:Ss};function Ss(e,t,n){return r;function r(i){return G(i)?ae(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||R(i)?t(i):n(i)}}const Fr={continuation:{tokenize:Is},exit:$s,name:"blockQuote",tokenize:Es};function Es(e,t,n){const r=this;return a;function a(s){if(s===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return n(s)}function i(s){return G(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Is(e,t,n){const r=this;return a;function a(s){return G(s)?ae(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(Fr,t,n)(s)}}function $s(e){e.exit("blockQuote")}const Lr={name:"characterEscape",tokenize:Ps};function Ps(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return la(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Vr={name:"characterReference",tokenize:Ds};function Ds(e,t,n){const r=this;let a=0,i,s;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),u}function u(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),o):(e.enter("characterReferenceValue"),i=31,s=Ie,c(h))}function o(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=sa,c):(e.enter("characterReferenceValue"),i=7,s=on,c(h))}function c(h){if(h===59&&a){const f=e.exit("characterReferenceValue");return s===Ie&&!Pn(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(h)&&a++<i?(e.consume(h),c):n(h)}}const Kn={partial:!0,tokenize:_s},Wn={concrete:!0,name:"codeFenced",tokenize:Os};function Os(e,t,n){const r=this,a={partial:!0,tokenize:Q};let i=0,s=0,l;return u;function u(w){return o(w)}function o(w){const W=r.events[r.events.length-1];return i=W&&W[1].type==="linePrefix"?W[2].sliceSerialize(W[1],!0).length:0,l=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===l?(s++,e.consume(w),c):s<3?n(w):(e.exit("codeFencedFenceSequence"),G(w)?ae(e,h,"whitespace")(w):h(w))}function h(w){return w===null||R(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(Kn,C,j)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||R(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(w)):G(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ae(e,d,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),f)}function d(w){return w===null||R(w)?h(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),k(w))}function k(w){return w===null||R(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(w)):w===96&&w===l?n(w):(e.consume(w),k)}function C(w){return e.attempt(a,j,A)(w)}function A(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),x}function x(w){return i>0&&G(w)?ae(e,z,"linePrefix",i+1)(w):z(w)}function z(w){return w===null||R(w)?e.check(Kn,C,j)(w):(e.enter("codeFlowValue"),T(w))}function T(w){return w===null||R(w)?(e.exit("codeFlowValue"),z(w)):(e.consume(w),T)}function j(w){return e.exit("codeFenced"),t(w)}function Q(w,W,Y){let X=0;return te;function te(B){return w.enter("lineEnding"),w.consume(B),w.exit("lineEnding"),V}function V(B){return w.enter("codeFencedFence"),G(B)?ae(w,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):S(B)}function S(B){return B===l?(w.enter("codeFencedFenceSequence"),D(B)):Y(B)}function D(B){return B===l?(X++,w.consume(B),D):X>=s?(w.exit("codeFencedFenceSequence"),G(B)?ae(w,O,"whitespace")(B):O(B)):Y(B)}function O(B){return B===null||R(B)?(w.exit("codeFencedFence"),W(B)):Y(B)}}}function _s(e,t,n){const r=this;return a;function a(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const Yt={name:"codeIndented",tokenize:As},Ts={partial:!0,tokenize:Fs};function As(e,t,n){const r=this;return a;function a(o){return e.enter("codeIndented"),ae(e,i,"linePrefix",5)(o)}function i(o){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(o):n(o)}function s(o){return o===null?u(o):R(o)?e.attempt(Ts,s,u)(o):(e.enter("codeFlowValue"),l(o))}function l(o){return o===null||R(o)?(e.exit("codeFlowValue"),s(o)):(e.consume(o),l)}function u(o){return e.exit("codeIndented"),t(o)}}function Fs(e,t,n){const r=this;return a;function a(s){return r.parser.lazy[r.now().line]?n(s):R(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):ae(e,i,"linePrefix",5)(s)}function i(s){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):R(s)?a(s):n(s)}}const Ls={name:"codeText",previous:zs,resolve:Vs,tokenize:Bs};function Vs(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function zs(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Bs(e,t,n){let r=0,a,i;return s;function s(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),u):h===96?(i=e.enter("codeTextSequence"),a=0,c(h)):R(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("codeTextData"),o(h))}function o(h){return h===null||h===32||h===96||R(h)?(e.exit("codeTextData"),u(h)):(e.consume(h),o)}function c(h){return h===96?(e.consume(h),a++,c):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",o(h))}}class Ns{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&yt(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),yt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),yt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);yt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);yt(this.left,n.reverse())}}}function yt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function zr(e){const t={};let n=-1,r,a,i,s,l,u,o;const c=new Ns(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Ms(c,n)),n=t[n],o=!0);else if(r[1]._container){for(i=n,a=void 0;i--;)if(s=c.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(a&&(c.get(a)[1].type="lineEndingBlank"),s[1].type="lineEnding",a=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;a&&(r[1].end={...c.get(a)[1].start},l=c.slice(a,n),l.unshift(r),c.splice(a,n-a+1,l))}}return Ae(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!o}function Ms(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const i=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,u=[],o={};let c,h,f=-1,d=n,k=0,C=0;const A=[C];for(;d;){for(;e.get(++a)[1]!==d;);i.push(a),d._tokenizer||(c=r.sliceStream(d),d.next||c.push(null),h&&s.defineSkip(d.start),d._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),d._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(C=f+1,A.push(C),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(s.events=[],d?(d._tokenizer=void 0,d.previous=void 0):A.pop(),f=A.length;f--;){const x=l.slice(A[f],A[f+1]),z=i.pop();u.push([z,z+x.length-1]),e.splice(z,2,x)}for(u.reverse(),f=-1;++f<u.length;)o[k+u[f][0]]=k+u[f][1],k+=u[f][1]-u[f][0]-1;return o}const js={resolve:Rs,tokenize:Hs},Us={partial:!0,tokenize:qs};function Rs(e){return zr(e),e}function Hs(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):R(l)?e.check(Us,s,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function s(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function qs(e,t,n){const r=this;return a;function a(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),ae(e,i,"linePrefix")}function i(s){if(s===null||R(s))return n(s);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Br(e,t,n,r,a,i,s,l,u){const o=u||Number.POSITIVE_INFINITY;let c=0;return h;function h(x){return x===60?(e.enter(r),e.enter(a),e.enter(i),e.consume(x),e.exit(i),f):x===null||x===32||x===41||ln(x)?n(x):(e.enter(r),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),C(x))}function f(x){return x===62?(e.enter(i),e.consume(x),e.exit(i),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===62?(e.exit("chunkString"),e.exit(l),f(x)):x===null||x===60||R(x)?n(x):(e.consume(x),x===92?k:d)}function k(x){return x===60||x===62||x===92?(e.consume(x),d):d(x)}function C(x){return!c&&(x===null||x===41||ge(x))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(r),t(x)):c<o&&x===40?(e.consume(x),c++,C):x===41?(e.consume(x),c--,C):x===null||x===32||x===40||ln(x)?n(x):(e.consume(x),x===92?A:C)}function A(x){return x===40||x===41||x===92?(e.consume(x),C):C(x)}}function Nr(e,t,n,r,a,i){const s=this;let l=0,u;return o;function o(d){return e.enter(r),e.enter(a),e.consume(d),e.exit(a),e.enter(i),c}function c(d){return l>999||d===null||d===91||d===93&&!u||d===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(d):d===93?(e.exit(i),e.enter(a),e.consume(d),e.exit(a),e.exit(r),t):R(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||R(d)||l++>999?(e.exit("chunkString"),c(d)):(e.consume(d),u||(u=!G(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(e.consume(d),l++,h):h(d)}}function Mr(e,t,n,r,a,i){let s;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(a),e.consume(f),e.exit(a),s=f===40?41:f,u):n(f)}function u(f){return f===s?(e.enter(a),e.consume(f),e.exit(a),e.exit(r),t):(e.enter(i),o(f))}function o(f){return f===s?(e.exit(i),u(s)):f===null?n(f):R(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),ae(e,o,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===s||f===null||R(f)?(e.exit("chunkString"),o(f)):(e.consume(f),f===92?h:c)}function h(f){return f===s||f===92?(e.consume(f),c):c(f)}}function Ct(e,t){let n;return r;function r(a){return R(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):G(a)?ae(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const Ks={name:"definition",tokenize:Js},Ws={partial:!0,tokenize:Qs};function Js(e,t,n){const r=this;let a;return i;function i(d){return e.enter("definition"),s(d)}function s(d){return Nr.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function l(d){return a=ot(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),u):n(d)}function u(d){return ge(d)?Ct(e,o)(d):o(d)}function o(d){return Br(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function c(d){return e.attempt(Ws,h,h)(d)}function h(d){return G(d)?ae(e,f,"whitespace")(d):f(d)}function f(d){return d===null||R(d)?(e.exit("definition"),r.parser.defined.push(a),t(d)):n(d)}}function Qs(e,t,n){return r;function r(l){return ge(l)?Ct(e,a)(l):n(l)}function a(l){return Mr(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return G(l)?ae(e,s,"whitespace")(l):s(l)}function s(l){return l===null||R(l)?t(l):n(l)}}const Ys={name:"hardBreakEscape",tokenize:Xs};function Xs(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return R(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const Zs={name:"headingAtx",resolve:Gs,tokenize:el};function Gs(e,t){let n=e.length-2,r=3,a,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ae(e,r,n-r+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function el(e,t,n){let r=0;return a;function a(c){return e.enter("atxHeading"),i(c)}function i(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||ge(c)?(e.exit("atxHeadingSequence"),l(c)):n(c)}function l(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||R(c)?(e.exit("atxHeading"),t(c)):G(c)?ae(e,l,"whitespace")(c):(e.enter("atxHeadingText"),o(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),l(c))}function o(c){return c===null||c===35||ge(c)?(e.exit("atxHeadingText"),l(c)):(e.consume(c),o)}}const tl=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Jn=["pre","script","style","textarea"],nl={concrete:!0,name:"htmlFlow",resolveTo:al,tokenize:sl},rl={partial:!0,tokenize:ol},il={partial:!0,tokenize:ll};function al(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function sl(e,t,n){const r=this;let a,i,s,l,u;return o;function o(p){return c(p)}function c(p){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(p),h}function h(p){return p===33?(e.consume(p),f):p===47?(e.consume(p),i=!0,C):p===63?(e.consume(p),a=3,r.interrupt?t:g):Oe(p)?(e.consume(p),s=String.fromCharCode(p),A):n(p)}function f(p){return p===45?(e.consume(p),a=2,d):p===91?(e.consume(p),a=5,l=0,k):Oe(p)?(e.consume(p),a=4,r.interrupt?t:g):n(p)}function d(p){return p===45?(e.consume(p),r.interrupt?t:g):n(p)}function k(p){const re="CDATA[";return p===re.charCodeAt(l++)?(e.consume(p),l===re.length?r.interrupt?t:S:k):n(p)}function C(p){return Oe(p)?(e.consume(p),s=String.fromCharCode(p),A):n(p)}function A(p){if(p===null||p===47||p===62||ge(p)){const re=p===47,de=s.toLowerCase();return!re&&!i&&Jn.includes(de)?(a=1,r.interrupt?t(p):S(p)):tl.includes(s.toLowerCase())?(a=6,re?(e.consume(p),x):r.interrupt?t(p):S(p)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(p):i?z(p):T(p))}return p===45||Ie(p)?(e.consume(p),s+=String.fromCharCode(p),A):n(p)}function x(p){return p===62?(e.consume(p),r.interrupt?t:S):n(p)}function z(p){return G(p)?(e.consume(p),z):te(p)}function T(p){return p===47?(e.consume(p),te):p===58||p===95||Oe(p)?(e.consume(p),j):G(p)?(e.consume(p),T):te(p)}function j(p){return p===45||p===46||p===58||p===95||Ie(p)?(e.consume(p),j):Q(p)}function Q(p){return p===61?(e.consume(p),w):G(p)?(e.consume(p),Q):T(p)}function w(p){return p===null||p===60||p===61||p===62||p===96?n(p):p===34||p===39?(e.consume(p),u=p,W):G(p)?(e.consume(p),w):Y(p)}function W(p){return p===u?(e.consume(p),u=null,X):p===null||R(p)?n(p):(e.consume(p),W)}function Y(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||ge(p)?Q(p):(e.consume(p),Y)}function X(p){return p===47||p===62||G(p)?T(p):n(p)}function te(p){return p===62?(e.consume(p),V):n(p)}function V(p){return p===null||R(p)?S(p):G(p)?(e.consume(p),V):n(p)}function S(p){return p===45&&a===2?(e.consume(p),ne):p===60&&a===1?(e.consume(p),Z):p===62&&a===4?(e.consume(p),fe):p===63&&a===3?(e.consume(p),g):p===93&&a===5?(e.consume(p),pe):R(p)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(rl,K,D)(p)):p===null||R(p)?(e.exit("htmlFlowData"),D(p)):(e.consume(p),S)}function D(p){return e.check(il,O,K)(p)}function O(p){return e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),B}function B(p){return p===null||R(p)?D(p):(e.enter("htmlFlowData"),S(p))}function ne(p){return p===45?(e.consume(p),g):S(p)}function Z(p){return p===47?(e.consume(p),s="",oe):S(p)}function oe(p){if(p===62){const re=s.toLowerCase();return Jn.includes(re)?(e.consume(p),fe):S(p)}return Oe(p)&&s.length<8?(e.consume(p),s+=String.fromCharCode(p),oe):S(p)}function pe(p){return p===93?(e.consume(p),g):S(p)}function g(p){return p===62?(e.consume(p),fe):p===45&&a===2?(e.consume(p),g):S(p)}function fe(p){return p===null||R(p)?(e.exit("htmlFlowData"),K(p)):(e.consume(p),fe)}function K(p){return e.exit("htmlFlow"),t(p)}}function ll(e,t,n){const r=this;return a;function a(s){return R(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):n(s)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function ol(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Jt,t,n)}}const ul={name:"htmlText",tokenize:cl};function cl(e,t,n){const r=this;let a,i,s;return l;function l(g){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(g),u}function u(g){return g===33?(e.consume(g),o):g===47?(e.consume(g),Q):g===63?(e.consume(g),T):Oe(g)?(e.consume(g),Y):n(g)}function o(g){return g===45?(e.consume(g),c):g===91?(e.consume(g),i=0,k):Oe(g)?(e.consume(g),z):n(g)}function c(g){return g===45?(e.consume(g),d):n(g)}function h(g){return g===null?n(g):g===45?(e.consume(g),f):R(g)?(s=h,Z(g)):(e.consume(g),h)}function f(g){return g===45?(e.consume(g),d):h(g)}function d(g){return g===62?ne(g):g===45?f(g):h(g)}function k(g){const fe="CDATA[";return g===fe.charCodeAt(i++)?(e.consume(g),i===fe.length?C:k):n(g)}function C(g){return g===null?n(g):g===93?(e.consume(g),A):R(g)?(s=C,Z(g)):(e.consume(g),C)}function A(g){return g===93?(e.consume(g),x):C(g)}function x(g){return g===62?ne(g):g===93?(e.consume(g),x):C(g)}function z(g){return g===null||g===62?ne(g):R(g)?(s=z,Z(g)):(e.consume(g),z)}function T(g){return g===null?n(g):g===63?(e.consume(g),j):R(g)?(s=T,Z(g)):(e.consume(g),T)}function j(g){return g===62?ne(g):T(g)}function Q(g){return Oe(g)?(e.consume(g),w):n(g)}function w(g){return g===45||Ie(g)?(e.consume(g),w):W(g)}function W(g){return R(g)?(s=W,Z(g)):G(g)?(e.consume(g),W):ne(g)}function Y(g){return g===45||Ie(g)?(e.consume(g),Y):g===47||g===62||ge(g)?X(g):n(g)}function X(g){return g===47?(e.consume(g),ne):g===58||g===95||Oe(g)?(e.consume(g),te):R(g)?(s=X,Z(g)):G(g)?(e.consume(g),X):ne(g)}function te(g){return g===45||g===46||g===58||g===95||Ie(g)?(e.consume(g),te):V(g)}function V(g){return g===61?(e.consume(g),S):R(g)?(s=V,Z(g)):G(g)?(e.consume(g),V):X(g)}function S(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(e.consume(g),a=g,D):R(g)?(s=S,Z(g)):G(g)?(e.consume(g),S):(e.consume(g),O)}function D(g){return g===a?(e.consume(g),a=void 0,B):g===null?n(g):R(g)?(s=D,Z(g)):(e.consume(g),D)}function O(g){return g===null||g===34||g===39||g===60||g===61||g===96?n(g):g===47||g===62||ge(g)?X(g):(e.consume(g),O)}function B(g){return g===47||g===62||ge(g)?X(g):n(g)}function ne(g){return g===62?(e.consume(g),e.exit("htmlTextData"),e.exit("htmlText"),t):n(g)}function Z(g){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),oe}function oe(g){return G(g)?ae(e,pe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):pe(g)}function pe(g){return e.enter("htmlTextData"),s(g)}}const On={name:"labelEnd",resolveAll:pl,resolveTo:ml,tokenize:gl},dl={tokenize:yl},hl={tokenize:vl},fl={tokenize:kl};function pl(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&Ae(e,0,e.length,n),e}function ml(e,t){let n=e.length,r=0,a,i,s,l;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(s=n);const u={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},o={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},c={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[s-2][1].start}};return l=[["enter",u,t],["enter",o,t]],l=Ce(l,e.slice(i+1,i+r+3)),l=Ce(l,[["enter",c,t]]),l=Ce(l,Dn(t.parser.constructs.insideSpan.null,e.slice(i+r+4,s-3),t)),l=Ce(l,[["exit",c,t],e[s-2],e[s-1],["exit",o,t]]),l=Ce(l,e.slice(s+1)),l=Ce(l,[["exit",u,t]]),Ae(e,i,e.length,l),e}function gl(e,t,n){const r=this;let a=r.events.length,i,s;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){i=r.events[a][1];break}return l;function l(f){return i?i._inactive?h(f):(s=r.parser.defined.includes(ot(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),u):n(f)}function u(f){return f===40?e.attempt(dl,c,s?c:h)(f):f===91?e.attempt(hl,c,s?o:h)(f):s?c(f):h(f)}function o(f){return e.attempt(fl,c,h)(f)}function c(f){return t(f)}function h(f){return i._balanced=!0,n(f)}}function yl(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),a}function a(h){return ge(h)?Ct(e,i)(h):i(h)}function i(h){return h===41?c(h):Br(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return ge(h)?Ct(e,u)(h):c(h)}function l(h){return n(h)}function u(h){return h===34||h===39||h===40?Mr(e,o,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function o(h){return ge(h)?Ct(e,c)(h):c(h)}function c(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function vl(e,t,n){const r=this;return a;function a(l){return Nr.call(r,e,i,s,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(ot(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function s(l){return n(l)}}function kl(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const bl={name:"labelStartImage",resolveAll:On.resolveAll,tokenize:xl};function xl(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):n(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const wl={name:"labelStartLink",resolveAll:On.resolveAll,tokenize:Cl};function Cl(e,t,n){const r=this;return a;function a(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const Xt={name:"lineEnding",tokenize:Sl};function Sl(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ae(e,t,"linePrefix")}}const Tt={name:"thematicBreak",tokenize:El};function El(e,t,n){let r=0,a;return i;function i(o){return e.enter("thematicBreak"),s(o)}function s(o){return a=o,l(o)}function l(o){return o===a?(e.enter("thematicBreakSequence"),u(o)):r>=3&&(o===null||R(o))?(e.exit("thematicBreak"),t(o)):n(o)}function u(o){return o===a?(e.consume(o),r++,u):(e.exit("thematicBreakSequence"),G(o)?ae(e,l,"whitespace")(o):l(o))}}const me={continuation:{tokenize:Dl},exit:_l,name:"list",tokenize:Pl},Il={partial:!0,tokenize:Tl},$l={partial:!0,tokenize:Ol};function Pl(e,t,n){const r=this,a=r.events[r.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0;return l;function l(d){const k=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:on(d)){if(r.containerState.type||(r.containerState.type=k,e.enter(k,{_container:!0})),k==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(Tt,n,o)(d):o(d);if(!r.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(d)}return n(d)}function u(d){return on(d)&&++s<10?(e.consume(d),u):(!r.interrupt||s<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),o(d)):n(d)}function o(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,e.check(Jt,r.interrupt?n:c,e.attempt(Il,f,h))}function c(d){return r.containerState.initialBlankLine=!0,i++,f(d)}function h(d){return G(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function Dl(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Jt,a,i);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ae(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!G(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt($l,t,s)(l))}function s(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,ae(e,e.attempt(me,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Ol(e,t,n){const r=this;return ae(e,a,"listItemIndent",r.containerState.size+1);function a(i){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(i):n(i)}}function _l(e){e.exit(this.containerState.type)}function Tl(e,t,n){const r=this;return ae(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const s=r.events[r.events.length-1];return!G(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Qn={name:"setextUnderline",resolveTo:Al,tokenize:Fl};function Al(e,t){let n=e.length,r,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",s,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function Fl(e,t,n){const r=this;let a;return i;function i(o){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),a=o,s(o)):n(o)}function s(o){return e.enter("setextHeadingLineSequence"),l(o)}function l(o){return o===a?(e.consume(o),l):(e.exit("setextHeadingLineSequence"),G(o)?ae(e,u,"lineSuffix")(o):u(o))}function u(o){return o===null||R(o)?(e.exit("setextHeadingLine"),t(o)):n(o)}}const Ll={tokenize:Vl};function Vl(e){const t=this,n=e.attempt(Jt,r,e.attempt(this.parser.constructs.flowInitial,a,ae(e,e.attempt(this.parser.constructs.flow,a,e.attempt(js,a)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const zl={resolveAll:Ur()},Bl=jr("string"),Nl=jr("text");function jr(e){return{resolveAll:Ur(e==="text"?Ml:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],i=n.attempt(a,s,l);return s;function s(c){return o(c)?i(c):l(c)}function l(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return o(c)?(n.exit("data"),i(c)):(n.consume(c),u)}function o(c){if(c===null)return!0;const h=a[c];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function Ur(e){return t;function t(n,r){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,r):n}}function Ml(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let i=a.length,s=-1,l=0,u;for(;i--;){const o=a[i];if(typeof o=="string"){for(s=o.length;o.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(o===-2)u=!0,l++;else if(o!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const o={type:n===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:r.start._bufferIndex+s,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...o.start},r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}const jl={42:me,43:me,45:me,48:me,49:me,50:me,51:me,52:me,53:me,54:me,55:me,56:me,57:me,62:Fr},Ul={91:Ks},Rl={[-2]:Yt,[-1]:Yt,32:Yt},Hl={35:Zs,42:Tt,45:[Qn,Tt],60:nl,61:Qn,95:Tt,96:Wn,126:Wn},ql={38:Vr,92:Lr},Kl={[-5]:Xt,[-4]:Xt,[-3]:Xt,33:bl,38:Vr,42:cn,60:[ws,ul],91:wl,92:[Ys,Lr],93:On,95:cn,96:Ls},Wl={null:[cn,zl]},Jl={null:[42,95]},Ql={null:[]},Yl=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Jl,contentInitial:Ul,disable:Ql,document:jl,flow:Hl,flowInitial:Rl,insideSpan:Wl,string:ql,text:Kl},Symbol.toStringTag,{value:"Module"}));function Xl(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},i=[];let s=[],l=[];const u={attempt:W(Q),check:W(w),consume:z,enter:T,exit:j,interrupt:W(w,{interrupt:!0})},o={code:null,containerState:{},defineSkip:C,events:[],now:k,parser:e,previous:null,sliceSerialize:f,sliceStream:d,write:h};let c=t.tokenize.call(o,u);return t.resolveAll&&i.push(t),o;function h(V){return s=Ce(s,V),A(),s[s.length-1]!==null?[]:(Y(t,0),o.events=Dn(i,o.events,o),o.events)}function f(V,S){return Gl(d(V),S)}function d(V){return Zl(s,V)}function k(){const{_bufferIndex:V,_index:S,line:D,column:O,offset:B}=r;return{_bufferIndex:V,_index:S,line:D,column:O,offset:B}}function C(V){a[V.line]=V.column,te()}function A(){let V;for(;r._index<s.length;){const S=s[r._index];if(typeof S=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<S.length;)x(S.charCodeAt(r._bufferIndex));else x(S)}}function x(V){c=c(V)}function z(V){R(V)?(r.line++,r.column=1,r.offset+=V===-3?2:1,te()):V!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),o.previous=V}function T(V,S){const D=S||{};return D.type=V,D.start=k(),o.events.push(["enter",D,o]),l.push(D),D}function j(V){const S=l.pop();return S.end=k(),o.events.push(["exit",S,o]),S}function Q(V,S){Y(V,S.from)}function w(V,S){S.restore()}function W(V,S){return D;function D(O,B,ne){let Z,oe,pe,g;return Array.isArray(O)?K(O):"tokenize"in O?K([O]):fe(O);function fe(se){return Pe;function Pe(Be){const it=Be!==null&&se[Be],at=Be!==null&&se.null,Pt=[...Array.isArray(it)?it:it?[it]:[],...Array.isArray(at)?at:at?[at]:[]];return K(Pt)(Be)}}function K(se){return Z=se,oe=0,se.length===0?ne:p(se[oe])}function p(se){return Pe;function Pe(Be){return g=X(),pe=se,se.partial||(o.currentConstruct=se),se.name&&o.parser.constructs.disable.null.includes(se.name)?de():se.tokenize.call(S?Object.assign(Object.create(o),S):o,u,re,de)(Be)}}function re(se){return V(pe,g),B}function de(se){return g.restore(),++oe<Z.length?p(Z[oe]):ne}}}function Y(V,S){V.resolveAll&&!i.includes(V)&&i.push(V),V.resolve&&Ae(o.events,S,o.events.length-S,V.resolve(o.events.slice(S),o)),V.resolveTo&&(o.events=V.resolveTo(o.events,o))}function X(){const V=k(),S=o.previous,D=o.currentConstruct,O=o.events.length,B=Array.from(l);return{from:O,restore:ne};function ne(){r=V,o.previous=S,o.currentConstruct=D,o.events.length=O,l=B,te()}}function te(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function Zl(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let s;if(n===a)s=[e[n].slice(r,i)];else{if(s=e.slice(n,a),r>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(r):s.shift()}i>0&&s.push(e[a].slice(0,i))}return s}function Gl(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const i=e[n];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&a)continue;s=" ";break}default:s=String.fromCharCode(i)}a=i===-2,r.push(s)}return r.join("")}function eo(e){const r={constructs:hs([Yl,...(e||{}).extensions||[]]),content:a(ms),defined:[],document:a(ys),flow:a(Ll),lazy:{},string:a(Bl),text:a(Nl)};return r;function a(i){return s;function s(l){return Xl(r,i,l)}}}function to(e){for(;!zr(e););return e}const Yn=/[\0\t\n\r]/g;function no(){let e=1,t="",n=!0,r;return a;function a(i,s,l){const u=[];let o,c,h,f,d;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(Yn.lastIndex=h,o=Yn.exec(i),f=o&&o.index!==void 0?o.index:i.length,d=i.charCodeAt(f),!o){t=i.slice(h);break}if(d===10&&h===f&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),h<f&&(u.push(i.slice(h,f)),e+=f-h),d){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function At(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Xn(e.position):"start"in e||"end"in e?Xn(e):"line"in e||"column"in e?dn(e):""}function dn(e){return Zn(e&&e.line)+":"+Zn(e&&e.column)}function Xn(e){return dn(e&&e.start)+"-"+dn(e&&e.end)}function Zn(e){return e&&typeof e=="number"?e:1}const Rr={}.hasOwnProperty;function ro(e,t,n){return typeof t!="string"&&(n=t,t=void 0),io(n)(to(eo(n).document().write(no()(e,t,!0))))}function io(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Fn),autolinkProtocol:X,autolinkEmail:X,atxHeading:i(_n),blockQuote:i(at),characterEscape:X,characterReference:X,codeFenced:i(Pt),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(Pt,s),codeText:i(Xr,s),codeTextData:X,data:X,codeFlowValue:X,definition:i(Zr),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i(Gr),hardBreakEscape:i(Tn),hardBreakTrailing:i(Tn),htmlFlow:i(An,s),htmlFlowData:X,htmlText:i(An,s),htmlTextData:X,image:i(ei),label:s,link:i(Fn),listItem:i(ti),listItemValue:f,listOrdered:i(Ln,h),listUnordered:i(Ln),paragraph:i(ni),reference:p,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(_n),strong:i(ri),thematicBreak:i(ai)},exit:{atxHeading:u(),atxHeadingSequence:Q,autolink:u(),autolinkEmail:it,autolinkProtocol:Be,blockQuote:u(),characterEscapeValue:te,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:se,characterReference:Pe,codeFenced:u(A),codeFencedFence:C,codeFencedFenceInfo:d,codeFencedFenceMeta:k,codeFlowValue:te,codeIndented:u(x),codeText:u(B),codeTextData:te,data:te,definition:u(),definitionDestinationString:j,definitionLabelString:z,definitionTitleString:T,emphasis:u(),hardBreakEscape:u(S),hardBreakTrailing:u(S),htmlFlow:u(D),htmlFlowData:te,htmlText:u(O),htmlTextData:te,image:u(Z),label:pe,labelText:oe,lineEnding:V,link:u(ne),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:re,resourceDestinationString:g,resourceTitleString:fe,resource:K,setextHeading:u(Y),setextHeadingLineSequence:W,setextHeadingText:w,strong:u(),thematicBreak:u()}};Hr(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(b){let $={type:"root",children:[]};const q={stack:[$],tokenStack:[],config:t,enter:l,exit:o,buffer:s,resume:c,data:n},J=[];let ie=-1;for(;++ie<b.length;)if(b[ie][1].type==="listOrdered"||b[ie][1].type==="listUnordered")if(b[ie][0]==="enter")J.push(ie);else{const Se=J.pop();ie=a(b,Se,ie)}for(ie=-1;++ie<b.length;){const Se=t[b[ie][0]];Rr.call(Se,b[ie][1].type)&&Se[b[ie][1].type].call(Object.assign({sliceSerialize:b[ie][2].sliceSerialize},q),b[ie][1])}if(q.tokenStack.length>0){const Se=q.tokenStack[q.tokenStack.length-1];(Se[1]||Gn).call(q,void 0,Se[0])}for($.position={start:Ne(b.length>0?b[0][1].start:{line:1,column:1,offset:0}),end:Ne(b.length>0?b[b.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<t.transforms.length;)$=t.transforms[ie]($)||$;return $}function a(b,$,q){let J=$-1,ie=-1,Se=!1,Ke,Fe,ft,pt;for(;++J<=q;){const ye=b[J];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?ie++:ie--,pt=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(Ke&&!pt&&!ie&&!ft&&(ft=J),pt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pt=void 0}if(!ie&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||ie===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(Ke){let st=J;for(Fe=void 0;st--;){const Le=b[st];if(Le[1].type==="lineEnding"||Le[1].type==="lineEndingBlank"){if(Le[0]==="exit")continue;Fe&&(b[Fe][1].type="lineEndingBlank",Se=!0),Le[1].type="lineEnding",Fe=st}else if(!(Le[1].type==="linePrefix"||Le[1].type==="blockQuotePrefix"||Le[1].type==="blockQuotePrefixWhitespace"||Le[1].type==="blockQuoteMarker"||Le[1].type==="listItemIndent"))break}ft&&(!Fe||ft<Fe)&&(Ke._spread=!0),Ke.end=Object.assign({},Fe?b[Fe][1].start:ye[1].end),b.splice(Fe||J,0,["exit",Ke,ye[2]]),J++,q++}if(ye[1].type==="listItemPrefix"){const st={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};Ke=st,b.splice(J,0,["enter",st,ye[2]]),J++,q++,ft=void 0,pt=!0}}}return b[$][1]._spread=Se,q}function i(b,$){return q;function q(J){l.call(this,b(J),J),$&&$.call(this,J)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(b,$,q){this.stack[this.stack.length-1].children.push(b),this.stack.push(b),this.tokenStack.push([$,q||void 0]),b.position={start:Ne($.start),end:void 0}}function u(b){return $;function $(q){b&&b.call(this,q),o.call(this,q)}}function o(b,$){const q=this.stack.pop(),J=this.tokenStack.pop();if(J)J[0].type!==b.type&&($?$.call(this,b,J[0]):(J[1]||Gn).call(this,b,J[0]));else throw new Error("Cannot close `"+b.type+"` ("+At({start:b.start,end:b.end})+"): itâs not open");q.position.end=Ne(b.end)}function c(){return In(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(b){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(b),10),this.data.expectingFirstListItemValue=void 0}}function d(){const b=this.resume(),$=this.stack[this.stack.length-1];$.lang=b}function k(){const b=this.resume(),$=this.stack[this.stack.length-1];$.meta=b}function C(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const b=this.resume(),$=this.stack[this.stack.length-1];$.value=b.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const b=this.resume(),$=this.stack[this.stack.length-1];$.value=b.replace(/(\r?\n|\r)$/g,"")}function z(b){const $=this.resume(),q=this.stack[this.stack.length-1];q.label=$,q.identifier=ot(this.sliceSerialize(b)).toLowerCase()}function T(){const b=this.resume(),$=this.stack[this.stack.length-1];$.title=b}function j(){const b=this.resume(),$=this.stack[this.stack.length-1];$.url=b}function Q(b){const $=this.stack[this.stack.length-1];if(!$.depth){const q=this.sliceSerialize(b).length;$.depth=q}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function W(b){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(b).codePointAt(0)===61?1:2}function Y(){this.data.setextHeadingSlurpLineEnding=void 0}function X(b){const q=this.stack[this.stack.length-1].children;let J=q[q.length-1];(!J||J.type!=="text")&&(J=ii(),J.position={start:Ne(b.start),end:void 0},q.push(J)),this.stack.push(J)}function te(b){const $=this.stack.pop();$.value+=this.sliceSerialize(b),$.position.end=Ne(b.end)}function V(b){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const q=$.children[$.children.length-1];q.position.end=Ne(b.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes($.type)&&(X.call(this,b),te.call(this,b))}function S(){this.data.atHardBreak=!0}function D(){const b=this.resume(),$=this.stack[this.stack.length-1];$.value=b}function O(){const b=this.resume(),$=this.stack[this.stack.length-1];$.value=b}function B(){const b=this.resume(),$=this.stack[this.stack.length-1];$.value=b}function ne(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=$,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function Z(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=$,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function oe(b){const $=this.sliceSerialize(b),q=this.stack[this.stack.length-2];q.label=Ar($),q.identifier=ot($).toLowerCase()}function pe(){const b=this.stack[this.stack.length-1],$=this.resume(),q=this.stack[this.stack.length-1];if(this.data.inReference=!0,q.type==="link"){const J=b.children;q.children=J}else q.alt=$}function g(){const b=this.resume(),$=this.stack[this.stack.length-1];$.url=b}function fe(){const b=this.resume(),$=this.stack[this.stack.length-1];$.title=b}function K(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function re(b){const $=this.resume(),q=this.stack[this.stack.length-1];q.label=$,q.identifier=ot(this.sliceSerialize(b)).toLowerCase(),this.data.referenceType="full"}function de(b){this.data.characterReferenceType=b.type}function se(b){const $=this.sliceSerialize(b),q=this.data.characterReferenceType;let J;q?(J=Tr($,q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):J=Pn($);const ie=this.stack[this.stack.length-1];ie.value+=J}function Pe(b){const $=this.stack.pop();$.position.end=Ne(b.end)}function Be(b){te.call(this,b);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(b)}function it(b){te.call(this,b);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(b)}function at(){return{type:"blockquote",children:[]}}function Pt(){return{type:"code",lang:null,meta:null,value:""}}function Xr(){return{type:"inlineCode",value:""}}function Zr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Gr(){return{type:"emphasis",children:[]}}function _n(){return{type:"heading",depth:0,children:[]}}function Tn(){return{type:"break"}}function An(){return{type:"html",value:""}}function ei(){return{type:"image",title:null,url:"",alt:null}}function Fn(){return{type:"link",title:null,url:"",children:[]}}function Ln(b){return{type:"list",ordered:b.type==="listOrdered",start:null,spread:b._spread,children:[]}}function ti(b){return{type:"listItem",spread:b._spread,checked:null,children:[]}}function ni(){return{type:"paragraph",children:[]}}function ri(){return{type:"strong",children:[]}}function ii(){return{type:"text",value:""}}function ai(){return{type:"thematicBreak"}}}function Ne(e){return{line:e.line,column:e.column,offset:e.offset}}function Hr(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Hr(e,r):ao(e,r)}}function ao(e,t){let n;for(n in t)if(Rr.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Gn(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+At({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+At({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+At({start:t.start,end:t.end})+") is still open")}const so={components:{Fields:Kt,SchemaDialog:gr,VueDraggable:xi},props:{item:{type:Object,required:!0},assets:{type:Object,required:!0},content:{type:Array,required:!0},elements:{type:Object,required:!0},section:{type:String,default:"main"}},emits:["error","update:content"],data:()=>({panel:[],menu:{},index:null,checked:!1,vchange:!1,vschemas:!1,currentPage:1,lastPage:1}),setup(){const e=ci(),t=rt(),n=It(),r=Et();return{auth:He(),clipboard:e,side:r,messages:t,schemas:n}},computed:{changed(){return this.content.some(e=>e._changed)},isChecked(){return this.content.some(e=>e._checked)}},methods:{add(e,t){let n={id:Ee(),group:this.section};e.id?(this.elements[e.id]=e,n=Object.assign(n,{type:"reference",refid:e.id})):n=Object.assign(n,{type:e.type,data:{}}),t!==null?(this.content.splice(t,0,n),this.panel.push(this.panel.includes(t)?t+1:t)):(this.content.push(n),this.panel.push(this.content.length-1)),this.$emit("update:content",this.content),this.vschemas=!1,this.store()},change(e){if(!this.content[e]){this.messages.add(this.$gettext("Content element not found"),"error");return}this.index=e,this.vchange=!0},changeTo(e,t){if(!this.content[t]){this.messages.add(this.$gettext("Content element not found"),"error");return}this.content[t]._error=!1,this.content[t].type=e.type,this.vchange=!1,this.validate().then(n=>{this.$emit("update:content",this.content),this.$emit("error",!n),this.store()})},copy(e){const t=[];if(e===void 0){for(let n=this.content.length-1;n>=0;n--)if(this.content[n]._checked){const r=JSON.parse(JSON.stringify(this.content[n]));r._checked=!1,r.id=null,t.push(r)}}else{const n=JSON.parse(JSON.stringify(this.content[e]));n._checked=!1,n.id=null,t.push(n)}this.clipboard.set("page-content",t.reverse())},createMarkdown(e){return e.type==="text"?e.data.text||"":e.type==="code"?`\`\`\`${e.data.lang||""}
${e.data.text||""}
\`\`\``:e.type==="heading"?`${"#".repeat(Number(e.data.level)||1)} ${e.data.title||""}`:""},cut(e){const t=[];if(e===void 0){for(let n=this.content.length-1;n>=0;n--)if(this.content[n]._checked){const r=JSON.parse(JSON.stringify(this.content[n]));this.content.splice(n,1),r.id=null,t.push(r)}}else{const n=JSON.parse(JSON.stringify(this.content[e]));this.content.splice(e,1),n.id=null,t.push(n)}this.clipboard.set("page-content",t.reverse()),this.$emit("update:content",this.content),this.store()},error(e,t){e._error=t,this.$emit("error",this.content.some(n=>n._error)),this.store()},fields(e){var t,n;return(t=this.schemas.content[e])!=null&&t.fields?(n=this.schemas.content[e])==null?void 0:n.fields:(console.warn(`No definition of fields for "${e}" schemas`),[])},insert(e){this.index=e,this.vschemas=!0},merge(){let e=0;const t=[];for(let r=this.content.length-1;r>=0;r--)this.content[r]._checked&&["text","code","heading"].includes(this.content[r].type)&&(t.push(this.content[r]),this.content.splice(r,1),e=r);if(t.length===0)return;const n=t.reverse().reduce((r,a)=>(r.data.text+=this.createMarkdown(a)+`

`,r),{id:Ee(),group:this.section,type:"text",data:{text:""}});this.content.splice(e,0,n),this.$emit("update:content",this.content),this.store()},paste(e=null){e===null&&(e=this.content.length);const t=(this.clipboard.get("page-content")||[]).map(n=>(n.group=this.section,n));this.content.splice(e,0,...t),this.$emit("update:content",this.content),this.store()},purge(){for(let e=this.content.length-1;e>=0;e--)this.content[e]._checked&&this.content.splice(e,1);this.$emit("error",this.content.some(e=>e._error)),this.$emit("update:content",this.content),this.checked=!1,this.store()},remove(e){this.content.splice(e,1),this.$emit("error",this.content.some(t=>t._error)),this.$emit("update:content",this.content),this.store()},reset(){this.content.forEach(e=>{delete e._changed,delete e._error}),this.store()},search(e){e&&(e=e.toLocaleLowerCase().trim(),this.content.forEach(t=>{const n=t.type==="reference"?this.elements[t.refid]||{}:t;t._hide=!JSON.stringify(Object.values((n==null?void 0:n.data)||{})).toLocaleLowerCase().includes(e)}))},share(e){var n;if(!this.auth.can("element:add")){this.messages.add(this.$gettext("Permission denied"),"error");return}const t=this.content[e];if(!t){this.messages.add(this.$gettext("Element not found"),"error");return}if(t.type==="reference"){this.messages.add(this.$gettext("Element is already shared"),"error");return}this.$apollo.mutate({mutation:le`
            mutation($input: ElementInput!, $files: [ID!]) {
              addElement(input: $input, files: $files) {
                id
                type
                lang
                name
                data
                editor
                updated_at
                files {
                  id
                  lang
                  mime
                  name
                  path
                  previews
                  description
                  updated_at
                  editor
                }
              }
            }
          `,variables:{input:{type:t.type,lang:this.item.lang,name:this.title(t),data:JSON.stringify(t.data||{})},files:((n=t.files)==null?void 0:n.filter((r,a,i)=>i.indexOf(r)===a))||[]}}).then(r=>{if(r.errors)throw r.errors;const a=r.data.addElement;for(const i of a.files||[])i.previews=JSON.parse(i.previews||"{}"),this.assets[i.id]=i;a.data=JSON.parse(a.data),a.files=a.files.map(i=>i.id),this.elements[a.id]=a,this.content[e]={id:Ee(),group:this.section,type:"reference",refid:a.id},this.$emit("update:content",this.content),this.store()}).catch(r=>{this.messages.add(this.$gettext("Unable to make element shared"),"error"),this.$log("PageDetailContentList::share(): Error making element shared",e,r)})},shown(e){const t=this.side.shown("state","valid"),n=this.side.shown("state","error"),r=this.side.shown("state","changed");return!e._hide&&this.side.shown("type",e.type)&&(n&&e._error||r&&e._changed||t&&!e._error&&!e._changed)},split(e){var r;if(!this.content[e]){this.messages.add(this.$gettext("Not available for this content element"),"error");return}const t=[],n=ro(((r=this.content[e].data)==null?void 0:r.text)||"");for(const a of n.children)switch(a.type){case"code":{t.push({id:Ee(),type:"code",group:this.section,data:{lang:a.lang||null,text:a.value}});break}case"heading":{const i=a.children.map(s=>s.value).join("");t.push({id:Ee(),type:"heading",group:this.section,data:{title:i.trim(),level:String(a.depth)}});break}case"table":{const i=a.children.map(s=>s.children.map(l=>l.children.map(u=>u.value||"").join("")).join(";")).join(`
`);t.push({id:Ee(),type:"table",group:this.section,data:{text:i.trim()}});break}default:t.push({id:Ee(),type:"text",group:this.section,data:{text:as(a)}})}this.content.splice(e,1,...t),this.$emit("error",this.content.some(a=>a._error)),this.$emit("update:content",this.content),this.store()},store(e=!0){if(!e)return;const t={},n={};return this.content.forEach(r=>{r.type&&(t[r.type]=(t[r.type]||0)+1),!r._changed&&!r._error&&(n.valid=(n.valid||0)+1),r._changed&&(n.changed=(n.changed||0)+1),r._error&&(n.error=(n.error||0)+1)}),this.side.store={type:t,state:n}},title(e){var t,n;return(((t=e.data)==null?void 0:t.title)||((n=e.data)==null?void 0:n.text)||Object.values(e.data||{}).map(r=>r&&typeof r!="object"&&typeof r!="boolean"?r:null).filter(r=>!!r).join(" - ")).substring(0,50)||this.$pgettext("st",e.type)||""},toggle(){this.content.forEach(e=>{this.shown(e)&&(e._checked=!e._checked)})},unshare(e){if(!this.content[e]){this.messages.add(this.$gettext("Content element not found"),"error");return}const t=this.content[e];if(t.type!=="reference"||!this.elements[t.refid]){this.messages.add(this.$gettext("Element is not shared"),"error");return}for(const n of this.elements[t.refid].files||[])this.assets[n.id]=n;this.content[e].type=this.elements[t.refid].type||null,this.content[e].data=this.elements[t.refid].data||{},delete this.content[e].refid,this.$emit("update:content",this.content),this.store()},update(e){e._changed=!0,e.group=this.section,this.$emit("error",this.content.some(t=>t._error)),this.$emit("update:content",this.content),this.store()},validate(){var t;const e=[];return(t=this.$refs.field)==null||t.forEach(n=>{e.push(n.validate())}),Promise.all(e).then(n=>n.every(r=>r))}}},lo={class:"header"},oo={key:0,class:"bulk"},uo={class:"element-title"},co={class:"element-type"},ho={key:0,class:"btn-group"};function fo(e,t,n,r,a,i){const s=ee("Fields"),l=ee("VueDraggable"),u=ee("SchemaDialog"),o=mn("observe-visibility");return v(),M(ue,null,[et((v(),M("div",null,[N("div",lo,[r.auth.can("page:save")?(v(),M("div",oo,[y(Lt,{modelValue:e.checked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.checked=c),onClick:t[1]||(t[1]=je(c=>i.toggle(),["stop"]))},null,8,["modelValue"]),y(ct,{location:"bottom left"},{activator:m(({props:c})=>[y(_,tt(c,{disabled:!i.isChecked,"append-icon":"mdi-menu-down",variant:"text"}),{default:m(()=>[L(I(e.$gettext("Actions")),1)]),_:2},1040,["disabled"])]),default:m(()=>[y(ut,null,{default:m(()=>[i.isChecked?(v(),E(H,{key:0},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete",variant:"text",onClick:t[2]||(t[2]=c=>i.purge())},{default:m(()=>[L(I(e.$gettext("Delete")),1)]),_:1})]),_:1})):P("",!0),i.isChecked?(v(),E(H,{key:1},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:t[3]||(t[3]=c=>i.copy())},{default:m(()=>[L(I(e.$gettext("Copy")),1)]),_:1})]),_:1})):P("",!0),i.isChecked?(v(),E(H,{key:2},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:t[4]||(t[4]=c=>i.cut())},{default:m(()=>[L(I(e.$gettext("Cut")),1)]),_:1})]),_:1})):P("",!0),r.clipboard.get("page-content")?(v(),E(H,{key:3},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[5]||(t[5]=c=>i.paste())},{default:m(()=>[L(I(e.$gettext("Paste")),1)]),_:1})]),_:1})):P("",!0),i.isChecked?(v(),E(H,{key:4},{default:m(()=>[y(_,{"prepend-icon":"mdi-set-merge",variant:"text",onClick:t[6]||(t[6]=c=>i.merge())},{default:m(()=>[L(I(e.$gettext("Merge")),1)]),_:1})]),_:1})):P("",!0)]),_:1})]),_:1})])):P("",!0),y(Me,{"onClick:clear":t[7]||(t[7]=c=>i.search("")),onInput:t[8]||(t[8]=c=>i.search(c.target.value)),label:e.$gettext("Search for"),"prepend-inner-icon":"mdi-magnify",variant:"underlined",class:"search",clearable:"","hide-details":""},null,8,["label"])]),y(gn,{class:"list",modelValue:e.panel,"onUpdate:modelValue":t[10]||(t[10]=c=>e.panel=c),elevation:"0",multiple:""},{default:m(()=>[y(l,{"onUpdate:modelValue":t[9]||(t[9]=c=>e.$emit("update:content",c)),disabled:e.panel.length||!r.auth.can("page:save"),modelValue:n.content,forceFallback:!0,fallbackTolerance:"10",draggable:".content",group:"content"},{default:m(()=>[(v(!0),M(ue,null,$e(n.content,(c,h)=>et((v(),E(yn,{key:h,class:ce(["content",{changed:c._changed,error:c._error}])},{default:m(()=>[y(vn,{"expand-icon":"mdi-pencil"},{default:m(()=>{var f;return[r.auth.can("page:save")?(v(),E(Lt,{key:0,onClick:je(d=>c._checked=!c._checked,["stop"])},null,8,["onClick"])):P("",!0),r.auth.can("page:save")?(v(),E(ct,{key:1},{activator:m(({props:d})=>[y(_,tt({ref_for:!0},d,{title:e.$gettext("Actions"),icon:"mdi-dots-vertical",variant:"text"}),null,16,["title"])]),default:m(()=>[y(ut,null,{default:m(()=>[c._error?P("",!0):(v(),E(H,{key:0},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:d=>i.copy(h)},{default:m(()=>[L(I(e.$gettext("Copy")),1)]),_:2},1032,["onClick"])]),_:2},1024)),c._error?P("",!0):(v(),E(H,{key:1},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:d=>i.cut(h)},{default:m(()=>[L(I(e.$gettext("Cut")),1)]),_:2},1032,["onClick"])]),_:2},1024)),y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-delete",variant:"text",onClick:d=>i.remove(h)},{default:m(()=>[L(I(e.$gettext("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024),y(Ze),r.clipboard.get("page-content")?(v(),E(H,{key:2},{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-up",variant:"text",onClick:d=>i.paste(h)},{default:m(()=>[L(I(e.$gettext("Paste before")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),r.clipboard.get("page-content")?(v(),E(H,{key:3},{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-down",variant:"text",onClick:d=>i.paste(h+1)},{default:m(()=>[L(I(e.$gettext("Paste after")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-up",variant:"text",onClick:d=>i.insert(h)},{default:m(()=>[L(I(e.$gettext("Insert before")),1)]),_:2},1032,["onClick"])]),_:2},1024),y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-down",variant:"text",onClick:d=>i.insert(h+1)},{default:m(()=>[L(I(e.$gettext("Insert after")),1)]),_:2},1032,["onClick"])]),_:2},1024),y(Ze),!c._error&&c.type!=="reference"&&r.auth.can("element:add")?(v(),E(H,{key:4},{default:m(()=>[y(_,{"prepend-icon":"mdi-link",variant:"text",onClick:d=>i.share(h)},{default:m(()=>[L(I(e.$gettext("Make shared")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),c.type==="reference"?(v(),E(H,{key:5},{default:m(()=>[y(_,{"prepend-icon":"mdi-link-off",variant:"text",onClick:d=>i.unshare(h)},{default:m(()=>[L(I(e.$gettext("Merge copy")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),c.type!=="reference"?(v(),E(H,{key:6},{default:m(()=>[y(_,{"prepend-icon":"mdi-swap-horizontal",variant:"text",onClick:d=>i.change(h)},{default:m(()=>[L(I(e.$gettext("Change to")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),c.type==="text"?(v(),E(H,{key:7},{default:m(()=>[y(_,{"prepend-icon":"mdi-set-split",variant:"text",onClick:d=>i.split(h)},{default:m(()=>[L(I(e.$gettext("Split")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024)):P("",!0),c.type==="reference"?(v(),E(nt,{key:2,title:e.$gettext("Shared element"),class:"icon-shared",icon:"mdi-link"},null,8,["title"])):P("",!0),N("div",uo,I(c.type==="reference"?(f=n.elements[c.refid])==null?void 0:f.name:i.title(c)),1),N("div",co,I(e.$pgettext("st",c.type)),1)]}),_:2},1024),y(kn,null,{default:m(()=>{var f,d;return[c.type==="reference"?(v(),E(s,{key:0,data:((f=n.elements[c.refid])==null?void 0:f.data)||{},fields:i.fields((d=n.elements[c.refid])==null?void 0:d.type),assets:n.assets,readonly:!0,type:c.type},null,8,["data","fields","assets","type"])):(v(),E(s,{key:1,ref_for:!0,ref:"field",data:c.data,"onUpdate:data":k=>c.data=k,files:c.files,"onUpdate:files":k=>c.files=k,readonly:!r.auth.can("page:save"),fields:i.fields(c.type),assets:n.assets,type:c.type,onError:k=>i.error(c,k),onChange:k=>i.update(c)},null,8,["data","onUpdate:data","files","onUpdate:files","readonly","fields","assets","type","onError","onChange"]))]}),_:2},1024)]),_:2},1032,["class"])),[[Rt,i.shown(c)]])),128))]),_:1},8,["disabled","modelValue"])]),_:1},8,["modelValue"]),r.auth.can("page:save")?(v(),M("div",ho,[y(_,{onClick:t[11]||(t[11]=c=>e.vschemas=!0),title:e.$gettext("Add element"),icon:"mdi-view-grid-plus",color:"primary",variant:"flat"},null,8,["title"])])):P("",!0)])),[[o,i.store]]),(v(),E(St,{to:"body"},[y(u,{modelValue:e.vschemas,"onUpdate:modelValue":t[12]||(t[12]=c=>e.vschemas=c),onAdd:t[13]||(t[13]=c=>i.add(c,e.index))},null,8,["modelValue"])])),(v(),E(St,{to:"body"},[y(u,{modelValue:e.vchange,"onUpdate:modelValue":t[14]||(t[14]=c=>e.vchange=c),elements:!1,onAdd:t[15]||(t[15]=c=>i.changeTo(c,e.index))},null,8,["modelValue"])]))],64)}const po=we(so,[["render",fo],["__scopeId","data-v-ddc364ec"]]),mo={components:{PageDetailContentList:po},props:{item:{type:Object,required:!0},assets:{type:Object,required:!0},elements:{type:Object,required:!0}},emits:["change","error"],data:()=>({changed:{},errors:{},tab:"default"}),setup(){return{config:cr()}},computed:{names(){const e=this.item.type||"page",t=this.item.theme||"cms";return this.config.get(`themes.${t}.types.${e}.sections`,["main"])},sections(){if(this.names.length<=1)return{};const e={};for(const t of this.names)e[t]=[];for(const t of this.item.content||[]){const n=t.group||"main";e[n]||(e[n]=[]),e[n].push(t)}return e}},methods:{error(e,t){this.errors[e]=t,this.$emit("error",Object.values(this.errors).includes(!0))},reset(){var e;this.changed={},this.errors={},Array.isArray(this.$refs.content)?this.$refs.content.forEach(t=>t.reset()):(e=this.$refs.content)==null||e.reset()},update(e,t){const n=this.sections;n[e]=t,this.item.content=Object.values(n).reduce((r,a)=>r.concat(a),[]),this.changed[e]=!0},validate(){const t=(Array.isArray(this.$refs.content)?this.$refs.content:[this.$refs.content]).map(n=>n==null?void 0:n.validate());return Promise.all(t).then(n=>n.every(r=>r))}}},go={key:0};function yo(e,t,n,r,a,i){const s=ee("PageDetailContentList");return v(),E(dt,null,{default:m(()=>[y(ht,{class:"box scroll"},{default:m(()=>[Object.keys(i.sections).length>1?(v(),M("div",go,[y(qt,{class:"subtabs",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.tab=l),"align-tabs":"center"},{default:m(()=>[(v(!0),M(ue,null,$e(i.sections,(l,u)=>(v(),E(Ue,{key:u,class:ce({changed:e.changed[u],error:e.errors[u]}),value:u},{default:m(()=>[L(I(e.$pgettext("cs",u)),1)]),_:2},1032,["class","value"]))),128))]),_:1},8,["modelValue"]),y(wn,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=l=>e.tab=l),touch:!1},{default:m(()=>[(v(!0),M(ue,null,$e(i.sections,(l,u)=>(v(),E(Xe,{key:u,value:u},{default:m(()=>[y(s,{ref_for:!0,ref:"content",section:u,item:n.item,assets:n.assets,content:l,elements:n.elements,onError:o=>i.error(u,o),"onUpdate:content":o=>{i.update(u,o),this.$emit("change","content")}},null,8,["section","item","assets","content","elements","onError","onUpdate:content"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])):(v(),E(s,{key:1,ref:"content",item:n.item,assets:n.assets,content:n.item.content||[],elements:n.elements,onError:t[2]||(t[2]=l=>e.$emit("error",l)),"onUpdate:content":t[3]||(t[3]=l=>{n.item.content=l,this.$emit("change","content")})},null,8,["item","assets","content","elements"]))]),_:1})]),_:1})}const vo=we(mo,[["render",yo],["__scopeId","data-v-cfa02e78"]]),ko={components:{Fields:Kt},props:{modelValue:{type:Boolean,required:!0},readonly:{type:Boolean,default:!1},element:{type:Object,required:!0},assets:{type:Object,default:()=>({})},type:{type:String,default:"content"}},emits:["update:modelValue","update:element"],setup(){return{schemas:It()}},data(){return{error:!1}},methods:{fields(e){var t,n;return!this.schemas[this.type]||!((t=this.schemas[this.type][e])!=null&&t.fields)?(console.warn(`No definition of fields for "${e}" (${this.type}) schemas`),[]):(n=this.schemas.content[e])==null?void 0:n.fields}}};function bo(e,t,n,r,a,i){const s=ee("Fields");return v(),E(Ht,{modelValue:n.modelValue,onAfterLeave:t[5]||(t[5]=l=>e.$emit("update:modelValue",!1)),"max-width":"1200",scrollable:""},{default:m(()=>[y(dr,null,{append:m(()=>[!n.readonly&&!a.error?(v(),E(_,{key:0,onClick:t[0]||(t[0]=l=>e.$emit("update:element",n.element)),variant:"outlined"},{default:m(()=>[L(I(e.$gettext("Save")),1)]),_:1})):P("",!0),y(_,{onClick:t[1]||(t[1]=l=>e.$emit("update:modelValue",!1)),title:e.$gettext("Close"),icon:"mdi-close",variant:"flat"},null,8,["title"])]),title:m(()=>[L(I(e.$gettext("Content Element")),1)]),default:m(()=>[y(Ze),y(hr,null,{default:m(()=>[y(s,{data:n.element.data,"onUpdate:data":t[2]||(t[2]=l=>n.element.data=l),files:n.element.files,"onUpdate:files":t[3]||(t[3]=l=>n.element.files=l),fields:i.fields(n.element.type),readonly:n.readonly,type:n.element.type,assets:n.assets,onError:t[4]||(t[4]=l=>a.error=n.element._error=l)},null,8,["data","files","fields","readonly","type","assets"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const xo=we(ko,[["render",bo]]),wo={components:{FieldsDialog:xo,SchemaDialog:gr},props:{save:{type:Object,required:!0},item:{type:Object,required:!0},elements:{type:Object,required:!0},assets:{type:Object,default:()=>({})}},emits:["change"],setup(){const e=rt(),t=He();return{app:xn(),auth:t,messages:e}},data(){return{pos:null,index:null,element:null,section:"main",loading:!0,expanded:!1,vcontent:!1,vschemas:!1,vpreview:!1,vedit:!1}},mounted(){var e;window.addEventListener("message",this.message),(e=this.$refs.iframe)==null||e.addEventListener("load",()=>{var t,n;(n=(t=this.$refs.iframe)==null?void 0:t.contentWindow)==null||n.postMessage("init","*")}),this.messages.add(this.$gettext("Double-click to edit"),"info")},beforeUnmount(){window.removeEventListener("message",this.message)},computed:{url(){return this.app.urlpage.replace(/_domain_/,this.item.domain||"").replace(/_path_/,this.item.path||"").replace(/\/+$/,"")}},methods:{add(e){const t=this.section||"main";this.vschemas=!1,e.id?(this.elements[e.id]=e,this.element={id:Ee(),group:t,type:"reference",refid:e.id},this.update()):(this.element={id:Ee(),group:t,type:e.type,data:{}},this.vedit=!0)},edit(){this.element=this.item.content[this.index]||null,this.vedit=!!this.element},fullscreen(){const e=this.$refs.preview;this.expanded?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e!=null&&e.requestFullscreen?e.requestFullscreen():e!=null&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.expanded=!this.expanded},message(e){switch(e.data){case 0:this.index=null;break;case-1:this.vpreview=!0,setTimeout(()=>{this.vpreview=!1},3e3);break;case-2:this.vcontent=!0,setTimeout(()=>{this.vcontent=!1},3e3);break;default:this.index=typeof e.data=="object"&&e.data.id?this.item.content.findIndex(t=>t.id===e.data.id):null,this.section=e.data.section||"main"}},remove(){this.index!==null&&(this.item.content.splice(this.index,1),this.$emit("change","content"),this.index=null,this.save.fcn(!0).then(()=>{this.$refs.iframe.contentWindow.postMessage("reload",this.url)}))},update(){this.pos!==null&&this.item.content.splice(this.index+this.pos,0,this.element),this.vedit=!1,this.index=null,this.pos=null,this.$emit("change","content"),this.save.fcn(!0).then(()=>{this.$refs.iframe.contentWindow.postMessage("reload",this.url)})}},watch:{"save.count":function(){this.save.count>0&&this.$refs.iframe.contentWindow.postMessage("reload",this.url)}}},Co={class:"page-preview",ref:"preview"},So={key:0,class:"controls"},Eo={key:1,class:"controls"},Io={key:2,class:"preview-hint"},$o={key:3,class:"preview-hint"},Po=["src"];function Do(e,t,n,r,a,i){const s=ee("FieldsDialog"),l=ee("SchemaDialog");return v(),M("div",Co,[a.loading?(v(),M("div",So,t[11]||(t[11]=[N("svg",{class:"spinner",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[N("circle",{class:"spin1",cx:"4",cy:"12",r:"3"}),N("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"}),N("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"})],-1)]))):P("",!0),a.index!==null?(v(),M("div",Eo,[a.index!==-1?(v(),E(_,{key:0,onClick:t[0]||(t[0]=u=>i.edit()),title:e.$gettext("Edit element"),icon:"mdi-pencil",variant:"flat"},null,8,["title"])):P("",!0),a.index!==-1?(v(),E(_,{key:1,onClick:t[1]||(t[1]=u=>{a.vschemas=!0,a.pos=0}),title:e.$gettext("Add element before"),icon:"mdi-table-row-plus-before",variant:"text"},null,8,["title"])):P("",!0),y(_,{onClick:t[2]||(t[2]=u=>{a.vschemas=!0,a.pos=1}),title:e.$gettext("Add element after"),icon:"mdi-table-row-plus-after",variant:"text"},null,8,["title"]),a.index!==-1?(v(),E(_,{key:2,onClick:t[3]||(t[3]=u=>i.remove()),title:e.$gettext("Remove element"),icon:"mdi-trash-can-outline",variant:"text"},null,8,["title"])):P("",!0)])):P("",!0),a.vpreview?(v(),M("div",Io,I(e.$gettext("Preview mode")),1)):P("",!0),a.vcontent?(v(),M("div",$o,I(e.$gettext("Not CMS content")),1)):P("",!0),N("iframe",{ref:"iframe",src:i.url,onLoad:t[4]||(t[4]=u=>a.loading=!1)},null,40,Po),a.expanded?P("",!0):(v(),E(_,{key:4,onClick:t[5]||(t[5]=u=>i.fullscreen()),title:e.$gettext("Fullscreen mode"),icon:"mdi-fullscreen",class:"fullscreen",variant:"text"},null,8,["title"])),a.expanded?(v(),E(_,{key:5,onClick:t[6]||(t[6]=u=>i.fullscreen()),title:e.$gettext("Exit fullscreen mode"),icon:"mdi-fullscreen-exit",class:"fullscreen",variant:"text"},null,8,["title"])):P("",!0),a.element?(v(),E(s,{key:6,modelValue:a.vedit,"onUpdate:modelValue":t[7]||(t[7]=u=>a.vedit=u),assets:n.assets,element:a.element.type==="reference"?n.elements[a.element.refid]:a.element,readonly:!r.auth.can("page:save")||!!a.element.refid,attach:e.$refs.preview,"onUpdate:element":t[8]||(t[8]=u=>i.update())},null,8,["modelValue","assets","element","readonly","attach"])):P("",!0),y(l,{modelValue:a.vschemas,"onUpdate:modelValue":t[9]||(t[9]=u=>a.vschemas=u),attach:e.$refs.preview,onAdd:t[10]||(t[10]=u=>i.add(u))},null,8,["modelValue","attach"])],512)}const Oo=we(wo,[["render",Do]]),_o={components:{AsideMeta:ki,AsideCount:Ii,HistoryDialog:vi,PageDetailItem:Hi,PageDetailContent:vo,PageDetailEditor:Oo},inject:["closeView","compose","translate","txlocales"],props:{item:{type:Object,required:!0}},provide(){return{compose:this.composeText,translate:this.translateText}},setup(){const e=bn(),t=rt(),n=It(),r=pn();return{auth:He(),drawer:r,languages:e,messages:t,schemas:n}},data:()=>({tab:"editor",aside:"",asidePage:"meta",changed:{},errors:{},assets:{},elements:{},latest:null,pubmenu:null,publishAt:null,translating:!1,vhistory:!1,savecnt:0}),computed:{currentAssets(){const e=this.fileIds();return Object.fromEntries(Object.entries(this.assets||{}).filter(([t,n])=>e.includes(t)))},hasChanged(){return Object.values(this.changed).some(e=>e)},hasError(){return Object.values(this.errors).some(e=>e)},langs(){const e=[],t=["ar","bg","cs","da","de","el","en","en-GB","en_US","es","et","fi","fr","he","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","uk","vi","zh","zh-HANS","zh-HANT"];return Object.entries(this.languages.available).forEach(n=>{t.includes(n[0])&&n[0]!==this.item.lang&&e.push({code:n[0],name:n[1]})}),e}},created(){var e;this.$options._compose=this.compose,!(!((e=this.item)!=null&&e.id)||!this.auth.can("page:view"))&&this.$apollo.query({query:le`query($id: ID!) {
          page(id: $id) {
            id
            latest {
              ${this.fields()}
            }
          }
        }`,variables:{id:this.item.id}}).then(t=>{var r,a,i,s,l,u;if(t.errors||!t.data.page)throw t;this.reset(),this.latest=(a=(r=t==null?void 0:t.data)==null?void 0:r.page)==null?void 0:a.latest,Object.assign(this.item,JSON.parse(((i=this.latest)==null?void 0:i.data)||"{}"));const n=JSON.parse(((s=this.latest)==null?void 0:s.aux)||"{}");this.item.content=n.content??[],this.item.config=n.config??{},this.item.meta=n.meta??{},this.assets=this.files(((l=this.latest)==null?void 0:l.files)||[]),this.elements=this.elems(((u=this.latest)==null?void 0:u.elements)||[]),this.item.content=this.obsolete(this.item.content)}).catch(t=>{this.messages.add(this.$gettext("Error fetching page"),"error"),this.$log("PageDetail::watch(item): Error fetching page",t)})},methods:{clean(e,t){var n,r,a;if(e&&t){e=JSON.parse(JSON.stringify(e));for(const i in e){const s=e[i];for(const l in s)l.startsWith("_")&&delete s[l];for(const l in s.data||{})(a=(r=(n=this.schemas[t])==null?void 0:n[s.type])==null?void 0:r.fields)!=null&&a[l]||delete s.data[l]}}return e},composeText(e,t=[],n=[]){return this.$options._compose?(Array.isArray(t)||(t=[t]),t.push("page content as JSON: "+JSON.stringify(this.item.content)),t.push("required output language: "+(this.item.lang||"en")),this.$options._compose(e,t,n)):Promise.reject(new Error("Compose method is not available in PageDetail component"))},elems(e){const t={};for(const n of e)t[n.id]={...n,data:JSON.parse(n.data||"{}"),files:Object.values(this.files(n.files||[]))};return t},fields(){return`id
              aux
              data
              published
              publish_at
              created_at
              editor
              files {
                id
                lang
                mime
                name
                path
                previews
                description
                transcription
                updated_at
                editor
              }
              elements {
                id
                type
                name
                data
                editor
                updated_at
                files {
                  id
                  lang
                  mime
                  name
                  path
                  previews
                  description
                  transcription
                  updated_at
                  editor
                }
              }`},fileIds(){const e=[];for(const t of this.item.content||[])e.push(...t.files||[]);for(const t in this.item.meta||{})e.push(...this.item.meta[t].files||[]);for(const t in this.item.config||{})e.push(...this.item.config[t].files||[]);return e.filter((t,n,r)=>r.indexOf(t)===n)},files(e){const t={};for(const n of e)t[n.id]={...n,previews:JSON.parse(n.previews||"{}"),description:JSON.parse(n.description||"{}"),transcription:JSON.parse(n.transcription||"{}")};return t},invalidate(){const e=this.$apollo.provider.defaultClient.cache;e.evict({id:"Page:"+this.item.id}),e.gc()},obsolete(e){for(const t of e)t.files&&Array.isArray(t.files)&&(t.files=t.files.filter(n=>typeof this.assets[n]<"u"));return e},publish(e=null){if(!this.auth.can("page:publish")){this.messages.add(this.$gettext("Permission denied"),"error");return}this.save(!0).then(t=>{var n,r;t&&this.$apollo.mutate({mutation:le`mutation ($id: [ID!]!, $at: DateTime) {
              pubPage(id: $id, at: $at) {
                id
              }
            }`,variables:{id:[this.item.id],at:(r=(n=e==null?void 0:e.toISOString())==null?void 0:n.substring(0,19))==null?void 0:r.replace("T"," ")}}).then(a=>{if(a.errors)throw a.errors;e?(this.item.publish_at=e,this.messages.add(this.$gettext("Page scheduled for publishing at %{date}",{date:e.toLocaleDateString()}),"info")):(this.item.published=!0,this.messages.add(this.$gettext("Page published successfully"),"success")),this.closeView()}).catch(a=>{this.messages.add(this.$gettext("Error publishing page"),"error"),this.$log("PageDetail::publish(): Error publishing page",e,a)})})},reset(){var e,t;(e=this.$refs.page)==null||e.reset(),(t=this.$refs.content)==null||t.reset(),this.changed={},this.errors={}},save(e=!1){return this.auth.can("page:save")?this.hasChanged?this.validate().then(t=>{if(!t)return this.messages.add(this.$gettext("There are invalid fields, please resolve the errors first"),"error"),t;const n={};for(const a in this.item.meta||{})n[a]={type:this.item.meta[a].type||"",data:this.item.meta[a].data||{},files:this.item.meta[a].files||[]};const r={};for(const a in this.item.config||{})r[a]={type:this.item.config[a].type||"",data:this.item.config[a].data||{},files:this.item.config[a].files||[]};return this.$apollo.mutate({mutation:le`mutation ($id: ID!, $input: PageInput!, $elements: [ID!], $files: [ID!]) {
              savePage(id: $id, input: $input, elements: $elements, files: $files) {
                id
              }
            }`,variables:{id:this.item.id,input:{cache:this.item.cache||0,domain:this.item.domain||"",lang:this.item.lang||"",name:this.item.name||"",path:this.item.path||"",status:this.item.status||0,title:this.item.title||"",tag:this.item.tag||"",to:this.item.to||"",type:this.item.type||"",theme:this.item.theme||"",meta:JSON.stringify(this.clean(n,"meta")),config:JSON.stringify(this.clean(r,"config")),content:JSON.stringify(this.clean(this.item.content,"content"))},elements:Object.keys(this.elements),files:this.fileIds()}}).then(a=>{var i;if(a.errors)throw a.errors;return this.item.published=!1,(i=this.$refs.history)==null||i.reset(),this.reset(),e||this.messages.add(this.$gettext("Page saved successfully"),"success"),this.invalidate(),this.savecnt++,!0}).catch(a=>{this.messages.add(this.$gettext("Error saving page"),"error"),this.$log("PageDetail::save(): Error saving page",a)})}):Promise.resolve(!0):(this.messages.add(this.$gettext("Permission denied"),"error"),Promise.resolve(!1))},translatePage(e){var r,a,i;if(!this.schemas.content){this.messages.add(this.$gettext('No page schema for "content" found'),"error");return}const t=["text","markdown","plaintext","string"],n=[{item:this.item,key:"title",text:this.item.title},{item:this.item,key:"name",text:this.item.name},{item:this.item,key:"path",text:this.item.path}];for(const s of Object.values(this.item.meta))for(const l in s.data){const u=(i=(a=(r=this.schemas.meta[s.type])==null?void 0:r.fields)==null?void 0:a[l])==null?void 0:i.type;s.data[l]&&t.includes(u)&&n.push({item:s.data,key:l,text:s.data[l]})}this.item.content.forEach(s=>{var l,u,o,c,h;for(const f in s.data){const d=(l=this.schemas.content[s.type])==null?void 0:l.fields,k=(u=d==null?void 0:d[f])==null?void 0:u.type;if(k==="items")for(const C in s.data[f]){const A=s.data[f][C];for(const x in A)t.includes((h=(c=(o=d[f])==null?void 0:o.item)==null?void 0:c[x])==null?void 0:h.type)&&n.push({item:A,key:x,text:A[x]})}else s.type!=="code"&&s.data[f]&&t.includes(k)&&n.push({item:s.data,key:f,text:s.data[f]})}}),this.translating=!0,this.translate(n.map(s=>s.text),e,this.item.lang).then(s=>{s.forEach((l,u)=>{n[u]&&(n[u].item[n[u].key]=l)}),this.changed.content=!0,this.changed.page=!0,this.item.lang=e}).finally(()=>{this.translating=!1})},translateText(e,t,n=null){return this.translate(e,t,n||this.item.lang)},update(e,t){e==="page"?Object.assign(this.item,t):this[e]=t,this.changed[e]=!0},use(e){Object.assign(this.item,e.data),this.assets=e.files,this.elements=this.elems(e.elements||[]),this.item.content=this.obsolete(this.item.content),this.changed.content=!0,this.changed.page=!0,this.vhistory=!1},validate(){var e,t;return Promise.all([(e=this.$refs.page)==null?void 0:e.validate(),(t=this.$refs.content)==null?void 0:t.validate()].filter(n=>n)).then(n=>n.every(r=>r))},versions(e){return this.auth.can("page:view")?e?this.$apollo.query({query:le`query($id: ID!) {
            page(id: $id) {
              id
              versions {
                ${this.fields()}
              }
            }
          }`,variables:{id:e}}).then(t=>{if(t.errors||!t.data.page)throw t;return(t.data.page.versions||[]).map(n=>{const r={...n,data:Object.assign(JSON.parse(n.data||"{}"),JSON.parse(n.aux||"{}"))};return r.files=this.files(n.files||[]),delete r.aux,r}).reverse()}).catch(t=>{this.messages.add(this.$gettext("Error fetching page versions"),"error"),this.$log("PageDetail::versions(): Error fetching page versions",e,t)}):Promise.resolve([]):(this.messages.add(this.$gettext("Permission denied"),"error"),Promise.resolve([]))}},watch:{asidePage(e){this.aside=e}}},To={class:"app-title"},Ao={class:"menu-content"};function Fo(e,t,n,r,a,i){var f;const s=ee("PageDetailEditor"),l=ee("PageDetailContent"),u=ee("PageDetailItem"),o=ee("AsideMeta"),c=ee("AsideCount"),h=ee("HistoryDialog");return v(),M(ue,null,[y(fr,{elevation:0,density:"compact"},{prepend:m(()=>[y(_,{onClick:t[0]||(t[0]=d=>i.closeView()),title:e.$gettext("Back to list view"),icon:"mdi-keyboard-backspace"},null,8,["title"])]),append:m(()=>[y(ct,null,{activator:m(({props:d})=>[y(_,tt(d,{title:e.$gettext("Translate page"),loading:e.translating,icon:"mdi-translate"}),null,16,["title","loading"])]),default:m(()=>[y(ut,null,{default:m(()=>[(v(!0),M(ue,null,$e(i.txlocales(n.item.lang),d=>(v(),E(H,{key:d.code},{default:m(()=>[y(_,{onClick:k=>i.translatePage(d.code),"prepend-icon":"mdi-arrow-right-thin",variant:"text"},{default:m(()=>[L(I(d.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),y(_,{onClick:t[1]||(t[1]=d=>e.vhistory=!0),class:ce([{hidden:n.item.published&&!i.hasChanged&&!e.latest},"no-rtl"]),title:e.$gettext("View history"),icon:"mdi-history"},null,8,["class","title"]),y(_,{onClick:t[2]||(t[2]=d=>i.save()),title:e.$gettext("Save"),disabled:!i.hasChanged||i.hasError||!r.auth.can("page:save"),variant:!i.hasChanged||i.hasError||!r.auth.can("page:save")?"plain":"flat",class:ce([{active:i.hasChanged&&!i.hasError&&r.auth.can("page:save"),error:i.hasError},"menu-save"]),icon:"mdi-database-arrow-down"},null,8,["title","disabled","variant","class"]),y(ct,{modelValue:e.pubmenu,"onUpdate:modelValue":t[5]||(t[5]=d=>e.pubmenu=d),"close-on-content-click":!1},{activator:m(({props:d})=>[y(_,tt(d,{icon:"",title:e.$gettext("Schedule publishing"),disabled:n.item.published&&!i.hasChanged||i.hasError||!r.auth.can("page:publish"),variant:n.item.published&&!i.hasChanged||i.hasError||!r.auth.can("page:publish")?"plain":"flat",class:[{active:(!n.item.published||i.hasChanged)&&!i.hasError&&r.auth.can("page:publish"),error:i.hasError},"menu-publishat"]}),{default:m(()=>[y(nt,null,{default:m(()=>t[23]||(t[23]=[N("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},[N("path",{d:"M2,1V3H16V1H2 M2,10H6V19H12V10H16L9,3L2,10Z"}),N("path",{d:"M16.7 11.4C16.7 11.4 16.61 11.4 16.7 11.4C13.19 11.49 10.4 14.28 10.4 17.7C10.4 21.21 13.19 24 16.7 24S23 21.21 23 17.7 20.21 11.4 16.7 11.4M16.7 22.2C14.18 22.2 12.2 20.22 12.2 17.7S14.18 13.2 16.7 13.2 21.2 15.18 21.2 17.7 19.22 22.2 16.7 22.2M15.6 13.1V17.6L18.84 19.58L19.56 18.5L16.95 16.97V13.1H15.6Z"})],-1)])),_:1,__:[23]})]),_:2},1040,["title","disabled","variant","class"])]),default:m(()=>[N("div",Ao,[y(di,{modelValue:e.publishAt,"onUpdate:modelValue":t[3]||(t[3]=d=>e.publishAt=d),"hide-header":"","show-adjacent-months":""},null,8,["modelValue"]),y(_,{onClick:t[4]||(t[4]=d=>{i.publish(e.publishAt),e.pubmenu=!1}),disabled:!e.publishAt||i.hasError,color:e.publishAt?"primary":"",variant:"flat"},{default:m(()=>[L(I(e.$gettext("Publish")),1)]),_:1},8,["disabled","color"])])]),_:1},8,["modelValue"]),y(_,{icon:"",onClick:t[6]||(t[6]=d=>i.publish()),title:e.$gettext("Publish"),disabled:n.item.published&&!i.hasChanged||i.hasError||!r.auth.can("page:publish"),variant:n.item.published&&!i.hasChanged||i.hasError||!r.auth.can("page:publish")?"plain":"flat",class:ce([{active:(!n.item.published||i.hasChanged)&&!i.hasError&&r.auth.can("page:publish"),error:i.hasError},"menu-publish"])},{default:m(()=>[y(nt,null,{default:m(()=>t[24]||(t[24]=[N("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},[N("path",{d:"M5,2V4H19V2H5 M5,12H9V21H15V12H19L12,5L5,12Z"})],-1)])),_:1,__:[24]})]),_:1},8,["title","disabled","variant","class"]),y(_,{onClick:t[7]||(t[7]=je(d=>r.drawer.toggle("aside"),["stop"])),title:e.$gettext("Toggle side menu"),icon:r.drawer.aside?"mdi-chevron-right":"mdi-chevron-left"},null,8,["title","icon"])]),default:m(()=>[y(mr,null,{default:m(()=>[N("div",To,I(e.$gettext("Page"))+": "+I(n.item.name),1)]),_:1})]),_:1}),y(pr,{class:"page-details"},{default:m(()=>[y(hi,{onSubmit:t[19]||(t[19]=je(()=>{},["prevent"]))},{default:m(()=>[y(qt,{"fixed-tabs":"",modelValue:e.tab,"onUpdate:modelValue":t[11]||(t[11]=d=>e.tab=d)},{default:m(()=>[y(Ue,{value:"editor",onClick:t[8]||(t[8]=d=>e.aside="")},{default:m(()=>[L(I(e.$gettext("Editor")),1)]),_:1}),y(Ue,{value:"content",class:ce({changed:e.changed.content,error:e.errors.content}),onClick:t[9]||(t[9]=d=>e.aside="count")},{default:m(()=>[L(I(e.$gettext("Content")),1)]),_:1},8,["class"]),y(Ue,{value:"page",class:ce({changed:e.changed.page,error:e.errors.page}),onClick:t[10]||(t[10]=d=>e.aside=e.asidePage)},{default:m(()=>[L(I(e.$gettext("Page")),1)]),_:1},8,["class"])]),_:1},8,["modelValue"]),y(wn,{modelValue:e.tab,"onUpdate:modelValue":t[18]||(t[18]=d=>e.tab=d),touch:!1},{default:m(()=>[y(Xe,{value:"editor"},{default:m(()=>[y(s,{save:{fcn:i.save,count:e.savecnt},item:n.item,assets:e.assets,elements:e.elements,onChange:t[12]||(t[12]=d=>e.changed.content=!0)},null,8,["save","item","assets","elements"])]),_:1}),y(Xe,{value:"content"},{default:m(()=>[y(l,{ref:"content",item:n.item,assets:e.assets,elements:e.elements,onError:t[13]||(t[13]=d=>e.errors.content=d),onChange:t[14]||(t[14]=d=>e.changed.content=!0)},null,8,["item","assets","elements"])]),_:1}),y(Xe,{value:"page"},{default:m(()=>[y(u,{ref:"page",item:n.item,assets:e.assets,"onUpdate:item":t[15]||(t[15]=d=>{Object.assign(n.item,d),e.changed.page=!0}),"onUpdate:aside":t[16]||(t[16]=d=>e.asidePage=d),onError:t[17]||(t[17]=d=>e.errors.page=d)},null,8,["item","assets"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.aside==="meta"?(v(),E(o,{key:0,item:n.item},null,8,["item"])):P("",!0),e.aside==="count"?(v(),E(c,{key:1})):P("",!0),(v(),E(St,{to:"body"},[y(h,{ref:"history",modelValue:e.vhistory,"onUpdate:modelValue":t[20]||(t[20]=d=>e.vhistory=d),current:{data:{cache:n.item.cache,domain:n.item.domain,lang:n.item.lang,name:n.item.name,path:n.item.path,status:n.item.status,title:n.item.title,tag:n.item.tag,to:n.item.to,type:n.item.type,theme:n.item.theme,meta:i.clean(n.item.meta,"meta"),config:i.clean(n.item.config,"config"),content:i.clean(n.item.content,"content")},elements:((f=e.latest)==null?void 0:f.elements)||[],files:i.currentAssets},load:()=>i.versions(n.item.id),onUse:t[21]||(t[21]=d=>i.use(d)),onRevert:t[22]||(t[22]=d=>{i.use(d),i.reset()})},null,8,["modelValue","current","load"])]))],64)}const er=we(_o,[["render",Fo],["__scopeId","data-v-39228197"]]);var Lo=!1,Vo=!0;/*!
 * helper-js v3.1.6
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function Bt(e){return Object.prototype.toString.call(e)==="[object Array]"}function tr(e){return Object.prototype.toString.call(e)==="[object Object]"}function zo(e){return typeof e=="function"}function Bo(e,t){return e<t?e:t}function qr(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function Kr(e){return e[e.length-1]}function No(e){return Bt(e)?e:[e]}function Mo(e,t){let n=new Set(t);const r={};return n.forEach(a=>{r[a]=e[a]}),r}function jo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(tr(e)){const n=Object.keys(e);n.reverse();for(const r of n){const a={value:e[r],key:r};(!t.exclude||!t.exclude(a))&&(yield a)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(tr(e))for(const n of Object.keys(e)){const r={value:e[n],key:n};(!t.exclude||!t.exclude(r))&&(yield r)}else throw"Unsupported type"}()}function Uo(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function Wr(e,t){return Object.keys(t).forEach(n=>{Uo(e,n,t[n])}),e}function Ro(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function De(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=Wr({...n},{childrenKey:"children"});const{childrenKey:r}=n,a=Bt(e)?e:[e];class i{}const s=(l,u,o)=>{n.reverse&&(l=l.slice(),l.reverse());const c=l.length;for(let h=0;h<c;h++){const f=l[h],d=n.reverse?c-h-1:h,k=o?[...o,d]:[];n.childFirst&&f[r]!=null&&s(f[r],f,k);const C=t(f,d,u,k);if(C===!1)throw new i;if(C==="skip children")continue;if(C==="skip siblings")break;n.childFirst||f[r]!=null&&s(f[r],f,k)}};try{s(a,null,Bt(e)?[]:null)}catch(l){if(!(l instanceof i))throw l}}function Ho(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r;return De(e,function(){if(t(...arguments))return r={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),r}function qo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Ho(e,t,n);return r==null?void 0:r.node}function Jr(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:a}=n,i=new hn;return i.childrenKey=r,De(e,(s,l,u,o)=>{let c=Object.assign({},s);c[r]&&(c[r]=[]),a&&(c=a(c,{oldNode:s,index:l,parent:u,path:o})),i.set(o,c)},{childrenKey:r}),i.data}class hn{constructor(){lt(this,"data");lt(this,"childrenKey","children");let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return Bt(n)?n:n[t]}iteratePath(t){var n=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{childrenKey:a,rootChildren:i}=n;if(r.reverse){const s=[...n.iteratePath(t,{...r,reverse:!1})];s.reverse();for(const{path:l,node:u}of s)yield{path:l,node:u}}else{let s=[],l=i;for(const u of t){const o=[...s,u],c=l[u];yield{path:o,node:c},s=o,l=c[a]}}}()}getFamily(t){const n=[];for(const{node:r}of this.iteratePath(t))n.push(r);return n}get(t){return Kr(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),r=n.pop();return{parent:this.get(n),index:r,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:r}=this;let{rootChildren:a}=this;const{parent:i,index:s}=this.getParentAndIndex(t);let l;t.length===1?(a||(this.data?this.data[r]=[]:this.data=[]),l=a):(i[r]||(i[r]=[]),l=i[r]),l[s]=n}}delete(t){const{childrenKey:n,rootChildren:r}=this,{parent:a,index:i}=this.getParentAndIndex(t),s=t.length===1?r:a[n],l=s[i];return s.splice(i,1),l}walk(t,n){const{childrenKey:r,data:a}=this;return De(a,t,r,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Jr(this.data),Ro({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function nr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return zo(e)?e(...t):e}function Ko(e,t){return function(){let r,a;try{r=e(...arguments)}catch(i){a=i}finally{}if(a)throw a;return r}}function vt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let r;const a={};let i=a;return{action:function(){for(var u=arguments.length,o=new Array(u),c=0;c<u;c++)o[c]=arguments[c];if(o.length===0)return i===a&&(i=e()),i;if(r||(r=new Yo),!r.has(o)&&(r.set(o,e(...o)),t.capacity!=null)){n.push(o);const h=n.splice(0,n.length-t.capacity);for(const f of h)r.delete(f)}return r.get(o)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function Wo(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Jo(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function Zt(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,r=t.bottom,a=t.left-document.documentElement.clientLeft,i=t.right,s=t.width||i-a,l=t.height||r-n,c={top:n,right:i,bottom:r,left:a,width:s,height:l,x:a,y:n};t={...c,toJSON:()=>c}}return t}function rr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const a=n.until&&r===n.until;if(a&&!n.withUntil)return;const i=t(r);if(i==="break")return;if(i)return r;if(a)return;r=r.parentElement}}function Nt(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function ir(e,t){for(const n of t)if(Nt(e,n))return!0;return!1}function _e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent(`on${t}`,n,r)}function Te(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent(`on${t}`,n,r)}function Qo(e){let t=[];const n=()=>{if(!a.listening){for(const i of e){_e.apply(this,i);const s=()=>Te.apply(this,i);t.push(s)}a.listening=!0}},a={listening:!1,stop:()=>{if(a.listening){for(const i of t)i();t=[],a.listening=!1}},resume:n,start:n};return a.start(),a}function Mt(e,t){return getComputedStyle(e)[t]}function fn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:a}=n;const{returnNearestIfNoHit:i,maxTimes:s}=n;let l,u;r==null&&(r=0,a=e.length-1);let o=0,c;for(;r>=0&&r<=a;){if(o>=s)throw Error(`binarySearch: loop times is over ${s}, you can increase the limit.`);l=Math.floor((a-r)/2+r),u=e[l];const h=o+1;if(c=t(u,l,h),c>0)a=l-1;else if(c<0)r=l+1;else return{index:l,value:u,count:h,hit:!0};o++}return i?{index:l,value:u,count:o+1,hit:!1,greater:c>0}:null}class Yo{constructor(){lt(this,"_map",new Map);lt(this,"_values",{});lt(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let r=[];for(const a of t){if(!n.has(a))return null;r.push(n.get(a)[0])}return r.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";return n[r][1]}set(t,n){const{_map:r,_values:a}=this;let i=[];for(const s of t){let l,u=1;r.has(s)?([l,u]=r.get(s),u++):(this._objCount++,l=this._objCount.toString()),r.set(s,[l,u]),i.push(l)}a[i.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:r}=this,a=this._keysToString(t);if(a==null)throw"Value not found by specified keys";delete n[a];for(const i of t){let[s,l]=r.get(i);l--,l===0?r.delete(i):r.set(i,[s,l])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[r,a]=t[n];yield[r,a]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const Xo=$t({props:{table:Boolean}}),Qr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n},Zo={key:0},Go={key:1};function eu(e,t,n,r,a,i){return e.table?(v(),M("table",Zo,[he(e.$slots,"prepend"),N("tbody",null,[he(e.$slots,"default")]),he(e.$slots,"append")])):(v(),M("div",Go,[he(e.$slots,"prepend"),he(e.$slots,"default"),he(e.$slots,"append")]))}const tu=Qr(Xo,[["render",eu]]),nu=$t({components:{VirtualListTable:tu},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=gt(0),n=gt(e.firstRender-1),r=xe(()=>{var S;return Bo(n.value,(((S=e.items)==null?void 0:S.length)||1)-1)}),a=gt(0),i=xe(()=>f.value[t.value]?X(t.value):0),s=xe(()=>f.value.length>0?X(f.value.length-1)+Kr(h.value):0),l=xe(()=>f.value[r.value]?s.value-X(r.value)-h.value[r.value]:0),u=xe(()=>e.disabled?{}:{overflow:"auto"}),o=xe(()=>{const S={display:"flex"};return e.disabled||(e.horizontal?Object.assign(S,{"margin-left":i.value+"px","margin-right":l.value+"px",width:s.value-l.value-i.value+"px"}):Object.assign(S,{"margin-top":i.value+"px","margin-bottom":l.value+"px"})),S["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete S.display,delete S["flex-direction"]),S}),c=xe(()=>wt((e.items||[]).map(()=>null))),h=xe(()=>(e.items||[]).map((S,D)=>{var O;if(c[D]!=null)return c[D];let B=(O=e.itemSize)==null?void 0:O.call(e,S,D);return B==null&&(B=a.value),B})),f=xe(()=>{const S=[];return h.value.reduce((D,O)=>(S.push(D),D+O),0),S});an(()=>e.items,j);const d=xe(()=>{if(!e.items||e.disabled)return;const S=[];for(let D=t.value;D<=r.value;D++){const O=e.items[D];if(!O)break;S.push({item:O,index:D})}return S}),k=gt(),C=gt();fi(async()=>{j();try{te()}catch{await Qt(),j()}});let A;function x(){const S=k.value;if(!S)return;const D=W(S);A!=null&&e.buffer-Math.abs(D-A)>=10||(A=D,j())}let z=!1,T=!1;async function j(){var S;if(z){T=!0;return}if(!e.items||e.disabled)return;z=!0;const D=k.value,O=(S=C.value)==null?void 0:S.$el;if(!D||!O)return;a.value||(a.value=fe()),t.value=pe(),n.value=g(),await Qt();let B,ne=0;const Z={},oe=e.table?O.querySelector("tbody").children:O.children;for(let K=0;K<oe.length;K++){const p=oe[K],re=Mt(p,"position");if(re&&["absolute","fixed"].includes(re))continue;const de=Mt(p,"display")!=="none"?w(p):0,se=p.getAttribute("vt-index"),Pe=se?parseInt(se):t.value+ne;Z[Pe]=(Z[Pe]||0)+de,ne++}for(const K of Object.keys(Z)){const p=parseInt(K);c.value[p]!==Z[p]&&(c.value[p]=Z[p],B=!0)}B&&await Qt(),z=!1,T&&(T=!1,j());function pe(){const K=W(D)-Y(D)-e.buffer;return fn(f.value,p=>p-K,{returnNearestIfNoHit:!0}).index}function g(){const K=W(D)-Y(D)+Q(D)+e.buffer;return fn(f.value,p=>p-K,{returnNearestIfNoHit:!0}).index}function fe(){const K=[],p=e.table?O.querySelector("tbody").children:O.children;for(let re=0;re<p.length;re++){const de=p[re],se=getComputedStyle(de);if(["absolute","fixed"].includes(se.position))continue;const Pe=w(de);if(K.push(Pe),K.length>=10)break}return K.length===0?0:K.reduce((re,de)=>re+de,0)/K.length}}function Q(S){const D=getComputedStyle(S);let O=parseFloat(e.horizontal?D.width:D.height);return D.boxSizing==="border-box"&&(e.horizontal?O=O-parseFloat(D.borderLeftWidth)-parseFloat(D.borderRightWidth):O=O-parseFloat(D.borderTopWidth)-parseFloat(D.borderBottomWidth)),O}function w(S){let D=Q(S);const O=getComputedStyle(S);return e.horizontal?D+=parseFloat(O.borderLeftWidth)+parseFloat(O.borderRightWidth)+parseFloat(O.marginLeft)+parseFloat(O.marginRight):D+=parseFloat(O.borderTopWidth)+parseFloat(O.borderBottomWidth)+parseFloat(O.marginTop)+parseFloat(O.marginBottom),D=Number.isNaN(D)?0:D,D}function W(S){return e.horizontal?S.scrollLeft:S.scrollTop}function Y(S){const D=getComputedStyle(S);return e.horizontal?parseFloat(D.paddingLeft):parseFloat(D.paddingTop)}function X(S){return f.value[S]}function te(){const S=k.value;new ResizeObserver(D=>{for(let O of D)if(Nt(O.target,"vtlist")){j();break}}).observe(S)}function V(S,D){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return D;if(typeof e.itemKey=="function")return e.itemKey(S,D)}}return{listElRef:k,listInnerRef:C,onscroll:x,listStyle:u,listInnerStyle:o,visibleItemsInfo:d,getItemKey:V,update:j,sizes:h,positions:f,runtimeSizes:c}}});function ru(e,t,n,r,a,i){const s=ee("VirtualListTable");return v(),M("div",{class:"vtlist",ref:"listElRef",style:Ge(e.listStyle),onScrollPassive:t[0]||(t[0]=(...l)=>e.onscroll&&e.onscroll(...l))},[y(s,{class:"vtlist-inner",ref:"listInnerRef",style:Ge(e.listInnerStyle),table:e.table},{prepend:m(()=>[he(e.$slots,"prepend")]),append:m(()=>[he(e.$slots,"append")]),default:m(()=>[e.disabled?(v(!0),M(ue,{key:0},$e(e.items,(l,u)=>he(e.$slots,"default",{key:e.getItemKey(l,u),item:l,index:u})),128)):(v(!0),M(ue,{key:1},$e(e.visibleItemsInfo,({item:l,index:u})=>he(e.$slots,"default",{key:e.getItemKey(l,u),item:l,index:u})),128))]),_:3},8,["style","table"])],36)}const iu=Qr(nu,[["render",ru]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Ye="children";function au(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={...su,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:i,childrenKey:s}=this,l=new hn([]);this._statsMap=new Map,De(i,(o,c,h,f)=>{const d=this.statHandler({...ar(),data:o,open:!!this.defaultOpen,parent:l.getParent(f),children:[],level:f.length});this._statsMap.set(o,d),l.set(f,d)},{childrenKey:s});const u=[];l.walk(o=>{u.push(o)}),this.stats=this.statsHandler(l.rootChildren),this.statsFlat=this.statsFlatHandler(u),this.initialized=!0},getStat(i){let s=this._statsMap.get(i);if(!s)throw new sr("Stat not found");return s},has(i){if(i.isStat)return this.statsFlat.indexOf(i)>-1;try{return!!this.getStat(i)}catch(s){if(s instanceof sr)return!1;throw s}},_getPathByStat(i){if(i==null)return[];const l=this.getSiblings(i).indexOf(i);return[...i.parent?this._getPathByStat(i.parent):[],l]},afterOneCheckChanged(i){const{checked:s}=i;if(i._ignoreCheckedOnce)return delete i._ignoreCheckedOnce,!1;const l=u=>{const{parent:o}=u;if(o){let c,h,f;for(const k of o.children)k.checked?c=!0:k.checked===0?f=!0:h=!0;const d=f?0:h?c?0:!1:!0;o.checked!==d&&(this._ignoreCheckedOnce(o),o.checked=d),l(o)}};return l(i),De(i.children,u=>{u.checked!==s&&(this._ignoreCheckedOnce(u),u.checked=s)},{childrenKey:Ye}),!0},_ignoreCheckedOnce(i){i._ignoreCheckedOnce=!0,setTimeout(()=>{i._ignoreCheckedOnce&&(i._ignoreCheckedOnce=!1)},100)},isVisible(i){const s=i.isStat?i:this.getStat(i),l=u=>!u||!u.hidden&&u.open&&l(u.parent);return!!(!s.hidden&&l(s.parent))},updateCheck(){De(this.stats,i=>{if(i.children&&i.children.length>0){const s=i.children.every(l=>l.checked);i.checked!==s&&(this._ignoreCheckedOnce(i),i.checked=s)}},{childFirst:!0,childrenKey:Ye})},getChecked(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(s=>s.checked||i&&s.checked===0)},getUnchecked(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(s=>i?!s.checked:s.checked===!1)},openAll(){for(const i of this.statsFlat)i.open=!0},closeAll(){for(const i of this.statsFlat)i.open=!1},openNodeAndParents(i){const s=i.isStat?i:this.getStat(i);for(const l of this.iterateParent(s,{withSelf:!0}))l.open=!0},_calcFlatIndex(i,s){let l=i?this.statsFlat.indexOf(i)+1:0;const u=i?i.children:this.stats;for(let o=0;o<s;o++)l+=this._count(u[o]);return l},add(i,s,l){if(this.has(i))throw"Can't add because data exists in tree";const u=s?s.children:this.stats;l==null&&(l=u.length);const o=this.statHandler({...ar(),open:!!this.defaultOpen,data:i,parent:s||null,children:[],level:s?s.level+1:1});this._setPosition(o,s||null,l);const c=i[this.childrenKey];if(c){const h=c.slice();for(const f of h)this.add(f,o)}},remove(i){const s=this.getSiblings(i);if(s.includes(i)){qr(s,i);const l=this._flat(i);this.statsFlat.splice(this.statsFlat.indexOf(i),l.length);for(const u of l)this._statsMap.delete(u.data);return this.afterRemoveStat(i),!0}return!1},getSiblings(i){const{parent:s}=i;return s?s.children:this.stats},_setPosition(i,s,l){(s?s.children:this.stats).splice(l,0,i),i.parent=s,i.level=s?s.level+1:1;const o=this._calcFlatIndex(s,l),c=this._flat(i);this.statsFlat.splice(o,0,...c);for(const h of c)this._statsMap.has(h.data)||this._statsMap.set(h.data,h);De(i,(h,f,d)=>{d&&(h.level=d.level+1)},{childrenKey:Ye}),this.afterSetStat(i,s,l)},*iterateParent(i,s){let l=s!=null&&s.withSelf?i:i.parent;for(;l;)yield l,l=l.parent},move(i,s,l){if(this.has(i)){if(i.parent===s&&this.getSiblings(i).indexOf(i)===l)return!1;if(i===s)throw new Error("Can't move node to it self");if(s&&i.level<s.level){let u;for(const o of this.iterateParent(s))if(o.level===i.level){u=o;break}if(i===u)throw new Error("Can't move node to its descendant")}this.remove(i)}return this._setPosition(i,s,l),!0},_flat(i){const s=[];return De(i,l=>{s.push(l)},{childrenKey:Ye}),s},_count(i){return this._flat(i).length},getData(i,s){const{childrenKey:l}=this,u=new hn([]);return u.childrenKey=l,De(s||this.stats,(o,c,h,f)=>{let d={...o.data,[l]:[]};i&&(d=i(d)),u.set(f,d)},{childrenKey:Ye}),u.data}},a=r;return r.noInitialization||a.init(),a}const su={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function ar(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class sr extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Ot={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},Gt={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,r){const{args:a,mouseArgs:i,touchArgs:s}=lr(r),l=this._getStore(e),u=this,o=function(c){let h;if(u.isTouch(c))h={x:c.changedTouches[0].pageX,y:c.changedTouches[0].pageY,pageX:c.changedTouches[0].pageX,pageY:c.changedTouches[0].pageY,clientX:c.changedTouches[0].clientX,clientY:c.changedTouches[0].clientY,screenX:c.changedTouches[0].screenX,screenY:c.changedTouches[0].screenY};else if(h={x:c.pageX,y:c.pageY,pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,screenX:c.screenX,screenY:c.screenY},t==="start"&&c.which!==1)return;return n.call(this,c,h)};l.push({handler:n,wrapper:o}),_e.call(null,e,Ot[t][0],o,...a,...i),_e.call(null,e,Ot[t][1],o,...a,...s)},off(e,t,n,r){const{args:a,mouseArgs:i}=lr(r),s=this._getStore(e);for(let l=s.length-1;l>=0;l--){const{handler:u,wrapper:o}=s[l];n===u&&(Te.call(null,e,Ot[t][0],o,...a,...i),Te.call(null,e,Ot[t][1],o,...a,...i),s.splice(l,1))}}};function lr(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],r=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:r}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const en=new Map,ze={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},be=ze;function kt(e){e.dataTransfer&&(e.dataTransfer.dropEffect=be.dropEffect)}function lu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(en.has(e))throw"Already registered on specified element";const n={...t},r=n;Wr(n,ou),Gt.on(e,"start",a,{touchArgs:[{passive:!0}]}),Gt.on(e,"end",i);function a(h){var f;const d=h.target;d.nodeType===Node.ELEMENT_NODE&&(be.triggerElement=d);const k=d;if(n.ingoreHTMLTags&&k.tagName&&n.ingoreHTMLTags.find(A=>A.toUpperCase()===k.tagName))return;const C=(f=n.beforeDragStart)===null||f===void 0?void 0:f.call(n,h);C&&(C.setAttribute("draggable","true"),be.dragElement=C)}function i(h){be.dragElement&&be.dragElement.removeAttribute("draggable")}function s(h){var f;be.internal=!0,(f=n.onDragStart)===null||f===void 0||f.call(n,h),kt(h)}function l(h){var f;(f=n.onDrag)===null||f===void 0||f.call(n,h),kt(h)}function u(h){var f;(f=n.onDragEnd)===null||f===void 0||f.call(n,h),be.internal=!1,be.dragElement&&be.dragElement.removeAttribute("draggable"),be.triggerElement=null,be.dragElement=null,be.dropEffect="none"}const o=cu(e,{onDragLeave(h){var f;(f=n.onDragLeave)===null||f===void 0||f.call(n,h),kt(h)},onDragEnter(h){var f;r.ifPreventDefault(h)&&h.preventDefault(),(f=n.onDragEnter)===null||f===void 0||f.call(n,h),kt(h)},onDragOver(h){var f;r.ifPreventDefault(h)&&h.preventDefault(),(f=n.onDragOver)===null||f===void 0||f.call(n,h),kt(h)},onDrop(h){var f;r.ifPreventDefault(h)&&h.preventDefault(),(f=n.onDrop)===null||f===void 0||f.call(n,h)},onEnter(h){var f;(f=n.onEnter)===null||f===void 0||f.call(n,h)},onLeave(h){var f;(f=n.onLeave)===null||f===void 0||f.call(n,h)}});return _e(e,"dragstart",s),_e(e,"drag",l),_e(e,"dragend",u),Object.assign(n,{root:e,destroy:()=>{Gt.off(e,"start",a,{touchArgs:[{passive:!0}]}),Te(e,"dragstart",s),Te(e,"drag",l),Te(e,"dragend",u),o(),en.delete(e)}}),en.set(e,r),r}const ou={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return ze.dragElement?!0:be.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let jt=null;const uu=e=>{jt=e,setTimeout(()=>{jt=null},20)};function cu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let r=!1;const a=d=>{var k;r=!0,(k=t.onEnter)===null||k===void 0||k.call(t,d),c.resume()},i=d=>{var k;uu(d.target),(k=t.onDragEnter)===null||k===void 0||k.call(t,d),r||a(d)},s=d=>{var k;r||a(d),(k=t.onDragOver)===null||k===void 0||k.call(t,d)},l=d=>{var k;(k=t.onDragLeave)===null||k===void 0||k.call(t,d);const C=function(){var x;let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d;r=!1,(x=t.onLeave)===null||x===void 0||x.call(t,z),c.stop()},A=jt;jt=null,A&&Jo(A,n)||C()},u=d=>{var k;(k=t.onDrop)===null||k===void 0||k.call(t,d)},o=d=>{var k;d instanceof KeyboardEvent&&d.key!=="Escape"||(r=!1,c.stop(),(k=t.onEndBeforeLeave)===null||k===void 0||k.call(t,d))},c=Qo([[e,"drop",o],[window,"mouseup",o],[window,"touchend",o],[window,"keydown",o]]);c.stop();const h=()=>{_e(e,"dragenter",i),_e(e,"dragover",s),_e(e,"dragleave",l),_e(e,"drop",u)},f=()=>{Te(e,"dragenter",i),Te(e,"dragover",s),Te(e,"dragleave",l),Te(e,"drop",u),c.stop()};return h(),f}/*!
 * @he-tree/vue v2.9.3
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */let Ut=!1;const du=()=>{Ut=!0,setTimeout(()=>{Ut=!1},100)},hu=$t({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=xe(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));an(()=>e.stat.checked,i=>{Ut||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),an(()=>e.stat.open,i=>{Ut||(t(i?"open":"close",e.stat),du())});const r=xe(()=>{const i=[],s=c=>{var h;if(c.parent){let f=(h=c.parent)==null?void 0:h.children.indexOf(c);do{f++;let d=c.parent.children[f];if(d){if(!d.hidden)return!0}else break}while(!0)}return!1},l=e.rtl?"right":"left",u=e.btt?"top":"bottom";let o=e.stat;for(;o;){let c=(o.level-2)*e.indent+e.treeLineOffset;const h=s(o),f=()=>{i.push({style:{[l]:c+"px",[u]:h?0:"50%"}})};o===e.stat?o.level>1&&f():h&&f(),o=o.parent}return i}),a=xe(()=>{let i=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:i+"px"}});return{indentStyle:n,vLines:r,hLineStyle:a}}}),Yr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n},fu={class:"tree-node-inner"},pu={key:1,class:"tree-node",ref:"el"};function mu(e,t,n,r,a,i){return e.table?(v(),M("tr",pu,[he(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(v(),M("div",{key:0,class:ce(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:Ge(e.indentStyle),ref:"el"},[e.treeLine?(v(),M(ue,{key:0},[(v(!0),M(ue,null,$e(e.vLines,s=>(v(),M("div",{class:"tree-line tree-vline",style:Ge(s.style)},null,4))),256)),e.stat.level>1?(v(),M("div",{key:0,class:"tree-line tree-hline",style:Ge(e.hLineStyle)},null,4)):P("",!0)],64)):P("",!0),N("div",fu,[he(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}const gu=Yr(hu,[["render",mu]]);function yu(e,t={}){const n={...t,statHandler(r){return this._statHandler2&&(r=this._statHandler2(r)),tn(t.statHandler,wt(r))},statsHandler(r){return tn(t.statsHandler,wt(r))},statsFlatHandler(r){return tn(t.statsFlatHandler,wt(r))}};return au(e,n)}function tn(e,t){return e?e(t):t}const vu=$t({components:{VirtualList:iu,TreeNode:gu},props:{value:{required:Lo,type:Array},modelValue:{required:Vo,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>yu([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(r=>t(r))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:nn(ve("getStat")),has:nn(ve("has")),updateCheck:ve("updateCheck"),getChecked:ve("getChecked"),getUnchecked:ve("getUnchecked"),openAll:ve("openAll"),closeAll:ve("closeAll"),openNodeAndParents:ve("openNodeAndParents"),isVisible:ve("isVisible"),move:or("move"),add:nn(or("add")),addMulti(e,t,n){this.batchUpdate(()=>{let r=n;for(const a of e)this.add(a,t,r),r!=null&&r++})},remove:ve("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:ve("iterateParent"),getSiblings:ve("getSiblings"),getData:ve("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:r}=this;return n[r]||(n[r]=[]),n[r]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,r,a)=>{const{childrenKey:i,updateBehavior:s}=this;let l=this.valueComputed;if(s==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(s==="modify"){const u=t(r==null?void 0:r.data);u.includes(n.data)||u.splice(a,0,n.data)}this.batchUpdateWaiting||this._updateValue(l)},e.afterRemoveStat=n=>{var r;const{childrenKey:a,updateBehavior:i}=this;let s=this.valueComputed;if(i==="new"){if(this.batchUpdateWaiting)return;s=this.getData()}else if(i==="modify"){const l=t((r=n.parent)==null?void 0:r.data);qr(l,n.data)}this.batchUpdateWaiting||this._updateValue(s)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,Mo(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function ve(e){return function(...t){return this.processor[e](...t)}}function or(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function nn(e){return function(t,...n){return t&&(t=wt(t)),e.call(this,t,...n)}}const ku={key:0,class:"drag-placeholder he-tree-drag-placeholder"},bu=["colspan"],xu={class:"drag-placeholder he-tree-drag-placeholder"};function wu(e,t,n,r,a,i){const s=ee("TreeNode"),l=ee("VirtualList");return v(),E(l,{class:ce(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:m(()=>[he(e.$slots,"prepend",{tree:e.self})]),default:m(({item:u,index:o})=>[y(s,{"vt-index":o,class:ce([u.class,{"drag-placeholder-wrapper":u.data===e.placeholderData,"dragging-node":u===e.dragNode}]),style:Ge(u.style),stat:u,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:c=>e.$emit("click:node",u),onOpen:t[0]||(t[0]=c=>e.$emit("open:node",c)),onClose:t[1]||(t[1]=c=>e.$emit("close:node",c)),onCheck:t[2]||(t[2]=c=>e.$emit("check:node",c))},{default:m(({indentStyle:c})=>[u.data===e.placeholderData?(v(),M(ue,{key:0},[e.table?(v(),M("td",{key:1,style:Ge(c),colspan:e.placeholderColspan},[N("div",xu,[he(e.$slots,"placeholder",{tree:e.self})])],12,bu)):(v(),M("div",ku,[he(e.$slots,"placeholder",{tree:e.self})]))],64)):he(e.$slots,"default",{key:1,node:u.data,stat:u,indentStyle:c,tree:e.self},()=>[L(I(u.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:m(()=>[he(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}const Cu=Yr(vu,[["render",wu]]);let U=null,F=null,Ft,xt,Qe,_t,rn,ke,ur;const bt={get startInfo(){return Ft},get targetInfo(){return xt}},Su=$t({extends:Cu,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return nr(this.rootDroppable,[this,U]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return nr((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(o,c)=>{let h=!0;return U&&U!==this&&(h=h&&this._isMoved),this.table&&!this._isDragCopy&&(h=h&&this._isDragCopy),h&&(o.x!==c.x||o.y!==c.y)},t=(o,c)=>{F.ignoreUpdate(()=>{if(!F.has(F.placeholderData)){if(F.table){let f=0;const d=F.getRootEl().querySelector("tr");if(d)for(const{value:k}of jo(d.children))Mt(k,"display")!=="none"&&(f+=k.colSpan||1);f<1&&(f=1),F.placeholderColspan=f}F.add(F.placeholderData)}const h=F.getStat(F.placeholderData);F.move(h,o,c)})},n=()=>{const o=this;if(o.has(o.placeholderData))return o.remove(o.getStat(o.placeholderData)),!0},r=o=>{o?ze.dropEffect=U!=null&&U.dragCopy?"copy":"move":ze.dropEffect="none"},a=o=>{const c=this;o?r(!0):c.keepPlaceholder?c.has(c.placeholderData)||r(!1):(n(),r(!1))};let i={x:0,y:0};const s=this.getRootEl();let l=null;const u=()=>{F!=null&&F.has(F.placeholderData)&&F.ignoreUpdate(()=>{F.remove(F.getStat(F.placeholderData)),U&&(U.dragNode.hidden=!1,U.dragOvering=!1)})};this.treeDraggableInstance=lu(s,{beforeDragStart:o=>{if(!ze.triggerElement)return;let c=this.triggerClass;(!c||c.length===0)&&(c="tree-node");let h=No(c),f=rr(ze.triggerElement,d=>{if(ir(d,h))return!0;if(Nt(d,"tree-node"))return"break"},{withSelf:!0,until:s});if(l=rr(f,d=>{if(Nt(d,"tree-node"))return!0},{withSelf:!0,until:s}),!!l){if(ke=this.getNodeByElement(l),!ke)throw"Can't find drag node";if(this.isDraggable(ke))return this.$emit("before-drag-start",ke),this.$emit("beforeDragStart",ke),s}},onDragStart:o=>{var c,h,f;if(!l||!ke)return;{const{x:C,y:A}=l.getBoundingClientRect(),{clientX:x,clientY:z}=o;(c=o.dataTransfer)==null||c.setDragImage(l,x-C,z-A)}rn={x:o.clientX,y:o.clientY},U=this,U.dragNode=ke,_t=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:o.clientX,y:o.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(l);{let C,A=0;if(this.table){let x=l.getBoundingClientRect();C={x:x.x,y:x.y},this.rtl&&(C.x=x.right),A=x.height}else if(!this.rtl)C=l.children[0].getBoundingClientRect().toJSON(),A=C.height;else{const x=l.children[0].getBoundingClientRect();C={x:x.right,y:x.y},A=x.height}return this.btt&&(C.y+=A),C}})(),this.dragOvering=!0;const d=U.getSiblings(U.dragNode),k=d.indexOf(ke);Ft={tree:U,dragNode:ke,parent:ke.parent,siblings:d,indexBeforeDrop:k},F=this,(h=o.dataTransfer)==null||h.setData("text",`he-tree drag start at ${new Date().toISOString()}`),U._eachDroppable()||setTimeout(()=>{ke.hidden=!0,t(ke.parent,k+1)},0),(f=this.ondragstart)==null||f.call(this,o)},onEnter:o=>{this.$emit("enter",o)},onLeave:o=>{Qe=null,this.dragOvering=!1,ze.preventDefault=!1,n(),this.$emit("leave",o)},onDragOver:Ko(o=>{if(!U){if(!this.onExternalDragOver||this.onExternalDragOver(o)===!1)return;ze.preventDefault=!0}const c={x:o.clientX,y:o.clientY},h=e(c,i);if(i=c,!h)return;this.dragOvering=!0,F=this;const f=_t?{x:_t.x+(c.x-rn.x),y:_t.y+(c.y-rn.y)}:{...c},{btt:d,rtl:k}=F;if(F.disableDrop){ze.dropEffect="none";return}let C,A;const x=F.getRootEl().querySelectorAll(".tree-node"),z=[];x.forEach(O=>{!ir(O,["drag-placeholder-wrapper","dragging-node"])&&Mt(O,"display")!=="none"&&z.push(O)});const T=fn(z,O=>Zt(O)[d?"bottom":"top"]-f.y,{returnNearestIfNoHit:!0});let j=null,Q,w;T.hit||(T.greater?d||(j=T.index-1,z[j]||j++):d&&(j=T.index+1,z[j]||j--)),j==null&&(j=T.index),Q=z[j],w=d?z[j-1]:z[j+1],C=Q&&F.getNodeByElement(Q),A=w&&F.getNodeByElement(w);const{indent:W}=F,Y=vt(()=>{if(F.table){let O=Zt(Q).toJSON();const B=W*(C.level-1);return k?(O.width-=B,O.right-=B):O.x+=B,O}else return Zt(Q.firstElementChild)}).action,X=vt(()=>d?f.y>Y().y+Y().height/2:f.y<Y().y+Y().height/2).action,te=vt(()=>d?!Q||j===z.length-1&&X():!Q||j===0&&X()).action,V=vt(()=>k?f.x-(Y().x+Y().width):Y().x-f.x).action,S=vt(()=>k?f.x<Y().x+Y().width-W:f.x>Y().x+W).action;let D;if(te())D=1,C=null;else if(C)V()>0?D=C.level-Math.ceil(V()/W):S()?D=C.level+1:D=C.level;else return;A&&D<A.level&&(D=A.level),(async()=>{let O,B,ne=!1,Z=null;const oe=async K=>{if(K.open)return!0;if(F.dragOpen)if(F.dragOpenDelay)if(Z=K,Qe===K)ne=!0;else{let p=Wo();Qe=K;const re=K;return setTimeout(async()=>{re!==Qe?(ne=!0,p.resolve(!0)):(F.beforeDragOpen&&await F.beforeDragOpen(K),re!==Qe?(ne=!0,p.resolve(!0)):(K.open=!0,Z=null,p.resolve(!0)))},F.dragOpenDelay),await p.promise}else return F.beforeDragOpen&&await F.beforeDragOpen(K),K.open=!0,!0;else return!1},pe=async()=>{if(F.isDroppable(C)&&await oe(C)){if(ne)return;O=C,B=null}else return!1},g=(K=D)=>{let p=C,re=[];for(;p&&p.level>=K;)p=p.parent||null,re.unshift(p);let de=0;for(const se of re){if(F.isDroppable(se))return O=se,B=re[de+1]||C,!0;de++}return!1};ur=C||null,C?D>C.level?await pe()===!1&&g(C.level):g()===!1&&await pe():F.isDroppable(null)&&(O=null),Qe=Z;const fe=!!(!ne&&(O||O===null));return{cancelled:ne,success:fe,parent:O,index:fe?B?(O?O.children:F.stats).filter(K=>K.data!==F.placeholderData).indexOf(B)+1:0:-1}})().then(O=>{if(!O.cancelled){if(!O.success){a(!1);return}if(F.maxLevel!=null&&F.maxLevel>0){let B=1;if(U){const ne=U.dragNode;let Z=0;De(ne,oe=>{oe.level>Z&&(Z=oe.level)},{childrenKey:Ye}),B=Z-ne.level+1}if(B+(O.parent?O.parent.level:0)>F.maxLevel){a(!1);return}}a(!0),t(O.parent,O.index)}})}),onDrop:o=>{F=this;const c=!U;if(!F)return;const h=U==null?void 0:U.dragNode;let f,d=(()=>{var k;let C=!0;if(!F.has(F.placeholderData))C=!1;else if(c)f=(k=this.externalDataHandler)==null?void 0:k.call(this,o),C=f!=null;else if(!U.dragCopy){const A=F.getStat(F.placeholderData);U===F&&A.parent===h.parent&&qo(h,x=>x===A)}return C})();if(d){const k=F.getStat(F.placeholderData),C=F.getSiblings(k);xt={tree:F,dragNode:h,parent:k.parent,siblings:C,indexBeforeDrop:C.indexOf(k)}}(()=>{if(u(),d){let k=xt.indexBeforeDrop;U&&!U.dragCopy&&U===F&&Ft.parent==xt.parent&&Ft.indexBeforeDrop<k&&k--,U&&U!==F&&!U._eachDroppable()&&U.batchUpdate(()=>{U.remove(h),U.updateCheck()}),F.batchUpdate(()=>{let C=U==null?void 0:U.dragNode,A;f?A=f:U._eachDroppable()&&(A=Jr(U.dragNode.data,{childrenKey:U.childrenKey}),U.dragCopyDataHandler&&(A=U.dragCopyDataHandler(A))),A&&(F.add(A),C=F.getStat(A)),F.move(C,xt.parent,k),F.updateCheck()})}F.$emit("after-drop"),d&&(U&&(U.dragCopy||U.$emit("change")),F!==U&&F.$emit("change"))})()},onDragEnd:o=>{u(),U&&(U.dragNode&&(U.dragNode.hidden=!1),U.dragNode=null,U.dragOvering=!1,U=null),F=null,Qe=null,ke=null,ur=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}}),Eu={components:{Draggable:Su},props:{embed:{type:Boolean,default:!1},filter:{type:Object,default:()=>({})}},emits:["select"],inject:["debounce"],data(){return{menu:{},items:[],loading:!0,checked:null,clip:null,term:""}},setup(){const e=bn(),t=rt(),n=He();return{app:xn(),auth:n,languages:e,messages:t}},created(){this.searchd=this.debounce(this.search,500),this.fetch().then(e=>{this.items=e.data,this.loading=!1})},mounted(){this.checked=!1},computed:{canTrash(){var e;return this.isChecked&&((e=this.$refs.tree)==null?void 0:e.statsFlat.some(t=>t._checked&&!t.data.deleted_at))},isChecked(){var e;return this.checked||((e=this.$refs.tree)==null?void 0:e.statsFlat.some(t=>t._checked))},isTrashed(){var e;return this.isChecked&&((e=this.$refs.tree)==null?void 0:e.statsFlat.some(t=>t._checked&&t.data.deleted_at))}},methods:{add(){if(this.embed||!this.auth.can("page:add")){this.messages.add(this.$gettext("Permission denied"),"error");return}const e=this.create();this.$apollo.mutate({mutation:le`mutation ($input: PageInput!) {
            addPage(input: $input) {
              id
            }
          }`,variables:{input:e}}).then(t=>{if(t.errors)throw t.errors;if(!t.data.addPage)throw new Error("No data in addPage mutation result");const n={...t.data.addPage};this.$refs.tree.add(n),this.$emit("select",n)}).catch(t=>{this.messages.add(this.$gettext("Error adding root page"),"error"),this.$log("PageList::add(): Error adding root page",t)})},change(){if(!this.auth.can("page:move")){this.messages.add(this.$gettext("Permission denied"),"error");return}const e=bt.targetInfo.parent,n=bt.targetInfo.siblings[bt.targetInfo.indexBeforeDrop+1]||null;this.$apollo.mutate({mutation:le`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:bt.startInfo.dragNode.data.id,parent:e?e.data.id:null,ref:n?n.data.id:null}}).then(r=>{if(r.errors)throw r.errors;const a=bt.startInfo.parent;a!=null&&a.data&&!(a!=null&&a.children.length)&&(a.data.has=!1),e&&(e.data.has=!0)}).catch(r=>{this.messages.add(this.$gettext("Error moving page"),"error"),this.$log("PageList::change(): Error moving page",r)})},copy(e,t){this.clip={type:"copy",node:t,stat:e}},create(e={}){return Object.assign({path:"_"+Math.floor(Math.random()*1e4),lang:this.$vuetify.locale.current||this.languages.default(),status:0,cache:5},e)},cut(e,t){this.$refs.tree.statsFlat.forEach(n=>{delete n.cut}),e.cut=!0,this.clip={type:"cut",node:t,stat:e}},drop(e){if(!this.auth.can("page:drop")){this.messages.add(this.$gettext("Permission denied"),"error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>{var r;return n._checked&&((r=n.data)==null?void 0:r.id)});t.length&&this.$apollo.mutate({mutation:le`mutation ($id: [ID!]!) {
            dropPage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id)}}).then(n=>{if(n.errors)throw n.errors;for(const r of t)this.update(r,a=>{a.data.deleted_at=new Date().toISOString().replace(/T/," ").substring(0,19),a.check=!1});this.invalidate()}).catch(n=>{this.messages.add(this.$gettext("Error trashing page"),"error"),this.$log("PageList::drop(): Error trashing page",t,n)})},fetch(e=null,t=1,n=100){if(!this.auth.can("page:view"))return this.messages.add(this.$gettext("Permission denied"),"error"),Promise.resolve([]);const r=this.filter.publish||null,a=this.filter.trashed||"WITHOUT",i={...this.filter};return delete i.trashed,delete i.publish,delete i.view,i.parent_id=e,this.$apollo.query({query:le`query($filter: PageFilter, $limit: Int!, $page: Int!, $trashed: Trashed, $publish: Publish) {
            pages(filter: $filter, first: $limit, page: $page, trashed: $trashed, publish: $publish) {
              data {
                ${this.fields()}
              }
              paginatorInfo {
                currentPage
                lastPage
              }
            }
          }`,variables:{filter:i,page:t,limit:n,trashed:a,publish:r}}).then(s=>{if(s.errors)throw s.errors;return this.transform(s.data.pages)}).catch(s=>{this.messages.add(this.$gettext("Error fetching pages"),"error"),this.$log("PageList::fetch(): Error fetching page",e,t,n,s)})},fields(){return`id
          parent_id
          created_at
          deleted_at
          editor
          has
          latest {
            id
            published
            publish_at
            data
            editor
            created_at
          }`},insert(e,t=null){if(!this.auth.can("page:add")){this.messages.add(this.$gettext("Permission denied"),"error");return}const n=this.$refs.tree.getSiblings(e),r=t!==null?e.parent:e,a=n.indexOf(e),i=this.create();let s=null;switch(t===null&&!e.open&&this.load(e,e.data),t){case 0:s=e.data.id;break;case null:s=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:s=n[a+1]?n[a+1].data.id:null;break}this.$apollo.mutate({mutation:le`mutation ($input: PageInput!, $parent: ID, $ref: ID) {
            addPage(input: $input, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{input:i,parent:r?r.data.id:null,ref:s}}).then(l=>{if(l.errors)throw l.errors;i.id=l.data.addPage.id,(t!==null||e.open)&&this.$refs.tree.add(i,r,t!==null?a+t:0),r&&(r.data.has=!0),this.invalidate()}).catch(l=>{this.messages.add(this.$gettext("Error inserting page"),"error"),this.$log("PageList::insert(): Error inserting page",l)})},invalidate(){const e=this.$apollo.provider.defaultClient.cache;e.evict({id:"ROOT_QUERY",fieldName:"pages"}),e.gc()},keep(e){if(!this.auth.can("page:keep")){this.messages.add(this.$gettext("Permission denied"),"error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(a=>a._checked&&a.data.id&&a.data.deleted_at),n=t.filter(a=>t.indexOf(a.parent)===-1),r=e.data.deleted_at||null;n.length&&this.$apollo.mutate({mutation:le`mutation ($id: [ID!]!) {
            keepPage(id: $id) {
              id
            }
          }`,variables:{id:n.map(a=>a.data.id)}}).then(a=>{if(a.errors)throw a.errors;for(const i of n)this.update(i,s=>{r>=s.data.deleted_at&&(s.data.deleted_at=null,s.check=!1)});this.invalidate()}).catch(a=>{this.messages.add(this.$gettext("Error restoring page"),"error"),this.$log("PageList::keep(): Error restoring page",n,a)})},load(e,t){!e.open&&!t.children&&(e.loading=!0,this.fetch(t.id,e.page?e.page+1:1).then(n=>{this.$refs.tree.addMulti(n.data,e,0),e.page=n.currentPage||1}).finally(()=>{e.loading=!1})),e.open=!e.open},move(e,t=null){if(!this.auth.can("page:move")){this.messages.add(this.$gettext("Permission denied"),"error");return}const n=this.$refs.tree.getSiblings(e),r=t!==null?e.parent:e,a=n.indexOf(e);let i=null;switch(t){case 0:i=e.data.id;break;case null:i=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:i=n[a+1]?n[a+1].data.id:null;break}this.$apollo.mutate({mutation:le`mutation ($id: ID!, $parent: ID, $ref: ID) {
            movePage(id: $id, parent: $parent, ref: $ref) {
              id
            }
          }`,variables:{id:this.clip.node.id,parent:r?r.data.id:null,ref:i}}).then(s=>{var u;if(s.errors)throw s.errors;const l=t!==null?a<this.$refs.tree.getSiblings(e).indexOf(this.clip.stat)?a+t:a:0;this.$refs.tree.move(this.clip.stat,r,l),r&&((u=this.clip.stat.children)!=null&&u.length||(e.parent.data.has=!1),r.data.has=!0),this.invalidate()}).catch(s=>{this.messages.add(this.$gettext("Error moving page"),"error"),this.$log("PageList::move(): Error moving page",e,t,s)}),this.show()},paste(e,t=null){if(!this.auth.can("page:add")){this.messages.add(this.$gettext("Permission denied"),"error");return}const n=this.$refs.tree.getSiblings(e),r=t!==null?e.parent:e,a=n.indexOf(e),i={...this.clip.node};let s=null;switch(t){case 0:s=e.data.id;break;case null:s=e.children&&e.children[0]?e.children[0].data.id:null;break;case 1:s=n[a+1]?n[a+1].data.id:null;break}return this.$apollo.query({query:le`query($id: ID!) {
            page(id: $id) {
              meta
              config
              content
              files {
                id
              }
              elements {
                id
              }
            }
          }`,variables:{id:i.id}}).then(l=>{var u,o,c,h,f,d,k,C,A,x;if(l.errors)throw l.errors;this.$apollo.mutate({mutation:le`mutation ($input: PageInput!, $parent: ID, $ref: ID, $elements: [ID!], $files: [ID!]) {
              addPage(input: $input, parent: $parent, ref: $ref, elements: $elements, files: $files) {
                ${this.fields()}
              }
            }`,variables:{input:{status:0,to:i.to,tag:i.tag,type:i.type,theme:i.theme,lang:i.lang,name:i.name,title:i.title,cache:i.cache,domain:i.domain,related_id:i.id,meta:((o=(u=l==null?void 0:l.data)==null?void 0:u.page)==null?void 0:o.meta)||"{}",config:((h=(c=l==null?void 0:l.data)==null?void 0:c.page)==null?void 0:h.config)||"{}",content:((d=(f=l==null?void 0:l.data)==null?void 0:f.page)==null?void 0:d.content)||"[]",path:i.path+"_"+Math.floor(Math.random()*1e4)},parent:r?r.data.id:null,ref:s,elements:((C=(k=l==null?void 0:l.data)==null?void 0:k.page)==null?void 0:C.elements.map(z=>z.id))||[],files:((x=(A=l==null?void 0:l.data)==null?void 0:A.page)==null?void 0:x.files.map(z=>z.id))||[]}}).then(z=>{if(z.errors)throw z.errors;if(!z.data.addPage)throw new Error("No page data returned");const T=t!==null?this.$refs.tree.getSiblings(e).indexOf(e)+t:0,j=z.data.addPage;this.$refs.tree.add(j,r,T),this.invalidate()}).catch(z=>{this.messages.add(this.$gettext("Error copying page"),"error"),this.$log("PageList::paste(): Error copying page",e,t,z)})}).catch(l=>{this.messages.add(this.$gettext("Error fetching page"),"error"),this.$log("PageList::paste(): Error fetching page",i.id,l)})},publish(e){if(!this.auth.can("page:publish")){this.messages.add(this.$gettext("Permission denied"),"error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>n._checked&&n.data.id&&!n.data.published);t.length&&this.$apollo.mutate({mutation:le`mutation ($id: [ID!]!) {
            pubPage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id)}}).then(n=>{if(n.errors)throw n.errors;for(const r of t)r.data.published=!0,r.check=!1;this.invalidate()}).catch(n=>{this.messages.add(this.$gettext("Error publishing page"),"error"),this.$log("PageList::publish(): Error publishing page",t,n)})},purge(e){if(!this.auth.can("page:purge")){this.messages.add(this.$gettext("Permission denied"),"error");return}const t=e?[e]:this.$refs.tree.statsFlat.filter(n=>n._checked&&n.data.id);t.length&&this.$apollo.mutate({mutation:le`mutation ($id: [ID!]!) {
            purgePage(id: $id) {
              id
            }
          }`,variables:{id:t.map(n=>n.data.id).reverse()}}).then(n=>{var r;if(n.errors)throw n.errors;for(const a of t)this.$refs.tree.remove(a),a.parent&&!((r=a.parent.children)!=null&&r.length)&&(a.parent.data.has=!1)}).catch(n=>{this.messages.add(this.$gettext("Error purging page"),"error"),this.$log("PageList::purge(): Error purging page",t,n)})},reload(e=!0){if(this.items=[],this.loading=!0,e){const n=this.$apollo.provider.defaultClient.cache;n.evict({id:"ROOT_QUERY",fieldName:"pages"}),n.gc()}(this.filter.view==="list"?this.search():this.fetch()).then(n=>{this.items=(n==null?void 0:n.data)||[],this.loading=!1})},search(e=1,t=100){if(!this.auth.can("page:view"))return this.messages.add(this.$gettext("Permission denied"),"error"),Promise.resolve([]);const n=this.filter.publish||null,r=this.filter.trashed||"WITHOUT",a={...this.filter};return delete a.trashed,delete a.publish,delete a.view,this.term&&(a.any=this.term),this.$apollo.query({query:le`query($filter: PageFilter, $limit: Int!, $page: Int!, $trashed: Trashed, $publish: Publish) {
            pages(filter: $filter, first: $limit, page: $page, trashed: $trashed, publish: $publish) {
              data {
                ${this.fields()}
              }
              paginatorInfo {
                currentPage
                lastPage
              }
            }
          }`,variables:{filter:a,page:e,limit:t,trashed:r,publish:n}}).then(i=>{if(i.errors)throw i.errors;return this.transform(i.data.pages)}).catch(i=>{this.messages.add(this.$gettext("Error searching pages"),"error"),this.$log("PageList::search(): Error searching pages",e,t,i)})},show(e=null){e===null?this.menu={}:this.menu[e]?this.menu[e]=!1:(this.menu={},this.menu[e]=!0)},status(e,t){if(!this.auth.can("page:save")){this.messages.add(this.$gettext("Permission denied"),"error");return}(e?[e]:this.$refs.tree.statsFlat.filter(r=>r._checked&&r.data.id)).forEach(r=>{this.$apollo.mutate({mutation:le`mutation ($id: ID!, $input: PageInput!) {
              savePage(id: $id, input: $input) {
                id
              }
            }`,variables:{id:r.data.id,input:{status:t}}}).then(a=>{if(a.errors)throw a.errors;r.data.status=t}).catch(a=>{this.messages.add(this.$gettext("Error saving page"),"error"),this.$log("PageList::status(): Error saving page",r,t,a)})})},title(e){const t=[];return e.publish_at&&t.push("Publish at: "+new Date(e.publish_at).toLocaleDateString()),e.theme&&t.push("Theme: "+e.theme),e.type&&t.push("Page type: "+e.type),e.tag&&t.push("Tag: "+e.tag),e.cache&&t.push("Cache: "+e.cache+" min"),t.join(`
`)},toggle(){this.$refs.tree.statsFlat.forEach(e=>{e._checked=!e._checked})},transform(e){return{data:e.data.map(n=>{var a,i,s,l,u;const r=(a=n.latest)!=null&&a.data?JSON.parse(n.latest.data):{...n};return Object.assign(r,{id:n.id,has:n.has,parent_id:n.parent_id,deleted_at:n.deleted_at,created_at:n.created_at,updated_at:((i=n.latest)==null?void 0:i.created_at)||n.updated_at,editor:((s=n.latest)==null?void 0:s.editor)||n.editor,published:((l=n.latest)==null?void 0:l.published)??!0,publish_at:((u=n.latest)==null?void 0:u.publish_at)||null,latest:n.latest})}),currentPage:e.paginatorInfo.currentPage,lastPage:e.paginatorInfo.lastPage}},update(e,t){var n;if(typeof t!="function")throw new Error("Second paramter must be a function");t(e),(n=e.children)==null||n.forEach(r=>{t(r,t)})},url(e){return this.app.urlpage.replace(/_domain_/,e.domain||"").replace(/_path_/,e.path||"").replace(/\/+$/,"")}},watch:{filter:{deep:!0,handler(e){this.items=[],this.loading=!0,(e.view==="list"?this.search():this.fetch()).then(n=>{this.items=n.data,this.loading=!1})}},term:{handler(){this.reload(!1)}}}},Iu={class:"header"},$u={class:"bulk"},Pu={class:"search"},Du={class:"actions"},Ou={key:0,class:"spinner",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_u=["title"],Tu=["onClick"],Au={class:"item-head"},Fu={key:0,class:"item-lang"},Lu={class:"item-title"},Vu={key:0,class:"item-subtitle"},zu=["href"],Bu={class:"item-domain"},Nu={class:"item-path item-subtitle"},Mu={key:0,class:"item-to item-subtitle"},ju={key:0,class:"loading"},Uu={key:1,class:"notfound"},Ru={key:2,class:"btn-group"};function Hu(e,t,n,r,a,i){const s=ee("Draggable");return v(),M(ue,null,[N("div",Iu,[N("div",$u,[y(Lt,{modelValue:a.checked,"onUpdate:modelValue":t[0]||(t[0]=l=>a.checked=l),onClick:t[1]||(t[1]=je(l=>i.toggle(),["stop"]))},null,8,["modelValue"]),y(ct,{location:"bottom left"},{activator:m(({props:l})=>[y(_,tt({"append-icon":"mdi-menu-down",variant:"text"},l,{disabled:!i.isChecked}),{default:m(()=>[L(I(e.$gettext("Actions")),1)]),_:2},1040,["disabled"])]),default:m(()=>[y(ut,null,{default:m(()=>[i.isChecked&&r.auth.can("page:publish")?(v(),E(H,{key:0},{default:m(()=>[y(_,{"prepend-icon":"mdi-publish",variant:"text",onClick:t[2]||(t[2]=l=>i.publish())},{default:m(()=>[L(I(e.$gettext("Publish")),1)]),_:1})]),_:1})):P("",!0),i.isChecked&&r.auth.can("page:save")?(v(),E(H,{key:1},{default:m(()=>[y(_,{"prepend-icon":"mdi-eye",variant:"text",onClick:t[3]||(t[3]=l=>i.status(null,1))},{default:m(()=>[L(I(e.$gettext("Enable")),1)]),_:1})]),_:1})):P("",!0),i.isChecked&&r.auth.can("page:save")?(v(),E(H,{key:2},{default:m(()=>[y(_,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:t[4]||(t[4]=l=>i.status(null,0))},{default:m(()=>[L(I(e.$gettext("Disable")),1)]),_:1})]),_:1})):P("",!0),y(Ze),i.canTrash&&r.auth.can("page:drop")?(v(),E(H,{key:3},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete",variant:"text",onClick:t[5]||(t[5]=l=>i.drop())},{default:m(()=>[L(I(e.$gettext("Delete")),1)]),_:1})]),_:1})):P("",!0),i.isTrashed&&r.auth.can("page:keep")?(v(),E(H,{key:4},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:t[6]||(t[6]=l=>i.keep())},{default:m(()=>[L(I(e.$gettext("Restore")),1)]),_:1})]),_:1})):P("",!0),i.isChecked&&r.auth.can("page:purge")?(v(),E(H,{key:5},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:t[7]||(t[7]=l=>i.purge())},{default:m(()=>[L(I(e.$gettext("Purge")),1)]),_:1})]),_:1})):P("",!0)]),_:1})]),_:1})]),N("div",Pu,[y(Me,{modelValue:a.term,"onUpdate:modelValue":t[8]||(t[8]=l=>a.term=l),label:e.$gettext("Search for"),"prepend-inner-icon":"mdi-magnify",variant:"underlined","hide-details":"",clearable:""},null,8,["modelValue","label"])]),y(_,{onClick:t[9]||(t[9]=l=>i.reload()),title:e.$gettext("Reload page tree"),icon:"mdi-refresh",variant:"flat",class:"no-rtl"},null,8,["title"])]),y(s,{ref:"tree",modelValue:a.items,"onUpdate:modelValue":t[13]||(t[13]=l=>a.items=l),onChange:t[14]||(t[14]=l=>i.change()),defaultOpen:!1,disableDrag:!r.auth.can("page:move"),rtl:e.$vuetify.locale.isRtl,watermark:!1,virtualization:""},{default:m(({node:l,stat:u})=>[N("div",Du,[u.loading?(v(),M("svg",Ou,t[16]||(t[16]=[N("circle",{class:"spin1",cx:"4",cy:"12",r:"3"},null,-1),N("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"},null,-1),N("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"},null,-1)]))):(v(),E(_,{key:1,onClick:o=>i.load(u,l),class:ce({hidden:!l.has}),icon:u.open?"mdi-menu-down":"mdi-menu-right",title:e.$gettext("Toggle child nodes"),variant:"flat"},null,8,["onClick","class","icon","title"])),y(Lt,{modelValue:u._checked,"onUpdate:modelValue":o=>u._checked=o,class:ce({draft:!l.published})},null,8,["modelValue","onUpdate:modelValue","class"]),l.id?(v(),E(ct,{key:2},{activator:m(({props:o})=>[y(_,tt(o,{title:e.$gettext("Actions"),icon:"mdi-dots-vertical",variant:"text"}),null,16,["title"])]),default:m(()=>[y(ut,null,{default:m(()=>[!l.deleted_at&&!l.published&&r.auth.can("page:publish")?(v(),E(H,{key:0},{default:m(()=>[y(_,{"prepend-icon":"mdi-publish",variant:"text",onClick:o=>i.publish(u)},{default:m(()=>[L(I(e.$gettext("Publish")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),l.status!==0&&r.auth.can("page:save")?(v(),E(H,{key:1},{default:m(()=>[y(_,{"prepend-icon":"mdi-eye-off",variant:"text",onClick:o=>i.status(u,0)},{default:m(()=>[L(I(e.$gettext("Disable")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),l.status!==1&&r.auth.can("page:save")?(v(),E(H,{key:2},{default:m(()=>[y(_,{"prepend-icon":"mdi-eye",variant:"text",onClick:o=>i.status(u,1)},{default:m(()=>[L(I(e.$gettext("Enable")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),l.status!==2&&r.auth.can("page:save")?(v(),E(H,{key:3},{default:m(()=>[y(_,{"prepend-icon":"mdi-eye-off-outline",variant:"text",onClick:o=>i.status(u,2)},{default:m(()=>[L(I(e.$gettext("Hide")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),y(Ze),r.auth.can("page:move")?(v(),E(H,{key:4},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-cut",variant:"text",onClick:o=>i.cut(u,l)},{default:m(()=>[L(I(e.$gettext("Cut")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),!this.embed&&r.auth.can("page:add")?(v(),E(H,{key:5},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-copy",variant:"text",onClick:o=>i.copy(u,l)},{default:m(()=>[L(I(e.$gettext("Copy")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="copy"&&!this.embed&&r.auth.can("page:add")?(v(),E(H,{key:6},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[10]||(t[10]=je(o=>i.show("paste"),["stop"]))},{default:m(()=>[L(I(e.$gettext("Paste")),1)]),_:1})]),_:1})):P("",!0),a.clip&&a.clip.type=="copy"&&a.menu.paste&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:7},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-up",variant:"text",onClick:o=>i.paste(u,0),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Before")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="copy"&&a.menu.paste&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:8},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-right",variant:"text",onClick:o=>i.paste(u),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Into")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="copy"&&a.menu.paste&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:9},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-down",variant:"text",onClick:o=>i.paste(u,1),class:"subitem"},{default:m(()=>[L(I(e.$gettext("After")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="cut"&&r.auth.can("page:move")?(v(),E(H,{key:10},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[11]||(t[11]=je(o=>i.show("move"),["stop"]))},{default:m(()=>[L(I(e.$gettext("Paste")),1)]),_:1})]),_:1})):P("",!0),a.clip&&a.clip.type=="cut"&&a.menu.move&&r.auth.can("page:move")?(v(),E(Ve,{key:11},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-up",variant:"text",onClick:o=>i.move(u,0),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Before")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="cut"&&a.menu.move&&r.auth.can("page:move")?(v(),E(Ve,{key:12},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-right",variant:"text",onClick:o=>i.move(u),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Into")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.clip&&a.clip.type=="cut"&&a.menu.move&&r.auth.can("page:move")?(v(),E(Ve,{key:13},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-down",variant:"text",onClick:o=>i.move(u,1),class:"subitem"},{default:m(()=>[L(I(e.$gettext("After")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),!this.embed&&r.auth.can("page:add")?(v(),E(H,{key:14},{default:m(()=>[y(_,{"prepend-icon":"mdi-content-paste",variant:"text",onClick:t[12]||(t[12]=je(o=>i.show("insert"),["stop"]))},{default:m(()=>[L(I(e.$gettext("Insert")),1)]),_:1})]),_:1})):P("",!0),a.menu.insert&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:15},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-up",variant:"text",onClick:o=>i.insert(u,0),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Before")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.menu.insert&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:16},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-right",variant:"text",onClick:o=>i.insert(u),class:"subitem"},{default:m(()=>[L(I(e.$gettext("Into")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),a.menu.insert&&!this.embed&&r.auth.can("page:add")?(v(),E(Ve,{key:17},{default:m(()=>[y(H,null,{default:m(()=>[y(_,{"prepend-icon":"mdi-arrow-down",variant:"text",onClick:o=>i.insert(u,1),class:"subitem"},{default:m(()=>[L(I(e.$gettext("After")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):P("",!0),y(Ze),!l.deleted_at&&r.auth.can("page:drop")?(v(),E(H,{key:18},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete",variant:"text",onClick:o=>i.drop(u)},{default:m(()=>[L(I(e.$gettext("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),l.deleted_at&&r.auth.can("page:keep")?(v(),E(H,{key:19},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete-restore",variant:"text",onClick:o=>i.keep(u)},{default:m(()=>[L(I(e.$gettext("Restore")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0),r.auth.can("page:purge")?(v(),E(H,{key:20},{default:m(()=>[y(_,{"prepend-icon":"mdi-delete-forever",variant:"text",onClick:o=>i.purge(u)},{default:m(()=>[L(I(e.$gettext("Purge")),1)]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024)):P("",!0)]),N("div",{class:ce(["item-content",{"status-hidden":l.status==2,"status-enabled":l.status==1,"status-disabled":!l.status,trashed:l.deleted_at,cut:u.cut}]),title:i.title(l)},[N("div",{class:"item-text",onClick:o=>e.$emit("select",l)},[N("div",Au,[l.lang?(v(),M("span",Fu,I(l.lang),1)):P("",!0),l.publish_at?(v(),E(nt,{key:1,class:"publish-at",icon:"mdi-clock-outline"})):P("",!0),l.status>1?(v(),E(nt,{key:2,class:"item-status",icon:"mdi-eye-off-outline"})):P("",!0),N("span",Lu,I(l.name||e.$gettext("New")),1)]),l.title?(v(),M("div",Vu,I(l.title),1)):P("",!0)],8,Tu),N("a",{class:"item-aux",href:i.url(l),target:"_blank",draggable:"false"},[N("div",Bu,I(l.domain),1),N("span",Nu,I(i.url(l)),1),l.to?(v(),M("span",Mu," â "+I(l.to),1)):P("",!0)],8,zu)],10,_u)]),_:1},8,["modelValue","disableDrag","rtl"]),a.loading?(v(),M("p",ju,[L(I(e.$gettext("Loading"))+" ",1),t[17]||(t[17]=N("svg",{class:"spinner",width:"32",height:"32",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[N("circle",{class:"spin1",cx:"4",cy:"12",r:"3"}),N("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"}),N("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"})],-1))])):P("",!0),!a.loading&&!a.items.length?(v(),M("p",Uu,I(e.$gettext("No entries found")),1)):P("",!0),!a.loading&&!a.items.length&&!this.embed&&this.auth.can("page:add")?(v(),M("div",Ru,[y(_,{onClick:t[15]||(t[15]=l=>i.add()),title:e.$gettext("Add page"),icon:"mdi-folder-plus",color:"primary",variant:"flat"},null,8,["title"])])):P("",!0)],64)}const qu=we(Eu,[["render",Hu]]),Ku={components:{PageListItems:qu,PageDetail:er,Navigation:yi,AsideList:gi,User:mi},inject:["locales","openView"],data:()=>({chat:"",response:"",help:!1,short:!0,sending:!1,filter:{view:"tree",trashed:"WITHOUT",publish:null,status:null,editor:null,cache:null,lang:null}}),setup(){const e=rt(),t=pn();return{auth:He(),drawer:t,messages:e}},computed:{message(){if(!this.response)return this.chat;const e=this.response.indexOf(`
---
`);return this.short?this.$pgettext("ai",this.response.slice(0,e)):this.response.substring(e>0?e+5:0)}},methods:{languages(){const e=[{title:this.$gettext("All"),icon:"mdi-playlist-check",value:{lang:null}}];for(const t of this.locales())e.push({title:t.title,icon:"mdi-translate",value:{lang:t.value}});return e},open(e){this.openView(er,{item:e})},same(e,t){if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(a=>e[a]===t[a])},send(){const e=this.chat.trim();this.chat&&(this.sending=!0,this.$apollo.mutate({mutation:le`mutation($prompt: String!) {
            manage(prompt: $prompt)
          }`,variables:{prompt:e}}).then(t=>{var r,a;if(t.errors)throw t;this.response=((r=t.data)==null?void 0:r.manage)||"",this.chat=this.message;const n={view:"list",publish:"DRAFT",trashed:"WITHOUT",editor:(a=this.auth.me)==null?void 0:a.email,cache:null,lang:null,status:0};this.same(n,this.filter)?this.$refs.pagelist.reload():this.filter=n,this.sending=null}).catch(t=>{this.messages.add(this.$gettext("Error sending request"),"error"),this.$log("PageList::send(): Error sending request",t)}).finally(()=>{setTimeout(()=>{this.sending=!1},3e3)}))}}},Wu={key:0,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ju={key:1,class:"spinner",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Qu={key:2,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Yu={key:0,class:"help"};function Xu(e,t,n,r,a,i){var c;const s=ee("User"),l=ee("Navigation"),u=ee("PageListItems"),o=ee("AsideList");return v(),M(ue,null,[y(fr,{elevation:0,density:"compact"},{prepend:m(()=>[y(_,{onClick:t[0]||(t[0]=h=>r.drawer.toggle("nav")),title:r.drawer.nav?e.$gettext("Close navigation"):e.$gettext("Open navigation"),icon:r.drawer.nav?"mdi-close":"mdi-menu"},null,8,["title","icon"])]),append:m(()=>[y(s),y(_,{onClick:t[1]||(t[1]=h=>r.drawer.toggle("aside")),title:e.$gettext("Toggle side menu"),icon:r.drawer.aside?"mdi-chevron-right":"mdi-chevron-left"},null,8,["title","icon"])]),default:m(()=>[y(mr,null,{default:m(()=>[L(I(e.$gettext("Pages")),1)]),_:1})]),_:1}),y(l),y(pr,{class:"page-list"},{default:m(()=>[y(dt,null,{default:m(()=>[y(ht,{class:"box scroll"},{default:m(()=>[y(pi,{modelValue:e.chat,"onUpdate:modelValue":t[4]||(t[4]=h=>e.chat=h),loading:e.sending,placeholder:e.$gettext("Describe the page and content you want to create"),onDblclick:t[5]||(t[5]=h=>{e.short=!e.short,e.chat=i.message}),variant:"outlined",class:"prompt",rounded:"lg","hide-details":"",autofocus:"","auto-grow":"",clearable:"",outlined:"",rows:"1"},{prepend:m(()=>[y(nt,{onClick:t[2]||(t[2]=h=>e.help=!e.help)},{default:m(()=>t[8]||(t[8]=[N("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[N("path",{d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"})],-1)])),_:1,__:[8]})]),append:m(()=>[y(nt,{onClick:t[3]||(t[3]=h=>e.sending||i.send())},{default:m(()=>[e.sending===!1?(v(),M("svg",Wu,t[9]||(t[9]=[N("path",{d:"M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M6,13H14L10.5,16.5L11.92,17.92L17.84,12L11.92,6.08L10.5,7.5L14,11H6V13Z"},null,-1)]))):P("",!0),e.sending===!0?(v(),M("svg",Ju,t[10]||(t[10]=[N("circle",{class:"spin1",cx:"4",cy:"12",r:"3"},null,-1),N("circle",{class:"spin1 spin2",cx:"12",cy:"12",r:"3"},null,-1),N("circle",{class:"spin1 spin3",cx:"20",cy:"12",r:"3"},null,-1)]))):P("",!0),e.sending===null?(v(),M("svg",Qu,t[11]||(t[11]=[N("path",{d:"M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"},null,-1)]))):P("",!0)]),_:1})]),_:1},8,["modelValue","loading","placeholder"]),e.help?(v(),M("div",Yu,[N("ul",null,[N("li",null,I(e.$gettext("AI can create a page and content based on your input and add it to the page tree")),1),N("li",null,I(e.$gettext("Double click on the response in the input field to display full response")),1)])])):P("",!0),y(u,{ref:"pagelist",onSelect:t[6]||(t[6]=h=>i.open(h)),filter:e.filter},null,8,["filter"])]),_:1})]),_:1})]),_:1}),y(o,{filter:e.filter,"onUpdate:filter":t[7]||(t[7]=h=>e.filter=h),content:[{key:"view",title:e.$gettext("view"),items:[{title:e.$gettext("Tree"),icon:"mdi-file-tree",value:{view:"tree"}},{title:e.$gettext("List"),icon:"mdi-format-list-bulleted-square",value:{view:"list"}}]},{key:"publish",title:e.$gettext("publish"),items:[{title:e.$gettext("All"),icon:"mdi-playlist-check",value:{publish:null}},{title:e.$gettext("Published"),icon:"mdi-publish",value:{publish:"PUBLISHED"}},{title:e.$gettext("Scheduled"),icon:"mdi-clock-outline",value:{publish:"SCHEDULED"}},{title:e.$gettext("Drafts"),icon:"mdi-pencil",value:{publish:"DRAFT"}}]},{key:"trashed",title:e.$gettext("trashed"),items:[{title:e.$gettext("All"),icon:"mdi-playlist-check",value:{trashed:"WITH"}},{title:e.$gettext("Available only"),icon:"mdi-delete-off",value:{trashed:"WITHOUT"}},{title:e.$gettext("Only trashed"),icon:"mdi-delete",value:{trashed:"ONLY"}}]},{key:"status",title:e.$gettext("status"),items:[{title:e.$gettext("All"),icon:"mdi-playlist-check",value:{status:null}},{title:e.$gettext("Enabled"),icon:"mdi-eye",value:{status:1}},{title:e.$gettext("Hidden"),icon:"mdi-eye-off-outline",value:{status:2}},{title:e.$gettext("Disabled"),icon:"mdi-eye-off",value:{status:0}}]},{key:"cache",title:e.$gettext("cache"),items:[{title:e.$gettext("All"),icon:"mdi-playlist-check",value:{cache:null}},{title:e.$gettext("No cache"),icon:"mdi-clock-alert-outline",value:{cache:0}}]},{key:"editor",title:e.$gettext("editor"),items:[{title:e.$gettext("All"),icon:"mdi-playlist-check",value:{editor:null}},{title:e.$gettext("Edited by me"),icon:"mdi-account",value:{editor:(c=this.auth.me)==null?void 0:c.email}}]},{key:"lang",title:e.$gettext("languages"),items:i.languages()}]},null,8,["filter","content"])],64)}const ic=we(Ku,[["render",Xu],["__scopeId","data-v-a8a55f3e"]]);export{ic as default};
