import g from"./File-vQMwaf4t.js";import{F as B}from"./FileAiDialog-CuiIYiL8.js";import{_ as I,c as V,a as t,b as r,w as i,V as p,r as k,T as $,F as N,o as a,d as m,e as n,f as F,n as E,g as L,a0 as R,h as f,i as y,j as T,k as j,l as s,t as d}from"../index.js";import"./FileListItems-D_JnwgFC.js";import"./utils-25EARmsx.js";import"./FileDialog-eFu3VDT6.js";const M={extends:g,components:{FileAiDialog:B},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((v,C)=>{const u=new Image;u.onload=v,u.onerror=C,u.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(v=>(console.error(v),!1))}}},O=["title"],P={class:"menu-overlay"},S={key:1,class:"file"};function z(e,l,v,C,u,w){const b=k("FileDialog"),D=k("FileAiDialog"),A=k("FileUrlDialog");return a(),V(N,null,[t(p,null,{default:i(()=>[t(n,{cols:"12",md:"6"},{default:i(()=>[F("div",{class:E(["files",{readonly:e.readonly}])},[e.file.id?(a(),V("div",{key:0,class:"file",onClick:l[3]||(l[3]=o=>e.open(e.file)),title:e.$gettext("Edit file")},[e.file.uploading?(a(),r(L,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):m("",!0),e.file.path?(a(),r(R,{key:1,srcset:e.srcset(e.file.previews),src:e.url(e.file.path),draggable:!1},null,8,["srcset","src"])):m("",!0),e.readonly?m("",!0):(a(),r(f,{key:2,onClick:l[0]||(l[0]=y(o=>e.menu=!e.menu,["stop"])),title:e.$gettext("Open menu"),icon:"mdi-dots-vertical",class:"btn-overlay",variant:"flat"},null,8,["title"])),e.menu?(a(),r(T,{key:3},{activator:i(({props:o})=>[F("div",P,[t(f,{onClick:l[1]||(l[1]=y(U=>e.open(e.file),["stop"])),title:e.$gettext("Edit file"),icon:"mdi-pencil",variant:"flat"},null,8,["title"]),t(f,{onClick:l[2]||(l[2]=y(U=>e.remove(),["stop"])),title:e.$gettext("Remove file"),icon:"mdi-trash-can",variant:"flat"},null,8,["title"])])]),_:1})):m("",!0)],8,O)):e.readonly?m("",!0):(a(),V("div",S,[e.auth.can("file:view")?(a(),r(f,{key:0,onClick:l[4]||(l[4]=o=>e.vfiles=!0),title:e.$gettext("Add file"),icon:"mdi-button-cursor",variant:"flat"},null,8,["title"])):m("",!0),t(f,{onClick:l[5]||(l[5]=o=>e.vurls=!0),title:e.$gettext("Add file from URL"),icon:"mdi-link-variant-plus",variant:"flat"},null,8,["title"]),t(f,{onClick:l[6]||(l[6]=o=>u.vcreate=!0),title:e.$gettext("Create file"),icon:"mdi-creation",variant:"flat"},null,8,["title"]),t(f,{title:e.$gettext("Upload file"),icon:"mdi-upload",variant:"flat"},{default:i(()=>[t(j,{modelValue:e.selected,"onUpdate:modelValue":[l[7]||(l[7]=o=>e.selected=o),l[8]||(l[8]=o=>e.add(o))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1},8,["title"])]))],2)]),_:1}),e.file.path?(a(),r(n,{key:0,cols:"12",md:"6",class:"meta"},{default:i(()=>[t(p,null,{default:i(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:i(()=>[s(d(e.$gettext("name"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:i(()=>[s(d(e.file.name),1)]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:i(()=>[s(d(e.$gettext("description"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:i(()=>[s(d(e.description),1)]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:i(()=>[s(d(e.$gettext("mime"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:i(()=>[s(d(e.file.mime),1)]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:i(()=>[s(d(e.$gettext("editor"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:i(()=>[s(d(e.file.editor),1)]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:i(()=>[s(d(e.$gettext("updated"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:i(()=>[s(d(new Date(e.file.updated_at).toLocaleString()),1)]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1}),(a(),r($,{to:"body"},[t(b,{modelValue:e.vfiles,"onUpdate:modelValue":l[9]||(l[9]=o=>e.vfiles=o),onAdd:l[10]||(l[10]=o=>{w.handle(o),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(a(),r($,{to:"body"},[t(D,{modelValue:u.vcreate,"onUpdate:modelValue":l[11]||(l[11]=o=>u.vcreate=o),onAdd:l[12]||(l[12]=o=>{e.select(o),u.vcreate=!1}),context:e.context},null,8,["modelValue","context"])])),(a(),r($,{to:"body"},[t(A,{modelValue:e.vurls,"onUpdate:modelValue":l[13]||(l[13]=o=>e.vurls=o),onAdd:l[14]||(l[14]=o=>{e.select(o),e.vurls=!1})},null,8,["modelValue"])]))],64)}const W=I(M,[["render",z],["__scopeId","data-v-c45dac6b"]]);export{W as default};
