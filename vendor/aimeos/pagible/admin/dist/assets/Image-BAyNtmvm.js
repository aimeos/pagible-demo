import g from"./File-DmaBx5Rn.js";import{F as A}from"./FileAiDialog-CMpgiEBP.js";import{_ as U,c as V,a as t,b as r,w as o,V as p,r as k,T as $,F as I,o as i,d as m,e as n,f as B,n as L,g as N,a1 as E,h as P,i as R,j as C,k as f,l as s,t as d,m as T,p as j}from"../index.js";import"./FileListItems-BHj5RakU.js";import"./utils-DqEg1I0W.js";import"./FileDialog-CWVfhhpc.js";const O={extends:g,components:{FileAiDialog:A},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((v,y)=>{const u=new Image;u.onload=v,u.onerror=y,u.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(v=>(console.error(v),!1))}}},S=["title"],z={key:1,class:"file"};function M(e,l,v,y,u,F){const w=k("FileDialog"),D=k("FileAiDialog"),b=k("FileUrlDialog");return i(),V(I,null,[t(p,null,{default:o(()=>[t(n,{cols:"12",md:"6"},{default:o(()=>[B("div",{class:L(["files",{readonly:e.readonly}])},[e.file.id?(i(),V("div",{key:0,class:"file",onClick:l[2]||(l[2]=a=>e.open(e.file)),title:e.$gettext("Edit")},[e.file.uploading?(i(),r(N,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):m("",!0),e.file.path?(i(),r(E,{key:1,srcset:e.srcset(e.file.previews),src:e.url(e.file.path),draggable:!1},null,8,["srcset","src"])):m("",!0),e.file.id&&!e.readonly?(i(),r(P,{key:2},{activator:o(({props:a})=>[t(f,T(a,{title:e.$gettext("Open menu"),icon:"mdi-dots-vertical",class:"btn-overlay",variant:"text",elevation:"0"}),null,16,["title"])]),default:o(()=>[t(R,null,{default:o(()=>[e.auth.can("file:view")?(i(),r(C,{key:0},{default:o(()=>[t(f,{onClick:l[0]||(l[0]=a=>e.open(e.file)),"prepend-icon":"mdi-pencil",variant:"text",elevation:"0"},{default:o(()=>[s(d(e.$gettext("Edit")),1)]),_:1})]),_:1})):m("",!0),t(C,null,{default:o(()=>[t(f,{onClick:l[1]||(l[1]=a=>e.remove()),"prepend-icon":"mdi-trash-can",variant:"text",elevation:"0"},{default:o(()=>[s(d(e.$gettext("Remove")),1)]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0)],8,S)):e.readonly?m("",!0):(i(),V("div",z,[e.auth.can("file:view")?(i(),r(f,{key:0,onClick:l[3]||(l[3]=a=>e.vfiles=!0),title:e.$gettext("Add file"),icon:"mdi-button-cursor",variant:"text",elevation:"0"},null,8,["title"])):m("",!0),t(f,{onClick:l[4]||(l[4]=a=>e.vurls=!0),title:e.$gettext("Add file from URL"),icon:"mdi-link-variant-plus",variant:"text",elevation:"0"},null,8,["title"]),t(f,{onClick:l[5]||(l[5]=a=>u.vcreate=!0),title:e.$gettext("Create file"),icon:"mdi-creation",variant:"text",elevation:"0"},null,8,["title"]),t(f,{title:e.$gettext("Upload file"),icon:"mdi-upload",variant:"text",elevation:"0"},{default:o(()=>[t(j,{modelValue:e.selected,"onUpdate:modelValue":[l[6]||(l[6]=a=>e.selected=a),l[7]||(l[7]=a=>e.add(a))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1},8,["title"])]))],2)]),_:1}),e.file.path?(i(),r(n,{key:0,cols:"12",md:"6",class:"meta"},{default:o(()=>[t(p,null,{default:o(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:o(()=>[s(d(e.$gettext("name"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:o(()=>[s(d(e.file.name),1)]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:o(()=>[s(d(e.$gettext("description"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:o(()=>[s(d(e.description),1)]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:o(()=>[s(d(e.$gettext("mime"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:o(()=>[s(d(e.file.mime),1)]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:o(()=>[s(d(e.$gettext("editor"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:o(()=>[s(d(e.file.editor),1)]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:o(()=>[s(d(e.$gettext("updated"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:o(()=>[s(d(new Date(e.file.updated_at).toLocaleString()),1)]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1}),(i(),r($,{to:"body"},[t(w,{modelValue:e.vfiles,"onUpdate:modelValue":l[8]||(l[8]=a=>e.vfiles=a),onAdd:l[9]||(l[9]=a=>{F.handle(a),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(i(),r($,{to:"body"},[t(D,{modelValue:u.vcreate,"onUpdate:modelValue":l[10]||(l[10]=a=>u.vcreate=a),onAdd:l[11]||(l[11]=a=>{e.select(a),u.vcreate=!1}),context:e.context},null,8,["modelValue","context"])])),(i(),r($,{to:"body"},[t(b,{modelValue:e.vurls,"onUpdate:modelValue":l[12]||(l[12]=a=>e.vurls=a),onAdd:l[13]||(l[13]=a=>{e.select(a),e.vurls=!1})},null,8,["modelValue"])]))],64)}const Q=U(O,[["render",M],["__scopeId","data-v-7af8f743"]]);export{Q as default};
