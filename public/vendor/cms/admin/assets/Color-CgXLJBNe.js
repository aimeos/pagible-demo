import{s as L,u as M,v as $,x as P,y,z as j,A as b,B as q,C as D,D as K,E as N,G as C,H as k,I as g,f as h,a as s,J as R,F as x,m as v,h as T,_ as W,b as z,r as G,o as H}from"./index-zamkCzJL.js";const J=["prepend","prepend-inner","append","append-inner"],Q=M({hidePip:Boolean,colorPip:Boolean,pipIcon:{type:String,default:"$color"},pipLocation:{type:String,default:"prepend",validator:e=>J.includes(e)},pipVariant:{type:String,default:"text"},...K(),...D(),...q(),...b(N(),["width"])},"VColorInput"),X=L()({name:"VColorInput",props:Q(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:a}=p;const o=$(e,"modelValue"),n=P(!1),c=P(e.focused),r=y(()=>!e.disabled&&!e.readonly),l=y(()=>o.value||null);function _(i){if(i.key!=="Enter")return;if(!n.value||!c.value){n.value=!0;return}const m=i.target;o.value=m.value}function f(i){i.preventDefault(),i.stopPropagation(),n.value=!0}function I(){n.value=!1}function F(){n.value=!1}j(()=>{const i=C.filterProps(e),m=k.filterProps(b(e,["active","color"])),B=g.filterProps(e),U=e.hidePip?void 0:{[e.pipLocation]:t=>{var u;return h(x,null,[s(R,{class:"v-color-input__pip",color:e.colorPip?o.value:void 0,variant:e.pipVariant,icon:e.pipIcon},null),(u=a[e.pipLocation])==null?void 0:u.call(a,t)])}};return s(g,v(B,{class:["v-color-input",e.class],style:e.style,modelValue:l.value,onKeydown:r.value?_:void 0,focused:n.value||c.value,"onClick:control":r.value?f:void 0,"onClick:prependInner":r.value?f:void 0,"onUpdate:focused":t=>c.value=t,"onClick:appendInner":r.value?f:void 0,"onUpdate:modelValue":t=>{o.value=t}}),{...a,...U,default:()=>{var t;return h(x,null,[s(T,{modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,activator:"parent",minWidth:"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[s(C,v(i,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,onSave:I,onCancel:F}),{default:u=>{let{actions:A,model:V,save:S,cancel:w,isPristine:E}=u;function O(d){e.hideActions?o.value=d:V.value=d}return s(k,v(m,{modelValue:e.hideActions?o.value:V.value,"onUpdate:modelValue":d=>O(d)}),{actions:e.hideActions?void 0:()=>{var d;return((d=a.actions)==null?void 0:d.call(a,{save:S,cancel:w,isPristine:E}))??A()}})}})]}),(t=a.default)==null?void 0:t.call(a)])}})})}}),Y={components:{VColorInput:X},props:{modelValue:{type:String,default:""},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],methods:{update(e){this.$emit("update:modelValue",e)},async validate(){return await!0}}};function Z(e,p,a,o,n,c){const r=G("v-color-input");return H(),z(r,{rules:[l=>!a.config.required||!!l||e.$gettext("Value is required"),l=>!l||/^#[0-9A-F]{6,8}$/i.test(l)||e.$gettext("Value must be a hex color code")],clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue,"onUpdate:modelValue":p[0]||(p[0]=l=>c.update(l))},null,8,["rules","clearable","disabled","modelValue"])}const ae=W(Y,[["render",Z]]);export{ae as default};
